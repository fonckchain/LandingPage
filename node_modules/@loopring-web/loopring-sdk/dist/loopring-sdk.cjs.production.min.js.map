{"version":3,"file":"loopring-sdk.cjs.production.min.js","sources":["../src/utils/symbol_tools.ts","../src/defs/web3_defs.ts","../src/defs/ws_defs.ts","../src/defs/url_defs.ts","../src/defs/loopring_constants.ts","../src/defs/loopring_enums.ts","../src/defs/loopring_defs.ts","../src/defs/error_codes.ts","../src/defs/index.ts","../src/utils/formatter.ts","../src/utils/log_tools.ts","../src/utils/swap_calc_utils.ts","../node_modules/regenerator-runtime/runtime.js","../src/api/sign/poseidon/field.ts","../src/api/sign/poseidon/jubjub.ts","../src/api/sign/sign_tools.ts","../src/api/sign/poseidon/permutation.ts","../src/api/sign/poseidon/eddsa.ts","../src/api/sign/poseidon/babyJub.ts","../src/api/sign/poseidon/EDDSAUtil.ts","../src/utils/obj_tools.ts","../src/api/request.ts","../src/api/ethereum/contracts/AbiFunction.js","../src/api/ethereum/contracts/Contract.js","../src/api/ethereum/contracts/Contracts.js","../src/api/ethereum/contracts/index.js","../src/api/base_api.ts","../src/api/ws_api.ts","../src/api/exchange_api.ts","../src/api/contract_api.ts","../src/api/ammpool_api.ts","../src/api/nft_api.ts","../src/api/user_api.ts","../src/api/wallet_api.ts","../src/api/whitelisted_user_api.ts","../src/api/global_api.ts","../src/api/delegate_api.ts","../src/api/defi_api.ts","../src/api/luckToken_api.ts","../src/api/contacts_api.ts","../src/utils/network_tools.ts"],"sourcesContent":["import { TokenInfo } from \"defs\";\n\nconst specialSymbols = [\"ETH2x-FIL\"];\n\nexport function getBaseQuote(symbol: string) {\n  if (!symbol) {\n    return {\n      base: undefined,\n      quote: undefined,\n    };\n  }\n\n  if (symbol.startsWith(\"AMM-\")) {\n    symbol = symbol.substr(4);\n  }\n\n  if (specialSymbols.length > 0) {\n    for (let i = 0; i < specialSymbols.length; i++) {\n      const ind = symbol.indexOf(specialSymbols[i]);\n      if (ind >= 0) {\n        if (ind === 0) {\n          return {\n            base: specialSymbols[i],\n            quote: symbol.substr(symbol.lastIndexOf(\"-\") + 1),\n          };\n        } else {\n          return {\n            base: symbol.substr(0, symbol.indexOf(\"-\")),\n            quote: specialSymbols[i],\n          };\n        }\n      }\n    }\n  }\n\n  const base = symbol.substr(0, symbol.indexOf(\"-\"));\n  const quote = symbol.substr(symbol.indexOf(\"-\") + 1);\n\n  return {\n    base,\n    quote,\n  };\n}\n\nexport const getTokenInfoBySymbol = (\n  tokenSymbolMap: { [key: string]: TokenInfo },\n  symbol: string\n) => {\n  if (!tokenSymbolMap) {\n    return undefined;\n  }\n  try {\n    return tokenSymbolMap[symbol];\n  } catch (err) {\n    return undefined;\n  }\n  return undefined;\n};\n\nexport const getTokenInfoById = (\n  tokenIdMap: { [key: number]: TokenInfo },\n  id: number\n) => {\n  if (!tokenIdMap) {\n    return undefined;\n  }\n  try {\n    return tokenIdMap[id];\n  } catch (err) {\n    return undefined;\n  }\n  return undefined;\n};\n\nexport const hasMarket = (marketArr: any, market: string) => {\n  if (!marketArr) {\n    return false;\n  }\n\n  if (marketArr.includes(market)) {\n    return true;\n  }\n  return false;\n};\n\nexport const getExistedMarket = (\n  marketArr: any,\n  base: string | undefined,\n  quote: string | undefined\n) => {\n  let market: any = undefined;\n  let baseShow: any = undefined;\n  let quoteShow: any = undefined;\n\n  if (base && quote) {\n    market = `${base}-${quote}`;\n    baseShow = base;\n    quoteShow = quote;\n    if (!hasMarket(marketArr, market)) {\n      market = `${quote}-${base}`;\n      if (hasMarket(marketArr, market)) {\n        baseShow = quote;\n        quoteShow = base;\n      } else {\n        market = undefined;\n        baseShow = undefined;\n        quoteShow = undefined;\n      }\n    }\n  }\n\n  const amm = market ? `AMM-${market}` : undefined;\n\n  return {\n    market,\n    amm,\n    baseShow,\n    quoteShow,\n  };\n};\nexport const getPair = (marketArr: any, market: string) => {\n  const { base, quote } = getBaseQuote(market);\n\n  return getExistedMarket(marketArr, base, quote);\n};\n","export enum ChainId {\n  MAINNET = 1,\n  GOERLI = 5,\n}\n\nexport const NetworkContextName = \"NETWORK\";\n\nexport enum ConnectorNames {\n  Unknown = \"Unknown\",\n  MetaMask = \"MetaMask\",\n  Network = \"Network\",\n  WalletConnect = \"WalletConnect\",\n  Gamestop = \"Gamestop\",\n  OtherExtension = \"OtherExtension\",\n  Coinbase = \"Coinbase\",\n  Ledger = \"Ledger\",\n  Trezor = \"Trezor\",\n  Authereum = \"Authereum\",\n}\n\nexport enum SigSuffix {\n  Suffix02 = \"02\",\n  Suffix03 = \"03\",\n}\n\nexport const NFTFactory = {\n  [ChainId.MAINNET]: \"0xc852aC7aAe4b0f0a0Deb9e8A391ebA2047d80026\",\n  [ChainId.GOERLI]: \"0x0ad87482a1bfd0B3036Bb4b13708C88ACAe1b8bA\",\n};\n\nexport const NFTFactory_Collection = {\n  [ChainId.MAINNET]: \"0x97BE94250AEF1Df307749aFAeD27f9bc8aB911db\",\n  [ChainId.GOERLI]: \"0x0ad87482a1bfd0B3036Bb4b13708C88ACAe1b8bA\",\n};\n","import { OrderStatus, Side } from \"./loopring_enums\";\n\nexport interface WsProps {\n  topics: any[];\n  needApiKey: boolean;\n  apikey?: string;\n}\n\nexport enum WsOps {\n  Sub = \"sub\",\n  Unsub = \"unSub\",\n}\n\nexport enum WsTopicType {\n  account = \"account\",\n  order = \"order\",\n  trade = \"trade\",\n  mixtrade = \"mixtrade\",\n  ticker = \"ticker\",\n  candlestick = \"candlestick\",\n  ammpool = \"ammpool\",\n  orderbook = \"orderbook\",\n  mixorder = \"mixorder\",\n  cefiOrderBook = \"cefiOrderBook\",\n}\n\nexport const getAccountArg = () => {\n  return {\n    topic: WsTopicType.account,\n  };\n};\n\nexport interface WsAccount {\n  accountId: number;\n  totalAmount: string;\n  tokenId: number;\n  amountLocked: string;\n}\n\nexport const getOrderArg = (market: string) => {\n  return {\n    topic: WsTopicType.order,\n    market,\n  };\n};\n\nexport interface WsOrder {\n  hash: string;\n  clientOrderId: string;\n  size: string;\n  volume: string;\n  price: string;\n  filledSize: string;\n  filledVolume: string;\n  filledFee: string;\n  status: OrderStatus;\n  createdAt: string;\n  validSince: string;\n  validUntil: string;\n  side: Side;\n  market: string;\n}\n\nexport type OrderWsRequest = {\n  topic?:\n    | WsTopicType.orderbook\n    | WsTopicType.mixorder\n    | WsTopicType.cefiOrderBook;\n  market: string;\n  level: number;\n  count?: number;\n  snapshot?: boolean;\n  showOverlap?: boolean;\n};\nexport const getOrderBookArg = ({\n  topic = WsTopicType.orderbook,\n  market,\n  level,\n  count,\n  snapshot,\n  showOverlap,\n}: OrderWsRequest) => {\n  const obj: any = {\n    topic,\n    market,\n    level,\n    count,\n    snapshot,\n    showOverlap,\n  };\n  Object.keys(obj).forEach((key) =>\n    obj[key] === undefined ? delete obj[key] : {}\n  );\n  return obj;\n};\n\nexport const getMixOrderArg = ({\n  topic = WsTopicType.mixorder,\n  ...orderWsRequest\n}: { topic?: WsTopicType.mixorder } & Omit<OrderWsRequest, \"topic\">) => {\n  return getOrderBookArg({\n    topic,\n    ...orderWsRequest,\n  });\n};\n\nexport const getCefiOrderBook = ({\n  topic = WsTopicType.cefiOrderBook,\n  ...orderWsRequest\n}: { topic?: WsTopicType.cefiOrderBook } & Omit<OrderWsRequest, \"topic\">) => {\n  return getOrderBookArg({\n    topic,\n    ...orderWsRequest,\n  });\n};\n\nexport const getTradeArg = (market: string) => {\n  return {\n    topic: WsTopicType.trade,\n    market,\n  };\n};\n\nexport const getMixTradeArg = (market: string) => {\n  return {\n    topic: WsTopicType.mixtrade,\n    market,\n  };\n};\n\nexport const getTickerArg = (market: string) => {\n  return {\n    topic: WsTopicType.ticker,\n    market,\n  };\n};\n\nexport const getCandlestickArg = (market: string) => {\n  return {\n    topic: WsTopicType.candlestick,\n    market,\n  };\n};\n\nexport const getAmmpoolArg = (poolAddress: string) => {\n  return {\n    topic: WsTopicType.ammpool,\n    snapshot: true,\n    poolAddress,\n  };\n};\n","export enum LOOPRING_URLs {\n  GET_AVAILABLE_BROKER = \"/api/v3/getAvailableBroker\",\n  GET_RELAYER_CURRENT_TIME = \"/api/v3/timestamp\",\n  API_KEY_ACTION = \"/api/v3/apiKey\", // get update\n  GET_NEXT_STORAGE_ID = \"/api/v3/storageId\",\n  ORDER_ACTION = \"/api/v3/order\", // get submit cancel\n  ORDER_CANCEL_HASH_LIST = \"/api/v3/orders/byHash\", // cancel multiple orders by hashs\n  ORDER_CANCEL_CLIENT_ORDER_ID_LIST = \"/api/v3/orders/byClientOrderId\", // cancel multiple orders by clientOrderids\n  GET_MULTI_ORDERS = \"/api/v3/orders\",\n  GET_MARKETS = \"/api/v3/exchange/markets\",\n  GET_TOKENS = \"/api/v3/exchange/tokens\",\n  GET_EXCHANGE_INFO = \"/api/v3/exchange/info\",\n  GET_WITHDRAWAL_AGENTS = \"/api/v3/exchange/withdrawalAgents\",\n  GET_EXCHANGE_FEEINFO = \"/api/v3/exchange/feeInfo\",\n  GET_IGNORE_WITHDRAW = \"/api/v3/exchange/notWithdrawContractTokens\",\n\n  GET_MIX_MARKETS = \"/api/v3/mix/markets\",\n  GET_DEPTH = \"/api/v3/depth\",\n  GET_MIX_DEPTH = \"/api/v3/mix/depth\",\n  GET_TICKER = \"/api/v3/ticker\",\n  GET_MIX_TICKER = \"/api/v3/mix/ticker\",\n  GET_CANDLESTICK = \"/api/v3/candlestick\",\n  GET_MIX_CANDLESTICK = \"/api/v3/mix/candlestick\",\n  GET_FIAT_PRICE = \"/api/v3/price\",\n  GET_TRADES = \"/api/v3/trade\",\n  POST_INTERNAL_TRANSFER = \"/api/v3/transfer\",\n  ACCOUNT_ACTION = \"/api/v3/account\", // get or update\n  COUNTER_FACTUAL_INFO = \"/api/v3/counterFactualInfo\",\n  GET_USER_REG_TXS = \"/api/v3/user/createInfo\",\n  GET_PWD_RESET_TXS = \"/api/v3/user/updateInfo\",\n  GET_USER_EXCHANGE_BALANCES = \"/api/v3/user/balances\",\n  GET_USER_DEPOSITS_HISTORY = \"/api/v3/user/deposits\",\n  WITHDRAWALS_ACTION = \"/api/v3/user/withdrawals\", // post get\n  POST_FORCE_WITHDRAWALS = \"/api/v3/user/forceWithdrawals\",\n\n  GET_USER_TRANSFERS_LIST = \"/api/v3/user/transfers\",\n  GET_USER_TRADE_HISTORY = \"/api/v3/user/trades\",\n  GET_USER_TXS = \"/api/v3/user/transactions\",\n  GET_USER_FEE_RATE = \"/api/v3/user/feeRates\", // deprecated\n  GET_USER_ORDER_FEE_RATE = \"/api/v3/user/orderFee\",\n  GET_MINIMAL_ORDER_AMT = \"/api/v3/user/orderAmount\", // IGNORE for now.\n  GET_MINIMUM_TOKEN_AMT = \"/api/v3/user/orderUserRateAmount\",\n  GET_OFFCHAIN_FEE_AMT = \"/api/v3/user/offchainFee\",\n  GET_USER_BILLS = \"/api/v3/user/bills\",\n\n  GET_ALLOWANCES = \"/api/v3/eth/allowances\",\n  GET_ETH_NONCE = \"/api/v3/eth/nonce\",\n  GET_ETH_BALANCES = \"/api/v3/eth/balances\",\n  GET_TOKEN_BALANCES = \"/api/v3/eth/tokenBalances\",\n  GET_AKK_TOKEN_BALANCES = \"/api/v3/eth/tokenBalances/all\",\n\n  GET_GAS_PRICE = \"/api/v3/eth/recommendedGasPrice\",\n  GET_GAS_PRICE_RANGE = \"/api/v3/eth/recommendedGasPriceRange\",\n\n  GET_RECOMENDED_MARKETS = \"/api/v3/exchange/recommended\",\n\n  GET_AMM_POOLS_CONF = \"/api/v3/amm/pools\",\n  GET_AMM_POOLS_SNAPSHOT = \"/api/v3/amm/balance\",\n  GET_AMM_POOLS_BALANCES = \"/api/v3/amm/balances\",\n  GET_AMM_POOL_STATS = \"/api/v3/amm/poolsStats\",\n  POST_JOIN_AMM_POOL = \"/api/v3/amm/join\",\n  POST_EXIT_AMM_POOL = \"/api/v3/amm/exit\",\n  GET_AMM_POOL_TXS = \"/api/v3/amm/transactions\",\n  GET_USER_AMM_POOL_TXS = \"/api/v3/amm/user/transactions\",\n  GET_AMM_POOL_TRADE_TXS = \"/api/v3/amm/trades\",\n  GET_AMM_ACTIVITY_RULES = \"/api/v3/sidecar/activityRules\",\n  GET_AMMPOOL_USER_REWARDS = \"/api/v3/amm/user/rewards\",\n  GET_AMMPOOL_REWARDS = \"/api/v3/amm/rewards\",\n  GET_AMMPOOL_GAME_RANK = \"/api/v3/game/rank\",\n  GET_AMMPOOL_GAME_USER_RANK = \"/api/v3/game/user/rank\",\n  GET_LIQUIDITY_MINING = \"/api/v3/sidecar/liquidityMining\",\n  GET_DELEGATE_GET_CODE = \"/api/v3/delegator/getCode\",\n  GET_DELEGATE_GET_IPFS = \"/api/v3/delegator/ipfs\",\n  GET_LIQUIDITY_MINING_USER_HISTORY = \"/api/v3/sidecar/liquidityMiningUserHistory\",\n  GET_PROTOCOL_PORTRAIT = \"/api/v3/sidecar/ProtocolPortrait\",\n  GET_AMM_ASSET_HISTORY = \"/api/v3/amm/assets\",\n  GET_ASSET_LOCK_RECORDS = \"api/v3/user/lockRecords\",\n\n  GET_DEFI_TOKENS = \"/api/v3/defi/tokens\",\n  GET_DEFI_MARKETS = \"/api/v3/defi/markets\",\n  POST_DEFI_ORDER = \"/api/v3/defi/order\",\n  GET_DEFI_REWARDS = \"/api/v3/defi/rewards\",\n  GET_DEFI_TRANSACTIONS = \"/api/v3/defi/transactions\",\n\n  SET_REFERRER = \"/api/v3/refer\",\n\n  GET_WS_KEY = \"/v3/ws/key\",\n  GET_LATEST_TOKEN_PRICES = \"/api/v3/datacenter/getLatestTokenPrices\",\n  GET_USER_TRADE_AMOUNT = \"/api/v3/datacenter/getUserTradeAmount\",\n\n  GET_USER_ASSETS = \"/api/wallet/v3/userAssets\",\n  GET_TOKEN_PRICES = \"/api/wallet/v3/tokenPrices\",\n  GET_GUARDIAN_APPROVE_LIST = \"/api/wallet/v3/getGuardianApproveList\",\n  GET_PROTECTORS = \"/api/wallet/v3/getProtects\",\n  GET_OPERATION_LOGS = \"/api/wallet/v3/operationLogs\",\n  GET_HEBAO_CONFIG = \"/api/wallet/v3/getAppConfigs\",\n  GET_WALLET_TYPE = \"/api/wallet/v3/wallet/type\",\n  GET_WALLET_MODULES = \"/api/wallet/v3/walletModules\",\n  GET_WALLET_CONTRACTVERSION = \"/api/wallet/v3/contractVersion\",\n  RESOLVE_ENS = \"/api/wallet/v3/resolveEns\",\n  RESOLVE_NAME = \"/api/wallet/v3/resolveName\",\n  //\n  SUBMIT_APPROVE_SIGNATURE = \"/api/wallet/v3/submitApproveSignature\",\n  REJECT_APPROVE_SIGNATURE = \"/api/wallet/v3/rejectApproveSignature\",\n  // OFFICIAL_LOCK_OR_UNLOCK = \"/api/wallet/v3/officialLockOrUnlock\",\n  SEND_META_TX = \"/api/wallet/v3/sendMetaTx\",\n\n  GET_ACCOUNT_SERVICES = \"/api/v3/spi/getAccountServices\",\n  // VIP\n  GET_USER_VIP_INFO = \"/api/v3/user/vipInfo\",\n  GET_USER_VIP_ASSETS = \"/api/v3/datacenter/getUserAssets\",\n  GET_USER_NFT_BALANCES = \"/api/v3/user/nft/balances\",\n  GET_USER_NFT_BALANCES_BY_COLLECTION = \"/api/v3/user/nft/collection/balances\",\n  GET_NFT_OFFCHAIN_FEE_AMT = \"/api/v3/user/nft/offchainFee\",\n  POST_NFT_INTERNAL_TRANSFER = \"/api/v3/nft/transfer\",\n  POST_NFT_WITHDRAWALS = \"/api/v3/nft/withdrawal\",\n  POST_NFT_MINT = \"/api/v3/nft/mint\",\n  POST_NFT_TRADE = \"/api/v3/nft/trade\",\n  POST_NFT_VALIDATE_ORDER = \"/api/v3/nft/validateOrder\", // post get\n  POST_NFT_EDIT_COLLECTION = \"/api/v3/nft/collection/edit\",\n  POST_NFT_CREATE_LEGACY_COLLECTION = \"/api/v3/nft/collection/legacy/tokenAddress\",\n  POST_NFT_VALIDATE_REFRESH_NFT = \"/api/v3/nft/image/refresh\",\n  POST_DEPLOY_COLLECTION = \"/api/v3/collection/deployTokenAddress\",\n  POST_NFT_LEGACY_UPDATE_COLLECTION = \"/api/v3/nft/collection/legacy/updateNftCollection\",\n  POST_NFT_UPDATE_NFT_GROUP = \"/api/v3/user/nft/updateNftPreference\",\n  GET_NFT_COLLECTION = \"/api/v3/nft/collection\",\n  POST_NFT_CREATE_COLLECTION = \"/api/v3/nft/collection\",\n  DELETE_NFT_CREATE_COLLECTION = \"/api/v3/nft/collection\",\n  GET_COLLECTION_WHOLE_NFTS = \"/api/v3/nft/public/collection/items\",\n  GET_NFT_COLLECTION_PUBLISH = \"/api/v3/nft/public/collection\",\n  GET_NFT_COLLECTION_HASNFT = \"/api/v3/user/collection/details\",\n  GET_NFT_LEGACY_COLLECTION = \"/api/v3/nft/collection/legacy\",\n  GET_NFT_LEGACY_TOKENADDRESS = \"/api/v3/nft/collection/legacy/tokenAddress\",\n  GET_NFT_LEGACY_BALANCE = \"/api/v3/nft/collection/legacy/balance\",\n\n  GET_NFTs_INFO = \"/api/v3/nft/info/nfts\",\n  GET_USER_NFT_TRANSFER_HISTORY = \"/api/v3/user/nft/transfers\",\n  GET_USER_NFT_DEPOSIT_HISTORY = \"/api/v3/user/nft/deposits\",\n  GET_USER_NFT_WITHDRAW_HISTORY = \"/api/v3/user/nft/withdrawals\",\n  GET_USER_NFT_TRANSACTION_HISTORY = \"/api/v3/user/nft/transactions\",\n  GET_USER_NFT_TRADE_HISTORY_OLD = \"/api/v3/user/nft/trades\",\n  GET_USER_NFT_TRADE_HISTORY = \"/api/v3/new/user/nft/trades\",\n  GET_USER_NFT_MINT_HISTORY = \"/api/v3/user/nft/mints\",\n  GET_DEPLOY_TOKEN_ADDRESS = \"/api/v3/nft/deployTokenAddress\",\n  IPFS_META_URL = \"https://ipfs.loopring.io/ipfs/\",\n\n  GET_DUAL_INDEX = \"/api/v3/dual/index\",\n  GET_DUAL_PRICES = \"/api/v3/dual/prices\",\n  GET_DUAL_INFOS = \"/api/v3/dual/infos\",\n  GET_DUAL_TRANSACTIONS = \"/api/v3/dual/transactions\",\n  GET_DUAL_BALANCE = \"/api/v3/dual/balance\",\n  GET_DUAL_RULE = \"/api/v3/dual/rules\",\n  POST_DUAL_ORDER = \"/api/v3/dual/order\",\n  GET_DUAL_USER_LOCKED = \"/api/v3/dual/lockRecordAmount\",\n\n  GET_LUCK_TOKEN_AGENTS = \"/api/v3/luckyToken/agents\",\n  GET_LUCK_TOKEN_AUTHORIZEDSIGNERS = \"/api/v3/luckyToken/authorizedSigners\",\n  GET_LUCK_TOKEN_CLAIMHISTORY = \"/api/v3/luckyToken/user/claimHistory\",\n  GET_LUCK_TOKEN_LUCKYTOKENS = \"/api/v3/luckyToken/user/luckyTokens\",\n  GET_LUCK_TOKEN_LUCKYTOKENDETAIL = \"/api/v3/luckyToken/user/luckyTokenDetail\",\n  GET_LUCK_TOKEN_BLINDBOXDETAIL = \"/api/v3/luckyToken/user/blindBoxDetail\",\n  GET_LUCK_TOKEN_WITHDRAWALS = \"/api/v3/luckyToken/user/withdraws \",\n  GET_LUCK_TOKEN_BALANCES = \"/api/v3/luckyToken/user/balances\",\n  GET_LUCK_TOKEN_CLAIMEDLUCKYTOKENS = \"/api/v3/luckyToken/user/claimedLuckyTokens\",\n  GET_LUCK_TOKEN_CLAIMEDBLINDBOX = \"/api/v3/luckyToken/user/claimBlindBoxHistory\",\n  GET_LUCK_TOKEN_SUMMARY = \"/api/v3/luckyToken/user/summary\",\n  POST_LUCK_TOKEN_SENDLUCKYTOKEN = \"/api/v3/luckyToken/sendLuckyToken\",\n  POST_LUCK_TOKEN_CLAIMLUCKYTOKEN = \"/api/v3/luckyToken/claimLuckyToken\",\n  POST_LUCK_TOKEN_CLAIMBLINDBOX = \"/api/v3/luckyToken/claimBlindBox\",\n  POST_LUCK_TOKEN_WITHDRAWALS = \"/api/v3/luckyToken/user/withdrawals\",\n  GET_BANXA_API_KEY = \"/api/v3/hmacAuthentication\",\n  GET_STAKE_PRODUCTS = \"/api/v3/stake/products\",\n  POST_STAKE_CLAIM = \"/api/v3/stake/claim\",\n  POST_STAKE = \"/api/v3/stake/stake\",\n  POST_STAKE_REDEEM = \"/api/v3/stake/redeem\",\n  GET_STAKE_SUMMARY = \"/api/v3/stake/user/summary\",\n  GET_STAKE_TRANSACTIONS = \"/api/v3/stake/user/transactions\",\n\n  // Contacts\n  GET_CONTACTS = \"/api/v3/user/contact\",\n  CREATE_CONTACT = \"/api/v3/user/contact/add\",\n  UPDATE_CONTACT = \"/api/v3/user/contact/update\",\n  DELETE_CONTACT = \"/api/v3/user/contact\",\n\n  // CEFI_MARKETS\n  GET_CEFI_MARKETS = \"api/v3/cefi/markets\",\n  GET_CEFI_DEPTH = \"api/v3/cefi/depth\",\n  GET_CEFI_ORDERS = \"api/v3/cefi/orders\",\n  POST_CEFI_ORDER = \"api/v3/cefi/order\",\n}\n","export enum HEBAO_LOCK_STATUS {\n  LOCK_FAILED = \"LOCK_FAILED\",\n  CREATED = \"CREATED\",\n  LOCK_WAITING = \"LOCK_WAITING\",\n  UNLOCK_FAILED = \"UNLOCK_FAILED\",\n  LOCKED = \"LOCKED\",\n  UNLOCK_WAITING = \"UNLOCK_WAITING\",\n}\n\nexport enum HEBAO_META_TYPE {\n  recovery = 16,\n  transfer = 18,\n  add_guardian = 34,\n  remove_guardian = 35,\n  unlock_wallet = 37,\n  deposit_wallet = 202,\n}\n\nexport const SoursURL = \"https://static.loopring.io/assets/\";\n","export enum ReqMethod {\n  GET = \"GET\",\n  POST = \"POST\",\n  DELETE = \"DELETE\",\n}\n\nexport enum SigPatchField {\n  EddsaSignature = \"eddsaSignature\",\n}\n\nexport enum MarketStatus {\n  AMM = 1,\n  ORDER_BOOK = 2,\n  ALL = 3,\n}\n\nexport enum VipCatergory {\n  ORDERBOOK_TRADING_FEES_STABLECOIN = \"ORDERBOOK_TRADING_FEES_STABLECOIN\",\n  ORDERBOOK_TRADING_FEES = \"ORDERBOOK_TRADING_FEES\",\n  AMM_TRADING_FEES = \"AMM_TRADING_FEES\",\n  OTHER_FEES = \"OTHER_FEES\",\n}\n\nexport enum TradeChannel {\n  BLANK = \"\",\n  ORDER_BOOK = \"ORDER_BOOK\", // 0\n  AMM_POOL = \"AMM_POOL\", // 1\n  MIXED = \"MIXED\", // 2\n}\n\nexport enum OrderType {\n  LimitOrder = \"LIMIT_ORDER\",\n  TakerOnly = \"TAKER_ONLY\",\n  MakerOnly = \"MAKER_ONLY\",\n  ClassAmm = \"AMM\",\n}\n\nexport enum OrderTypeResp {\n  LimitOrder = \"LIMIT_ORDER\",\n  TakerOnly = \"TAKER_ONLY\",\n  MakerOnly = \"MAKER_ONLY\",\n  ClassAmm = \"CLASS_AMM\",\n}\n\nexport enum Currency {\n  usd = \"usd\",\n  cny = \"cny\",\n}\n\nexport enum OffchainFeeReqType {\n  ORDER = 0,\n  OFFCHAIN_WITHDRAWAL = 1,\n  UPDATE_ACCOUNT = 2,\n  TRANSFER = 3,\n  FAST_OFFCHAIN_WITHDRAWAL = 4,\n  OPEN_ACCOUNT = 5,\n  AMM_EXIT = 6,\n  DEPOSIT = 7,\n  AMM_JOIN = 8,\n  TRANSFER_AND_UPDATE_ACCOUNT = 15,\n  DEFI_JOIN = 21,\n  DEFI_EXIT = 22,\n  FORCE_WITHDRAWAL = 23,\n}\nexport enum OffchainNFTFeeReqType {\n  NFT_MINT = 9,\n  NFT_WITHDRAWAL = 10,\n  NFT_TRANSFER = 11,\n  NFT_DEPLOY = 13,\n  NFT_TRANSFER_AND_UPDATE_ACCOUNT = 19,\n}\n\nexport enum TradingInterval {\n  min1 = \"1min\",\n  min5 = \"5min\",\n  min15 = \"15min\",\n  min30 = \"30min\",\n  hr1 = \"1hr\",\n  hr2 = \"2hr\",\n  hr4 = \"4hr\",\n  hr12 = \"12hr\",\n  d1 = \"1d\",\n  w1 = \"1w\",\n}\n\nexport enum TxStatus {\n  processing = \"processing\",\n  processed = \"processed\",\n  received = \"received\",\n  failed = \"failed\",\n}\n\nexport enum OrderStatus {\n  processing = \"processing\",\n  processed = \"processed\",\n  failed = \"failed\",\n  cancelled = \"cancelled\",\n  cancelling = \"cancelling\",\n  expired = \"expired\",\n}\n\nexport enum Side {\n  Buy = \"BUY\",\n  Sell = \"SELL\",\n}\n\nexport enum WithdrawalTypes {\n  OFFCHAIN_WITHDRAWAL = \"OFFCHAIN_WITHDRAWAL\",\n  ONCHAIN_WITHDRAWAL = \"ONCHAIN_WITHDRAWAL\",\n  FORCE_WITHDRAWAL = \"FORCE_WITHDRAWAL\",\n}\n\nexport enum UserTxTypes {\n  DEPOSIT = \"deposit\",\n  TRANSFER = \"transfer\",\n  OFFCHAIN_WITHDRAWAL = \"offchain_withdrawal\",\n  FORCE_WITHDRAWAL = \"force_withdrawal\",\n  DELEGATED_FORCE_WITHDRAW = \"delegated_force_withdraw\",\n  SEND_LUCKY_TOKEN = \"send_lucky_token\",\n  WITHDRAW_LUCKY_TOKEN = \"withdraw_lucky_token\",\n  WITHDRAW = \"onchain_withdrawal\",\n  SEND_BACK_LUCKY_TOKEN = \"send_back_lucky_token\",\n  DUAL_INVESTMENT = \"dual_investment\",\n  L2_STAKING = \"l2_staking\",\n}\n\nexport enum UserBillTypes {\n  DEPOSIT = 0,\n  ONCHAIN_WITHDRAWAL = 1,\n  TRANSFER = 2,\n}\n\nexport enum UserNFTTxTypes {\n  DEPOSIT = \"deposit\",\n  TRANSFER = \"transfer\",\n  WITHDRAW = \"onchain_withdrawal\",\n  MINT = \"mint\",\n}\n\nexport enum TransferType {\n  transfer = \"transfer\",\n  transfer_red = \"transfer_red\",\n}\n\nexport enum BillType {\n  ORDER = \"order\",\n  DEPOSIT = \"deposit\",\n  ONCHAIN_WITHDRAWAL = \"onchain_withdrawal\",\n  OFFCHAIN_WITHDRAWAL = \"offchain_withdrawal\",\n  TRANSFER = \"transfer\",\n  TRANSFER_RED = \"transfer_red\",\n}\n\nexport enum FilledType {\n  dex = \"dex\",\n  amm = \"amm\",\n}\n\nexport enum TxType {\n  TRANSFER = \"TRANSFER\",\n  DEPOSIT = \"DEPOSIT\",\n  OFFCHAIN_WITHDRAWAL = \"OFFCHAIN_WITHDRAWAL\",\n}\n\nexport enum TxNFTType {\n  TRANSFER = \"TRANSFER\",\n  DEPOSIT = \"DEPOSIT\",\n  WITHDRAW = \"WITHDRAW\",\n  ALL = \"ALL\",\n  MINT = \"MINT\",\n}\n\nexport enum AmmTxType {\n  JOIN = \"AMM_JOIN\",\n  EXIT = \"AMM_EXIT\",\n}\n\nexport enum SortOrder {\n  ASC = 0,\n  DESC = 1,\n}\n\nexport enum RuleType {\n  AMM_MINING = \"AMM_MINING\",\n  SWAP_VOLUME_RANKING = \"SWAP_VOLUME_RANKING\",\n  ORDERBOOK_MINING = \"ORDERBOOK_MINING\",\n}\n\nexport enum AmmPoolActivityStatus {\n  NotStarted = \"NotStarted\",\n  InProgress = \"InProgress\",\n  EndOfGame = \"EndOfGame\",\n}\n\nexport enum SIG_FLAG {\n  NO_SIG,\n  EDDSA_SIG,\n  EDDSA_SIG_POSEIDON,\n}\n\nexport enum AssetType {\n  LEVEL_ONE = 0,\n  DEX = 1,\n}\n\nexport enum IntervalType {\n  HOUR = 0,\n  DAY = 1,\n}\n","import { ChainId, ConnectorNames } from \"./web3_defs\";\n\nimport Web3 from \"web3\";\n\nimport {\n  AmmPoolActivityStatus,\n  AmmTxType,\n  AssetType,\n  BillType,\n  Currency,\n  IntervalType,\n  MarketStatus,\n  OffchainFeeReqType,\n  OffchainNFTFeeReqType,\n  OrderStatus,\n  OrderType,\n  OrderTypeResp,\n  ReqMethod,\n  RuleType,\n  Side,\n  SIG_FLAG,\n  TradeChannel,\n  TradingInterval,\n  TransferType,\n  TxStatus,\n  TxType,\n  UserBillTypes,\n  UserNFTTxTypes,\n  UserTxTypes,\n  WithdrawalTypes,\n} from \"./loopring_enums\";\nimport { RESULT_INFO } from \"./error_codes\";\nimport { HEBAO_LOCK_STATUS, HEBAO_META_TYPE } from \"./loopring_constants\";\nimport { CounterFactualInfo, NFTCounterFactualInfo } from \"./account_defs\";\nimport { NFTType } from \"../api\";\n\nexport type Without<T, U> = { [P in Exclude<keyof T, keyof U>]?: never };\nexport type XOR<T, U> = T | U extends { [key: string]: any }\n  ? (Without<T, U> & U) | (Without<U, T> & T)\n  : T | U;\n\nexport interface VipFeeRateInfo {\n  symbol: string;\n  makerRate: number;\n  takerRate: number;\n}\n\nexport type VipFeeRateInfoMap = { [key: string]: VipFeeRateInfo };\n\nexport type TX_HASH_API = { hash?: string; resultInfo?: RESULT_INFO };\nexport type TX_HASH_RESULT<T> = T & { raw_data: T };\n\nexport interface ReqOptions {\n  baseUrl?: string;\n  apiKey?: string;\n  signature?: string;\n\n  url?: string;\n}\nexport enum NetworkWallet {\n  ETHEREUM = \"ETHEREUM\",\n  ARBITRUM = \"ARBITRUM\",\n  GOERLI = \"GOERLI\",\n  TAIKO = \"TAIKO\",\n}\n\nexport interface ReqParams {\n  url: string;\n  method: ReqMethod;\n  sigFlag: SIG_FLAG;\n\n  queryParams?: any;\n  bodyParams?: any;\n\n  apiKey?: string;\n\n  sigObj?: {\n    dataToSig?: any;\n    sig?: string;\n    sigPatch?: string;\n\n    PrivateKey?: string;\n\n    owner?: string;\n    pwd?: string;\n    web3?: any;\n    hasDataStruct?: boolean;\n  };\n  eddsaSignature?: string;\n  ecdsaSignature?: string;\n}\n\nexport interface LoopringMap<T> {\n  [key: string]: T;\n}\n\nexport interface ExchangeInfo {\n  ammExitFees: Array<any>[];\n  chainId: number;\n  depositAddress: string;\n  exchangeAddress: string;\n  fastWithdrawalFees: Array<any>[];\n  onchainFees: Array<any>[];\n  openAccountFees: Array<any>[];\n  transferFees: Array<any>[];\n  updateFees: Array<any>[];\n  withdrawalFees: Array<any>[];\n}\n\nexport interface TickerData {\n  symbol: string;\n  base: string | undefined;\n  quote: string | undefined;\n  timestamp: number;\n  base_token_volume: string;\n  quote_token_volume: string;\n  base_fee_amt: string;\n  quote_fee_amt: string;\n  open: number;\n  high: number;\n  low: number;\n  close: number;\n  count: number;\n  bid: number;\n  ask: number;\n  change?: number;\n}\n\nexport interface ABInfo {\n  price: number;\n  amt: string;\n  vol: string;\n  amtTotal: string;\n  volTotal: string;\n}\n\nexport interface DepthData {\n  symbol: string;\n\n  version: number;\n  timestamp: number;\n\n  mid_price: number;\n\n  bids: ABInfo[];\n  bids_prices: number[];\n  bids_amtTotals: string[];\n  bids_volTotals: string[];\n  bids_amtTotal: string;\n  bids_volTotal: string;\n\n  asks: ABInfo[];\n  asks_prices: number[];\n  asks_amtTotals: string[];\n  asks_volTotals: string[];\n  asks_amtTotal: string;\n  asks_volTotal: string;\n}\n\nexport interface Candlestick {\n  timestamp: number;\n  txs: number;\n  open: number;\n  close: number;\n  high: number;\n  low: number;\n  baseVol: string;\n  quoteVol: string;\n}\n\nexport interface TradesData {\n  totalNum: number;\n  trades: any[][];\n}\n\nexport interface OrdersData {\n  totalNum: number;\n  trades: any[][];\n}\n\nexport interface QuotesData {\n  quotes: any[][];\n}\n\nexport interface TokenInfo {\n  type: string;\n  tokenId: number;\n  symbol: string;\n  name: string;\n  address: string;\n  decimals: number;\n  precision: number;\n  precisionForOrder: number;\n  orderAmounts: {\n    minimum: string;\n    maximum: string;\n    dust: string;\n  };\n  luckyTokenAmounts: {\n    minimum: string;\n    maximum: string;\n    dust: string;\n  };\n  fastWithdrawLimit: string;\n  gasAmounts: {\n    distribution: string;\n    deposit: string;\n  };\n  enabled: boolean;\n\n  isLpToken: boolean;\n}\n\nexport interface AmmPoolStat {\n  market: string;\n  liquidity: string[];\n  lpLiquidity: string;\n  liquidityUSD: string;\n  ohlc: string[];\n  volume: string[];\n  fees: string[];\n  apyBips: string;\n  isRecommended: boolean;\n  rewards: TokenVolumeV3[];\n}\n\nexport interface AmmPoolActivityRule {\n  market: string;\n  ruleType: RuleType;\n  rangeFrom: number;\n  rangeTo: number;\n  awardRules: TokenVolumeV3[];\n  maxSpread: number;\n  topK: number;\n\n  status: AmmPoolActivityStatus;\n}\n\nexport interface AmmPoolInProgressActivityRule {\n  market: string;\n  ruleType: RuleType[];\n  rangeFrom: number;\n  rangeTo: number;\n  awardRules: TokenVolumeV3[];\n  maxSpread: number;\n  topK: number;\n\n  status: AmmPoolActivityStatus;\n}\n\nexport interface AmmTrade {\n  accountId: number;\n  orderHash: string;\n  market: string;\n  side: string;\n  size: string;\n  price: number;\n  feeAmount: string;\n  createdAt: number;\n}\n\nexport interface AmmPoolInfoV3 {\n  name: string;\n  market: string;\n  address: string;\n  version: string;\n  tokens: {\n    pooled: string[];\n    lp: number;\n  };\n  feeBips: number;\n  precisions: {\n    price: number;\n    amount: number;\n  };\n  createdAt: string;\n  status: number;\n  domainSeparator: string;\n}\n\nexport interface TokenRelatedInfo {\n  tokenId: string;\n  tokenList: string[];\n}\n\nexport interface AmmPoolConfResponse {\n  ammpools: LoopringMap<AmmPoolInfoV3>;\n  pairs: LoopringMap<TokenRelatedInfo>;\n  raw_data: any;\n}\n\nexport interface PooledMap {\n  [key: number]: TokenVolumeV3;\n}\n\nexport interface AmmPoolBalance {\n  poolName: string;\n  poolAddress: string;\n  pooled: [TokenVolumeV3, TokenVolumeV3];\n  lp: any;\n  risky: boolean;\n  pooledMap: PooledMap;\n}\n\nexport interface AmmPoolBalancesResponse {\n  ammpoolsbalances: LoopringMap<FiatPriceInfo>;\n  raw_data: any;\n}\n\nexport interface TokensResponse {\n  tokenSymbolMap: LoopringMap<TokenInfo>;\n  tokenIdMap: LoopringMap<TokenInfo>;\n  tokenAddressMap: LoopringMap<TokenInfo>;\n\n  getTokenInfoBySymbol: any;\n  getTokenInfoById: any;\n\n  tokenSymbolArr: string[];\n  tokenSymbolArrStr: string;\n  tokenIdArr: string[];\n  tokenIdArrStr: string;\n  tokenAddressArr: string[];\n  tokenAddressArrStr: string;\n\n  raw_data: any;\n}\n\nexport interface MarketInfo {\n  baseTokenId: number;\n  enabled: boolean;\n  market: string;\n  orderbookAggLevels: number;\n  precisionForPrice: number;\n  quoteTokenId: number;\n  status?: MarketStatus;\n  isSwapEnabled?: boolean;\n  createdAt?: number;\n}\n\nexport enum DefiMarketStatus {\n  hide = 0,\n  show = 1,\n  depositOnly = 3,\n  depositAll = 7,\n  withdrawOnly = 9,\n  depositAllAndWithdraw = 15,\n  withdrawAll = 25,\n  WithdrawAllAndDeposit = 27,\n  depositAndWithdraw = 11,\n  all = 31,\n}\n\nexport interface DefiMarketInfo {\n  type: string;\n  market: string;\n  apy: string;\n  baseTokenId: number;\n  quoteTokenId: number;\n  precisionForPrice: number;\n  orderbookAggLevels: number;\n  enabled: boolean;\n  currency: string;\n  status: DefiMarketStatus;\n  accountId: number;\n  address: string;\n  depositFeeBips: number;\n  withdrawFeeBips: number;\n  depositPrice: string;\n  withdrawPrice: string;\n  baseVolume: string;\n  quoteVolume: string;\n  quoteLimitAmount: string;\n  baseLimitAmount: string;\n  quoteAlias: string;\n}\n\nexport interface MarketsResponse {\n  hasMarket: any;\n  getExistedMarket: any;\n  markets: LoopringMap<MarketInfo>;\n  pairs: LoopringMap<TokenRelatedInfo>;\n  tokenArr: string[];\n  tokenArrStr: string;\n  marketArr: string[];\n  marketArrStr: string;\n  raw_data: any;\n}\n\nexport interface TokenVolumeV3 {\n  /**\n   * The Loopring\\'s token identifier.\n   * @type {string}\n   * @memberof TokenVolumeV3\n   */\n  tokenId: string | number;\n  /**\n   * The volume of the token\n   * @type {string}\n   * @memberof TokenVolumeV3\n   */\n  volume: string;\n}\n\nexport interface TokenVolumeV5 {\n  /**\n   * The Loopring\\'s token identifier.\n   * @type {string}\n   * @memberof TokenVolumeV3\n   */\n  tokenId: string | number;\n  /**\n   * The volume of the token\n   * @type {string}\n   * @memberof TokenVolumeV3\n   */\n  amount: string;\n}\n\nexport interface TokenVolumeNFT {\n  /**\n   * The Loopring\\'s token identifier.\n   * @type {string}\n   * @memberof TokenVolumeV3\n   */\n  tokenId: string | number;\n  /**\n   * The amount of the token\n   * @type {string}\n   * @memberof TokenVolumeV3\n   */\n  amount: string;\n  /**\n   * The Loopring's NFTAction token data identifier which is a hash string of NFTAction token address and NFT_ID\n   * @type {string}\n   * @memberof The Loopring's NFTAction token data identifier which is a hash string of NFTAction token address and NFT_ID\n   */\n  nftData: NftData;\n}\n\nexport interface AmmPoolJoinTokens {\n  pooled: TokenVolumeV3[];\n  minimumLp: TokenVolumeV3;\n}\n\nexport interface AmmPoolExitTokens {\n  unPooled: TokenVolumeV3[];\n  burned: TokenVolumeV3;\n}\n\nexport interface GameRankInfo {\n  address: string;\n  volume: string;\n  rank: number;\n  rewards: TokenVolumeV3[];\n}\n\nexport interface SetReferrerRequest {\n  address: string;\n  referrer?: number;\n  promotionCode?: string;\n  publicKeyX: string;\n  publicKeyY: string;\n}\n\nexport interface GetAmmUserRewardsRequest {\n  owner: number; // accountId\n  ammPoolMarkets?: string; // pool-name list\n}\n\nexport interface AmmUserReward {\n  market: string;\n  feeRewards: string[];\n  extraRewards: TokenVolumeV3[];\n  currentRewards: TokenVolumeV3[];\n}\n\nexport interface AmmUserRewardMap {\n  [key: string]: {\n    current?: AmmUserReward;\n    lastDay?: AmmUserReward;\n  };\n}\n\nexport interface GetAmmPoolGameRankRequest {\n  ammPoolMarket: string; // symbol AMM-LRC-ETH\n}\n\nexport interface GetAmmAssetRequest {\n  poolAddress: string;\n  limit?: number;\n}\n\nexport interface GetAmmPoolGameUserRankRequest {\n  owner: string; // address\n  ammPoolMarket: string; // symbol AMM-LRC-ETH\n}\n\nexport interface GetAmmPoolSnapshotRequest {\n  poolAddress: string;\n}\n\nexport interface AmmPoolSnapshot {\n  poolName: string;\n  poolAddress: string;\n  pooled: [TokenVolumeV3, TokenVolumeV3];\n  lp: TokenVolumeV3;\n  risky: boolean;\n}\n\nexport interface AmmPoolRequestPatch {\n  chainId: ChainId;\n  ammName: string;\n  poolAddress: string;\n  eddsaKey: string;\n}\n\nexport interface JoinAmmPoolRequest {\n  owner: string;\n  poolAddress: string;\n  joinTokens: AmmPoolJoinTokens;\n  storageIds: number[];\n  fee: string;\n  validUntil?: number;\n  eddsaSignature?: string;\n  ecdsaSignature?: string;\n  domainSeparator?: string;\n}\n\nexport interface JoinAmmPoolResult {\n  hash: string;\n  status: TxStatus;\n  isIdempotent: boolean;\n}\n\nexport interface ExitAmmPoolRequest {\n  owner: string;\n  poolAddress: string;\n  exitTokens: AmmPoolExitTokens;\n  storageId: number;\n  maxFee: string;\n  validUntil?: number;\n  eddsaSignature?: string;\n  ecdsaSignature?: string;\n  domainSeparator?: string;\n}\n\nexport interface ExitAmmPoolResult {\n  hash: string;\n  status: TxStatus;\n  isIdempotent: boolean;\n}\n\nexport interface GetAmmPoolTradesRequest {\n  ammPoolAddress: string;\n  limit?: number;\n  offset?: number;\n}\n\nexport interface AmmPoolTrade {\n  accountId: number;\n  orderHash: string;\n  market: string;\n  side: Side;\n  size: string;\n  price: number;\n  feeAmount: string;\n  createdAt: number;\n}\n\nexport interface GetAmmPoolTxsRequest {\n  poolAddress: string;\n  billType?: BillType;\n  start?: number;\n  end?: number;\n  limit?: number;\n  offset?: number;\n  tokenId?: number;\n  income?: boolean;\n  transferAddress?: string;\n  fromAddress?: string;\n}\n\nexport interface AmmPoolTxOld {\n  id: number;\n  from: string;\n  to: string;\n  token: string;\n  amount: string;\n  tokenF: string;\n  amountF: string;\n  status: TxStatus;\n  txHash: string;\n  billType: BillType;\n  income: boolean;\n  timestamp: number;\n  memo: string;\n  price: string;\n  transferType: TransferType;\n  label: string;\n}\n\nexport interface TokenVolumeV4 {\n  tokenId: number;\n  amount: string;\n  actualAmount: string;\n  feeAmount: string;\n}\n\nexport interface AmmPoolTx {\n  hash: string;\n  txType: AmmTxType;\n  txStatus: TxStatus;\n  ammPoolAddress: string;\n  ammLayerType: string;\n  poolTokens: [TokenVolumeV4, TokenVolumeV4];\n  lpToken: TokenVolumeV4;\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport enum AMMtxTypes {\n  JOIN = 0,\n  EXIT = 1,\n}\n\nexport interface GetUserAmmPoolTxsRequest {\n  accountId: number;\n  start?: number;\n  end?: number;\n  limit?: number;\n  offset?: number;\n  txTypes?: AMMtxTypes; // combine of AmmTxType\n  txStatus?: TxStatus;\n  ammPoolAddress?: string;\n}\n\nexport interface PooledToken {\n  tokenId: number;\n  amount: string;\n  actualAmount: string;\n  feeAmount: string;\n}\n\nexport interface UserAmmPoolTx {\n  hash: string;\n  txType: AmmTxType;\n  txStatus: TxStatus;\n  ammPoolAddress: string;\n  ammLayerType: string;\n  poolTokens: [PooledToken, PooledToken];\n  lpToken: PooledToken;\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport interface GetLiquidityMiningRequest {\n  accountId: number;\n  market: string;\n  size: number;\n}\n\nexport interface RewardItem {\n  startAt: number;\n  timeInterval: string;\n  accountId: number;\n  tokenId: number;\n  market: string;\n  score: number;\n  amount: string;\n}\n\nexport interface GetLiquidityMiningUserHistoryRequest {\n  accountId: number;\n  start?: number;\n  end?: number;\n}\n\nexport interface UserMiningInfo {\n  account_id: number;\n  market: string;\n  start: number;\n  end: number;\n  awards: TokenVolumeV3[];\n}\n\nexport interface GetFiatPriceRequest {\n  legal: string;\n}\n\nexport interface FiatPriceInfo {\n  symbol: string;\n  price: number;\n  updatedAt: number;\n}\n\nexport interface GetMarketTradesRequest {\n  market: string;\n  limit?: number;\n}\nexport enum OrderMakerType {\n  taker = \"taker\",\n  maker = \"maker\",\n}\n\nexport interface MarketTradeInfo {\n  tradeTime: number;\n  tradeId: string;\n  side: Side;\n  volume: string;\n  price: string;\n  market: string;\n  fee: string;\n  type: OrderMakerType;\n}\n\nexport interface GetWithdrawalAgentsRequest {\n  tokenId: number;\n  amount: string;\n}\n\nexport interface GetEthBalancesRequest {\n  owner: string;\n}\n\nexport type TokenAddress = string;\n\nexport interface GetTokenBalancesRequest {\n  owner: string;\n  token: TokenAddress[];\n}\nexport interface GetALLTokenBalancesRequest {\n  owner: string;\n}\n\nexport interface GetAllowancesRequest {\n  owner: string;\n  token: TokenAddress[]; // tokenAddress\n}\n\nexport interface GetDepthRequest {\n  market: string;\n  level?: number;\n  limit?: number;\n}\n\nexport interface GetTickerRequest {\n  market: string;\n}\n\nexport interface GetCandlestickRequest {\n  market: string;\n  interval: TradingInterval;\n  start?: number;\n  end?: number;\n  limit?: number;\n}\n\nexport type GetAccountRequest =\n  | {\n      owner: string;\n    }\n  | {\n      accountId: number;\n    };\n\nexport interface GetCounterFactualInfoRequest {\n  accountId: number;\n}\n\nexport interface GetAvailableBrokerRequest {\n  type: number;\n}\n\nexport interface GetEthNonceRequest {\n  owner: string;\n}\n\nexport interface GetUserApiKeyRequest {\n  accountId: number;\n}\n\nexport interface UpdateUserApiKeyRequest {\n  accountId: number;\n}\n\n// ORDER=0,\n// OFFCHAIN_WITHDRAWAL=1,\n// UPDATE_ACCOUNT=2,\n// TRANSFER=3,\n// FAST_OFFCHAIN_WITHDRAWAL=4,\n// OPEN_ACCOUNT=5,\n// AMM_EXIT=6,\n// DEPOSIT=7,\n// AMM_JOIN=8,\nexport type GetOffchainFeeAmtRequest =\n  | ({\n      accountId: number;\n      amount?: string;\n    } & {\n      requestType: Omit<\n        OffchainFeeReqType,\n        | OffchainFeeReqType.OFFCHAIN_WITHDRAWAL\n        | OffchainFeeReqType.AMM_JOIN\n        | OffchainFeeReqType.AMM_EXIT\n        | OffchainFeeReqType.ORDER\n        | OffchainFeeReqType.FAST_OFFCHAIN_WITHDRAWAL\n      >;\n    })\n  | {\n      requestType:\n        | OffchainFeeReqType.OFFCHAIN_WITHDRAWAL\n        | OffchainFeeReqType.AMM_JOIN\n        | OffchainFeeReqType.AMM_EXIT\n        | OffchainFeeReqType.ORDER;\n      tokenSymbol: string;\n    }\n  | {\n      requestType: OffchainFeeReqType.DEFI_EXIT | OffchainFeeReqType.DEFI_JOIN;\n      market: string;\n    }\n  | {\n      requestType: OffchainFeeReqType.FAST_OFFCHAIN_WITHDRAWAL;\n      tokenSymbol: string;\n      amount: string;\n    };\n\n/**\n * @methodOf OffchainNFTFeeReqType.NFT_MINT\n * @requires  tokenAddress\n *\n * @methodOf {} OffchainNFTFeeReqType.NFT_WITHDRAWAL\n * @param deployInWithdraw\n */\nexport type GetNFTOffchainFeeAmtRequest = {\n  accountId: number;\n  amount?: string;\n} & XOR<\n  {\n    requestType: Omit<OffchainNFTFeeReqType, 9 | 10>;\n  },\n  | {\n      requestType: 9;\n      tokenAddress: string;\n    }\n  | { requestType: 10; tokenAddress: string; deployInWithdraw?: boolean }\n>;\n\nexport interface OrderInfo {\n  minAmount: string;\n  makerRate: number;\n  takerRate: number;\n}\n\nexport interface TokenAmount {\n  tokenSymbol: string;\n  discount: number;\n  baseOrderInfo: OrderInfo;\n  userOrderInfo: OrderInfo;\n  tradeCost: string;\n}\n\nexport interface GetMinimumTokenAmtRequest {\n  accountId: number;\n  market: string;\n}\n\nexport interface OffchainFeeInfo {\n  token: string;\n  fee: string;\n  discount: number;\n}\n\nexport interface GetUserBalancesRequest {\n  accountId: number;\n  tokens: string;\n}\n\n// export interface GetUserBalancesRequest {\n// \taccountId: number;\n// \ttokens: string;\n// \t*accountId\t\t10106\n// \t*tokenId\t\t1\n// \t*status\t\t10106\n// \t*lockTag\t\tDUAL_CURRENCY,DUAL_BASE\n// \toffset\t\t3\n// \tlimit\n// \thash\n// \tdelegatorAccountId\n// \tstart\n// }\n\nexport interface UserBalanceInfo {\n  tokenId: number;\n  total: string;\n  locked: string;\n  pending: {\n    withdraw: string;\n    deposit: string;\n  };\n}\n\nexport interface GetOrderDetailsRequest {\n  accountId: number;\n  orderHash: string;\n}\n\nexport interface OrderDetail {\n  hash: string;\n  clientOrderId: string;\n  side: Side;\n  market: string;\n  price: string;\n  volumes: {\n    baseAmount: string;\n    quoteAmount: string;\n    baseFilled: string;\n    quoteFilled: string;\n    fee: string;\n  };\n  validity: { start: number; end: number };\n  orderType: OrderTypeResp;\n  tradeChannel: TradeChannel;\n  status: OrderStatus;\n}\n\nexport interface GetUserOrderFeeRateRequest {\n  accountId: number;\n  market: string;\n  tokenB: number;\n  amountB: string;\n}\n\nexport interface FeeRateInfo {\n  symbol: string;\n  makerRate: number;\n  takerRate: number;\n}\n\nexport interface GetUserFeeRateRequest {\n  accountId: number;\n  markets: string;\n}\n\nexport interface UserFeeRateInfo {\n  symbol: string;\n  makerRate: number;\n  takerRate: number;\n}\n\nexport interface GetNextStorageIdRequest {\n  accountId: number;\n  sellTokenId: number;\n}\n\n/**\n *\n * @export\n * @interface OffChainWithdrawalRequestV3\n */\nexport interface OffChainWithdrawalRequestV3 {\n  /**\n   * exchange address\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  exchange: string;\n  /**\n   * account ID\n   * @type {number}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  accountId: number;\n  /**\n   * account owner address\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  owner: string;\n  /**\n   *\n   * @type {TokenVolumeV3}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  token: TokenVolumeV3;\n  /**\n   *\n   * @type {TokenVolumeV3}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  maxFee: TokenVolumeV3;\n  /**\n   * offchain ID\n   * @type {number}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  storageId: number;\n  /**\n   * Timestamp for order to become invalid\n   * @type {number}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  validUntil: number;\n  /**\n   * min gas for on-chain withdraw, Loopring exchange allocates gas for each distribution,\n   * but people can also assign this min gas,\n   * so Loopring has to allocate higher gas value for this specific distribution.\n   * Normally no need to take care of this value,\n   * 0 means let loopring choose the reasonable gas\n   * @type {number}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  minGas: number;\n  /**\n   * withdraw to address\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  to: string;\n  /**\n   * extra data for complex withdraw mode, normally none\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  extraData?: string;\n  /**\n   * is fast withdraw mode\n   * @type {boolean}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  fastWithdrawalMode?: boolean;\n  /**\n   * eddsa signature\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  eddsaSignature?: string;\n  /**\n   * ecdsa signature\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  ecdsaSignature?: string;\n  /**\n   * An approved hash string which was already submitted on eth mainnet\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  hashApproved?: string;\n  counterFactualInfo?: CounterFactualInfo;\n}\n\nexport interface GetOrdersRequest {\n  accountId: number;\n  market?: string;\n  start?: number;\n  end?: number;\n  side?: Side[];\n  status?: string[];\n  tradeChannels?: string[];\n  limit?: number;\n  offset?: number;\n  orderTypes?: OrderType;\n}\n\nexport interface GetUserRegTxsRequest {\n  accountId: number;\n  start?: number;\n  end?: number;\n  status?: string;\n  limit?: number;\n  offset?: number;\n}\n\nexport interface UserRegTx {\n  id: number;\n  hash: string;\n  owner: string;\n  txHash: string;\n  feeTokenSymbol: string;\n  feeAmount: number;\n  status: TxStatus;\n  progress: string;\n  timestamp: number;\n  blockNum: number;\n  updatedAt: number;\n}\n\nexport interface GetUserPwdResetTxsRequest {\n  accountId: number;\n  start?: number;\n  end?: number;\n  status?: string;\n  limit?: number;\n  offset?: number;\n}\n\nexport type UserPwdResetTx = UserRegTx;\n\nexport interface GetUserDepositHistoryRequest {\n  accountId?: number;\n  hashes?: string;\n  start?: number;\n  end?: number;\n  status?: string;\n  limit?: number;\n  tokenSymbol?: string;\n  offset?: number;\n}\n\nexport interface UserDepositHistoryTx {\n  id: number;\n  hash: string;\n  symbol: string;\n  amount: string;\n  txHash: string;\n  status: TxStatus;\n  progress: string;\n  timestamp: number;\n  blockNum: number;\n  updatedAt: number;\n}\n\nexport interface UserOnchainWithdrawalHistoryTx {\n  id: number;\n  txType: WithdrawalTypes;\n  hash: string;\n  symbol: string;\n  amount: string;\n  txHash: string;\n  feeTokenSymbol: string;\n  feeAmount: string;\n  status: TxStatus;\n  progress: string;\n  timestamp: number;\n  blockNum: number;\n  updatedAt: number;\n  distributeHash: string;\n  requestId: number;\n  fastStatus: string;\n}\n\nexport interface GetUserOnchainWithdrawalHistoryRequest {\n  accountId?: number;\n  hashes?: string;\n  start?: number;\n  end?: number;\n  status?: string;\n  limit?: number;\n  tokenSymbol?: string;\n  offset?: number;\n  withdrawalTypes?: string;\n}\n\nexport interface GetUserTransferListRequest {\n  accountId?: number;\n  hashes?: string;\n  start?: number;\n  end?: number;\n  status?: string;\n  limit?: number;\n  tokenSymbol?: string;\n  offset?: number;\n  transferTypes?: string; // transfer, transfer_red\n}\n\nexport interface UserTransferRecord {\n  id: number;\n  hash: string;\n  txType: TxType;\n  symbol: string;\n  amount: string;\n  senderAddress: string;\n  receiver: number;\n  receiverAddress: string;\n  feeTokenSymbol: string;\n  feeAmount: string;\n  status: TxStatus;\n  progress: string;\n  timestamp: number;\n  updatedAt: number;\n  memo: string;\n}\n\nexport interface UserAssetInfo {\n  amount: string;\n  createdAt: number;\n  createdAtStr: string;\n}\n\nexport interface GetUserAssetsRequest {\n  wallet: string;\n  assetType?: AssetType;\n  currency?: Currency;\n  limit?: number;\n  offset?: number;\n  network?: NetworkWallet;\n}\n\nexport interface GetUserTradeAmount {\n  accountId: number;\n  markets?: string;\n  limit?: number;\n}\n\nexport interface TokenPriceInfo {\n  price: string;\n  createdAt: number;\n}\n\nexport interface GetTokenPricesRequest {\n  token: string;\n  intervalType?: IntervalType;\n  currency?: Currency;\n  limit?: number;\n  network?: NetworkWallet;\n}\n\nexport interface getLatestTokenPricesRequest {\n  tokens?: string;\n  currency?: string;\n}\n\nexport interface GetUserTxsRequest {\n  accountId: number;\n  tokenSymbol?: string;\n  start?: number;\n  end?: number;\n  offset?: number;\n  limit?: number;\n  types?: UserTxTypes[] | string;\n}\nexport interface GetUserBillsRequest {\n  accountId: number;\n  fromAddress?: string;\n  transferAddress?: string;\n  start?: number;\n  end?: number;\n  offset?: number;\n  limit?: number;\n  billType?: UserBillTypes[];\n}\n\nexport interface GetUserNFTTxsRequest {\n  accountId: number;\n  // tokenSymbol?: string;\n  metadata?: boolean;\n  start?: number;\n  end?: number;\n  offset?: number;\n  limit?: number;\n  types?: UserNFTTxTypes[] | string;\n}\n\nexport declare enum NFT_TRADE {\n  SELL = \"SELL\",\n  BUY = \"BUY\",\n}\n\nexport interface GetUserNFTTradeRequest {\n  accountId: number;\n  nftData?: boolean;\n  orderHash?: string;\n  tradeHash?: string;\n  start?: number;\n  end?: number;\n  side: NFT_TRADE;\n  offset?: number;\n  limit?: number;\n  metadata?: boolean;\n}\n\nexport interface UserTx {\n  id: number;\n  txType: string;\n  hash: string;\n  symbol: string;\n  amount: string;\n  receiver: number;\n  txHash: string;\n  feeTokenSymbol: string;\n  feeAmount: string;\n  status: TxStatus;\n  progress: string;\n  timestamp: number;\n  blockNum: number;\n  updatedAt: number;\n  distributeHash: string;\n  receiverAddress: string;\n  senderAddress: string;\n  memo: string;\n  requestId: number;\n  fastStatus: string;\n  recipient: string;\n}\n\n/**\n * @param {string} guardian address\n */\nexport interface SendMetaTxRequest {\n  wallet: string;\n  module: string;\n  value: string;\n  data: string;\n  nonce: string;\n  validUntil: string;\n  gasToken: string;\n  gasPrice: string;\n  gasLimit: string;\n  gasOverhead: string;\n  feeRecipient: string;\n  signatures: string;\n  signers: string;\n  metaTxType: 0;\n  requestId: string;\n  securityId: string;\n  guardianType: string;\n  network?: NetworkWallet;\n}\n\n/**\n * @param {string} guardian address\n */\nexport interface GetGuardianApproveListRequest {\n  guardian: string;\n  network?: NetworkWallet;\n}\n\n/**\n * @param {string} owner address\n */\nexport interface GetEnsNameRequest {\n  owner: string;\n  network?: NetworkWallet;\n}\n\nexport interface GET_WALLET_TYPE {\n  wallet: string;\n  network?: NetworkWallet;\n}\n\n/**\n * @param {string} fullName ENSName\n */\nexport interface GetEnsAddressRequest {\n  fullName: string;\n  network?: NetworkWallet;\n}\n\nexport interface SubmitApproveSignatureRequestWithPatch {\n  request: ApproveSignatureRequest;\n  guardian: Guardian;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\n/**\n * @param {string} approveRecordId\n * @param {string} securityNumber\n * @param {string} txAwareHash\n * @param {string} signer\n * @param {string} wallet\n * @param {string} signature\n */\nexport interface ApproveSignatureRequest {\n  approveRecordId: string;\n  txAwareHash?: string; //currentRequest.messageHash,\n  securityNumber: string;\n  signer: string; //address,\n  signature: string;\n  network?: NetworkWallet;\n}\n\n/**\n * @param {string} guardian address\n * @param {string} protectAddress? address\n */\nexport interface GetProtectorRequest {\n  guardian: string;\n  protectAddress?: string;\n  network?: NetworkWallet;\n}\n\nexport enum TradesFillTypes {\n  dex = \"dex\",\n  amm = \"amm\",\n}\n\nexport interface GetUserTradesRequest {\n  accountId: number;\n  market?: string;\n  orderHash?: string;\n  offset?: number;\n  limit?: number;\n  fromId?: number;\n  fillTypes?: TradesFillTypes;\n}\n\nexport type UserTrade = MarketTradeInfo;\n\nexport interface UserTrades {\n  totalNum: number;\n  trades: UserTrade[];\n}\n\nexport interface CancelOrderRequest {\n  accountId: number;\n  clientOrderId?: string;\n  orderHash?: string;\n}\n\nexport interface CancelMultiOrdersByHashRequest {\n  accountId: number;\n  orderHash: string; // comma seprated string\n}\n\nexport interface CancelMultiOrdersByClientOrderIdRequest {\n  accountId: number;\n  clientOrderId: string; // comma seprated string\n}\n\nexport interface SubmitOrderRequestV3 {\n  /**\n   * The adderss of the exchange which has to process this order\n   * @type {string}\n   * @memberof SubmitOrderRequestV3\n   */\n  exchange: string;\n  /**\n   * Loopring\\'s account ID\n   * @type {number}\n   * @memberof SubmitOrderRequestV3\n   */\n  accountId: number;\n  /**\n   * The unique identifier of the L2 Merkle tree storage slot where the burn made in order to exit the pool will or has been stored.\n   * @type {number}\n   * @memberof SubmitOrderRequestV3\n   */\n  storageId: number;\n  /**\n   *\n   * @type {TokenVolumeV3}\n   * @memberof SubmitOrderRequestV3\n   */\n  sellToken: TokenVolumeV3;\n  /**\n   *\n   * @type {TokenVolumeV3}\n   * @memberof SubmitOrderRequestV3\n   */\n  buyToken: TokenVolumeV3;\n  /**\n   * Whether the order supports partial fills or not.Currently only supports false as a valid value\n   * @type {string}\n   * @memberof SubmitOrderRequestV3\n   */\n  allOrNone: boolean;\n  /**\n   * Fill size by buy token or by sell token\n   * @type {string}\n   * @memberof SubmitOrderRequestV3\n   */\n  fillAmountBOrS: boolean;\n  /**\n   * Order expiration time, accuracy is in seconds\n   * @type {number}\n   * @memberof SubmitOrderRequestV3\n   */\n  validUntil: number;\n  /**\n   * Maximum order fee that the user can accept, value range (in ten thousandths) 1 ~ 63\n   * @type {number}\n   * @memberof SubmitOrderRequestV3\n   */\n  maxFeeBips: number;\n  /**\n   * The orders EdDSA signature. The signature is a hexadecimal string obtained by signing the order itself and concatenating the resulting signature parts (Rx, Ry, and S). Used to authenticate and authorize the operation.\n   * @type {string}\n   * @memberof SubmitOrderRequestV3\n   */\n  eddsaSignature: string;\n  /**\n   * An arbitrary, client-set unique order identifier, max length is 120 bytes\n   * @type {string}\n   * @memberof SubmitOrderRequestV3\n   */\n  clientOrderId?: string;\n  /**\n   * Order types, can be AMM, LIMIT_ORDER, MAKER_ONLY, TAKER_ONLY\n   * @type {string}\n   * @memberof SubmitOrderRequestV3\n   */\n  orderType?: OrderType;\n  /**\n   * Used by the P2P order which user specify the taker, so far its 0x0000000000000000000000000000000000000000\n   * @type {string}\n   * @memberof SubmitOrderRequestV3\n   */\n\n  tradeChannel?: TradeChannel;\n\n  taker?: string;\n  /**\n   * The AMM pool address if order type is AMM\n   * @type {string}\n   * @memberof SubmitOrderRequestV3\n   */\n  poolAddress?: string;\n  /**\n   * Aux data to mark the order source\n   * @type {string}\n   * @memberof SubmitOrderRequestV3\n   */\n  channelId?: string;\n}\n\n/**\n * Submit internal transfer params\n * @export\n * @interface OriginTransferRequestV3\n */\nexport interface OriginTransferRequestV3 {\n  /**\n   * exchange address\n   * @type {string}\n   * @memberof OriginTransferRequestV3\n   */\n  exchange: string;\n  /**\n   * payer account ID\n   * @type {number}\n   * @memberof OriginTransferRequestV3\n   */\n  payerId: number;\n  /**\n   * payer account address\n   * @type {string}\n   * @memberof OriginTransferRequestV3\n   */\n  payerAddr: string;\n  /**\n   * payee account ID\n   * @type {number}\n   * @memberof OriginTransferRequestV3\n   */\n  payeeId: number;\n  /**\n   * payee account address\n   * @type {string}\n   * @memberof OriginTransferRequestV3\n   */\n  payeeAddr: string;\n  /**\n   *\n   * @type {TokenVolumeV3}\n   * @memberof OriginTransferRequestV3\n   */\n  token: TokenVolumeV3;\n  /**\n   *\n   * @type {TokenVolumeV3}\n   * @memberof OriginTransferRequestV3\n   */\n  maxFee: TokenVolumeV3;\n  /**\n   * offchain Id\n   * @type {number}\n   * @memberof OriginTransferRequestV3\n   */\n  storageId: number;\n  /**\n   * Timestamp for order to become invalid\n   * @type {number}\n   * @memberof OriginTransferRequestV3\n   */\n  validUntil: number;\n  /**\n   * eddsa signature\n   * @type {string}\n   * @memberof OriginTransferRequestV3\n   */\n  eddsaSignature?: string;\n  /**\n   * ecdsa signature\n   * @type {string}\n   * @memberof OriginTransferRequestV3\n   */\n  ecdsaSignature?: string;\n  /**\n   * An approved hash string which was already submitted on eth mainnet\n   * @type {string}\n   * @memberof OriginTransferRequestV3\n   */\n  hashApproved?: string;\n  /**\n   * transfer memo\n   * @type {string}\n   * @memberof OriginTransferRequestV3\n   */\n  memo?: string;\n  /**\n   * A user-defined id\n   * @type {string}\n   * @memberof OriginTransferRequestV3\n   */\n  clientId?: string;\n\n  /**\n   * CounterFactualInfo\n   * @type {CounterFactualInfo}\n   * @memberof OriginTransferRequestV3\n   */\n  counterFactualInfo?: CounterFactualInfo;\n\n  /**\n   * If true, let the sender transferring to the receiver pay the receiver's account activation fee\n   * @type {boolean}\n   * @memberof OriginTransferRequestV3\n   */\n  payPayeeUpdateAccount?: boolean;\n}\n\n/**\n * Submit Forces Withdrawals params\n * @export\n * @interface OriginForcesWithdrawalsV3\n */\nexport interface OriginForcesWithdrawalsV3 {\n  /**\n   * requesterAddress account address\n   * @type {string}\n   * @memberof OriginForcesWithdrawalsV3\n   */\n  requesterAddress: string;\n  /**\n   * requester withdrawls tokenId\n   * @type {number}\n   * @memberof OriginForcesWithdrawalsV3\n   */\n  tokenId: number;\n  /**\n   * withdrawAddress account address\n   * @type {string}\n   * @memberof OriginForcesWithdrawalsV3\n   */\n  withdrawAddress: string;\n  /**\n   * Transfer Request\n   * @type {OriginTransferRequestV3}\n   * @memberof OriginForcesWithdrawalsV3\n   */\n  transfer: Omit<OriginTransferRequestV3, \"payeeId\" | \"maxFee\" | \"memo\"> & {\n    payeeId?: 0;\n    memo?: string;\n    maxFee?: {\n      volume: \"0\";\n      tokenId: number | string;\n    };\n  };\n}\n\n/**\n * Submit Deploy NFTAction params\n * @export\n * @interface OriginDeployNFTRequestV3\n */\nexport interface OriginDeployNFTRequestV3 {\n  /**\n   * Transfer\n   * @type {OriginTransferRequestV3}\n   * @memberof OriginDeployNFTRequestV3\n   */\n  transfer: Omit<OriginTransferRequestV3, \"payeeId\" | \"maxFee\" | \"memo\"> & {\n    payeeId?: 0;\n    memo?: string;\n    maxFee?: {\n      volume: \"0\";\n      tokenId: number | string;\n    };\n  };\n  /**\n   * nftData\n   * @type {string}\n   * @memberof OriginDeployNFTRequestV3\n   */\n  nftData: string;\n  /**\n   * NFTAction address\n   * @type {string}\n   * @memberof OriginDeployNFTRequestV3\n   */\n  tokenAddress: string;\n  counterFactualInfo?: CounterFactualInfo;\n}\n\nexport interface OriginDeployCollectionRequestV3 {\n  /**\n   * Transfer\n   * @type {OriginTransferRequestV3}\n   * @memberof OriginDeployNFTRequestV3\n   */\n  transfer: Omit<OriginTransferRequestV3, \"payeeId\" | \"maxFee\" | \"memo\"> & {\n    payeeId?: 0;\n    memo?: string;\n    maxFee?: {\n      volume: \"0\";\n      tokenId: number | string;\n    };\n  };\n  /**\n   * nftOwner\n   * @type {string}\n   * @memberof OriginDeployCollectionRequestV3\n   */\n  nftOwner: string;\n  /**\n   * nftBaseUri\n   * @type {string}\n   * @memberof OriginDeployCollectionRequestV3\n   */\n  nftBaseUri: string;\n  /**\n   * nftFactory\n   * @type {string}\n   * @memberof OriginDeployCollectionRequestV3\n   */\n  nftFactory: string;\n  /**\n   * tokenAddress\n   * @type {string}\n   * @memberof OriginDeployCollectionRequestV3\n   */\n  tokenAddress: string;\n  counterFactualInfo?: CounterFactualInfo;\n}\n\n/**\n * Submit internal transfer params\n * @export\n * @interface OriginNFTTransferRequestV3\n */\nexport interface OriginNFTTransferRequestV3 {\n  /**\n   * exchange address\n   * @type {string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  exchange: string;\n  /**\n   * fromAccountId\n   * @type {number}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  fromAccountId: number;\n  /**\n   * payer account address\n   * @type {string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  fromAddress: string;\n  /**\n   * to account ID\n   * @type {number}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  toAccountId: number;\n  /**\n   * toAddress address\n   * @type {string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  toAddress: string;\n  /**\n   *\n   * @type {TokenVolumeNFT}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  token: TokenVolumeNFT;\n  /**\n   *\n   * @type { Pick<TokenVolumeV3,'tokenId'> & {amount:string}}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  maxFee: Pick<TokenVolumeV3, \"tokenId\"> & { amount: string };\n  /**\n   * offchain Id\n   * @type {number}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  storageId: number;\n  /**\n   * Timestamp for order to become invalid\n   * @type {number}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  validUntil: number;\n  /**\n   * eddsa signature\n   * @type {string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  eddsaSignature?: string;\n  /**\n   * ecdsa signature\n   * @type {string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  ecdsaSignature?: string;\n  /**\n   * An approved hash string which was already submitted on eth mainnet\n   * @type {string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  hashApproved?: string;\n  /**\n   * transfer memo\n   * @type {string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  memo?: string;\n  /**\n   * A user-defined id\n   * @type {string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  clientId?: string;\n\n  /**\n   * CounterFactualInfo\n   * @type {CounterFactualInfo}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  counterFactualInfo?: CounterFactualInfo;\n\n  /**\n   * If true, let the sender transferring to the receiver pay the receiver's account activation fee\n   * @type {boolean}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  payPayeeUpdateAccount?: boolean;\n}\n\n/**\n *\n * @export\n * @interface NFTWithdrawRequestV3\n */\nexport interface NFTWithdrawRequestV3 {\n  /**\n   * exchange address\n   * @type {string}\n   * @memberof OriginNFTWithdrawRequestV3\n   */\n  exchange: string;\n  /**\n   * account ID\n   * @type {number}\n   * @memberof OriginNFTWithdrawRequestV3\n   */\n  accountId: number;\n  /**\n   * account owner address\n   * @type {string}\n   * @memberof OriginNFTWithdrawRequestV3\n   */\n  owner: string;\n  /**\n   *\n   * @type {TokenVolumeNFT}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  token: TokenVolumeNFT;\n  /**\n   *\n   * @type {Pick<TokenVolumeV3,'tokenId'> & {amount:string}};\n   * @memberof OriginNFTTransferRequestV3\n   */\n  maxFee: Pick<TokenVolumeV3, \"tokenId\"> & { amount: string };\n  /**\n   * offchain ID\n   * @type {number}\n   * @memberof OriginNFTWithdrawRequestV3\n   */\n  storageId: number;\n  /**\n   * Timestamp for order to become invalid\n   * @type {number}\n   * @memberof OriginNFTWithdrawRequestV3\n   */\n  validUntil: number;\n  /**\n   * min gas for on-chain withdraw, Loopring exchange allocates gas for each distribution, but people can also assign this min gas, so Loopring have to allocate higher gas value for this specific distribution. Normally no need to take care of this value, 0 means let loopring choose the reasonable gas\n   * @type {number}\n   * @memberof OriginNFTWithdrawRequestV3\n   */\n  minGas: number;\n  /**\n   * withdraw to address\n   * @type {string}\n   * @memberof OriginNFTWithdrawRequestV3\n   */\n  to: string;\n  /**\n   * extra data for complex withdraw mode, normally none\n   * @type {string}\n   * @memberof OriginNFTWithdrawRequestV3\n   */\n  extraData?: string;\n  // /**\n  //  * is fast withdraw mode\n  //  * @type {boolean}\n  //  * @memberof OriginNFTWithdrawRequestV3\n  //  */\n  // fastWithdrawalMode?: boolean;\n  /**\n   * eddsa signature\n   * @type {string}\n   * @memberof OriginNFTWithdrawRequestV3\n   */\n  eddsaSignature?: string;\n  /**\n   * ecdsa signature\n   * @type {string}\n   * @memberof OriginNFTWithdrawRequestV3\n   */\n  ecdsaSignature?: string;\n  /**\n   * An approved hash string which was already submitted on eth mainnet\n   * @type {string}\n   * @memberof OriginNFTWithdrawRequestV3\n   */\n  hashApproved?: string;\n  counterFactualInfo?: CounterFactualInfo;\n}\n\n/**\n *\n * @export\n * @interface NFTMintRequestV3\n */\nexport interface NFTMintRequestV3 {\n  /**\n   * exchange address\n   * @type {string}\n   * @memberof OriginNFTMintRequestV3\n   */\n  exchange: string;\n  /**\n   * account ID\n   * @type {number}\n   * @memberof OriginNFTMintRequestV3\n   */\n  minterId: number;\n  /**\n   * account owner address\n   * @type {string}\n   * @memberof OriginNFTMintRequestV3\n   */\n  minterAddress: string;\n  /**\n   * The account receive the minted NFTAction token, now should be minter himself.\n   * @type {number}\n   * @memberof OriginNFTMintRequestV3\n   */\n  toAccountId: number;\n  /**\n   * The account receive the minted NFTAction token, now should be minter himself.\n   * @type {string}\n   * @memberof OriginNFTMintRequestV3\n   */\n  toAddress?: string;\n  /**\n   * nftType: 0 for EIP1155, 1 for EIP712. EIP1155 by default.\n   * @type {number}\n   * @memberof OriginNFTMintRequestV3\n   */\n  nftType: 0 | 1;\n  /**\n   * Contract address\n   * @type{string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  tokenAddress: string;\n  /**\n   * NFT_ID url_id\n   * @type {string}   toString(16)\n   * @memberof OriginNFTTransferRequestV3\n   */\n  nftId: string;\n  /**\n   * The amount of the token\n   * @type {string}\n   * @memberof TokenVolumeV3\n   */\n  amount: string;\n\n  /**\n   * Timestamp for order to become invalid\n   * @type {number}\n   * @memberof OriginNFTMintRequestV3\n   */\n  validUntil: number;\n  /**\n   * offchain ID\n   * @type {number}\n   * @memberof OriginNFTMintRequestV3\n   */\n  storageId: number;\n  /**\n   *\n   * @type { Pick<TokenVolumeV3,'tokenId'> & {amount:string}}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  maxFee: Pick<TokenVolumeV3, \"tokenId\"> & { amount: string };\n  /**\n   * 0-50\n   * @type number\n   * @memberof OriginNFTMintRequestV3\n   */\n  royaltyPercentage: number;\n  /**\n   * force to mint, regardless the previous mint record\n   * @type {boolean}\n   * @memberof OriginNFTMintRequestV3\n   */\n  forceToMint?: boolean;\n  /**\n   * eddsa signature\n   * @type {string}\n   * @memberof OriginNFTMintRequestV3\n   */\n  eddsaSignature?: string;\n  /**\n   * ecdsa signature\n   * @type {string}\n   * @memberof OriginNFTMintRequestV3\n   */\n  ecdsaSignature?: string;\n  /**\n   * An approved hash string which was already submitted on eth mainnet\n   * @type {string}\n   * @memberof OriginNFTMintRequestV3\n   */\n  hashApproved?: string;\n  counterFactualNftInfo?: NFTCounterFactualInfo | null;\n  counterFactualInfo?: CounterFactualInfo;\n}\n\n// /**\n//  *\n//  * @export\n//  * @interface NFTCollectionCreateRequestV3\n//  */\n// export interface NFTollectionCreateRequestV3 {\n//   /**\n//    * exchange address\n//    * @type {string}\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   exchange: string;\n//   /**\n//    * account ID\n//    * @type {number}\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   minterId: number;\n//   /**\n//    * account owner address\n//    * @type {string}\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   minterAddress: string;\n//   /**\n//    * The account receive the minted NFTAction token, now should be minter himself.\n//    * @type {number}\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   toAccountId: number;\n//   /**\n//    * The account receive the minted NFTAction token, now should be minter himself.\n//    * @type {string}\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   toAddress?: string;\n//   /**\n//    * nftType: 0 for EIP1155, 1 for EIP712. EIP1155 by default.\n//    * @type {number}\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   nftType: 0 | 1;\n//   /**\n//    * Contract address\n//    * @type{string}\n//    * @memberof OriginNFTTransferRequestV3\n//    */\n//   tokenAddress: string;\n//   /**\n//    * NFT_ID url_id\n//    * @type {string}   toString(16)\n//    * @memberof OriginNFTTransferRequestV3\n//    */\n//   nftId: string;\n//   /**\n//    * The amount of the token\n//    * @type {string}\n//    * @memberof TokenVolumeV3\n//    */\n//   amount: string;\n//\n//   /**\n//    * Timestamp for order to become invalid\n//    * @type {number}\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   validUntil: number;\n//   /**\n//    * offchain ID\n//    * @type {number}\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   storageId: number;\n//   /**\n//    *\n//    * @type { Pick<TokenVolumeV3,'tokenId'> & {amount:string}}\n//    * @memberof OriginNFTTransferRequestV3\n//    */\n//   maxFee: Pick<TokenVolumeV3, \"tokenId\"> & { amount: string };\n//   /**\n//    * 0-50\n//    * @type number\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   royaltyPercentage: number;\n//   /**\n//    * force to mint, regardless the previous mint record\n//    * @type {boolean}\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   forceToMint?: boolean;\n//   /**\n//    * eddsa signature\n//    * @type {string}\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   eddsaSignature?: string;\n//   /**\n//    * ecdsa signature\n//    * @type {string}\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   ecdsaSignature?: string;\n//   /**\n//    * An approved hash string which was already submitted on eth mainnet\n//    * @type {string}\n//    * @memberof OriginNFTMintRequestV3\n//    */\n//   hashApproved?: string;\n//   counterFactualNftInfo?: NFTCounterFactualInfo | null;\n//   counterFactualInfo?: CounterFactualInfo;\n// }\n\n/**\n *\n * @export\n * @interface NFTOrderRequestV3\n */\nexport type NFTOrderRequestV3 = {\n  /**\n   * exchange address\n   * @type {string}\n   * @memberof NFTOrderRequestV3\n   */\n  exchange: string;\n  /**\n   * account ID\n   * @type {number}\n   * @memberof NFTOrderRequestV3\n   */\n  accountId: number;\n  /**\n   * storage ID\n   * @type {number}\n   * @memberof NFTOrderRequestV3\n   */\n  storageId: number;\n\n  /**\n   *\n   * @type {boolean}\n   * @memberof NFTOrderRequestV3\n   */\n  allOrNone: boolean;\n  /**\n   *\n   * @type {boolean}\n   * @memberof NFTOrderRequestV3\n   */\n  fillAmountBOrS: boolean;\n  /**\n   * Timestamp for order to become invalid\n   * @type {number}\n   * @memberof NFTOrderRequestV3\n   */\n  validUntil: number;\n  /**\n   * max fee bips.\n   * @type {number | 0}\n   * @memberof NFTOrderRequestV3\n   */\n  maxFeeBips?: number | 0;\n  /**\n   * eddsa signature.\n   * @type {string}\n   * @memberof NFTOrderRequestV3\n   */\n  eddsaSignature?: string;\n  /**\n   * client order id.\n   * @type {string}\n   * @memberof NFTOrderRequestV3\n   */\n  clientOrderId?: string;\n  /**\n   * order type\n   * @type{string}\n   * @memberof NFTOrderRequestV3\n   */\n  orderType?: string;\n  /**\n   * trade channel\n   * @type {string}\n   * @memberof NFTOrderRequestV3\n   */\n  tradeChannel?: string;\n  /**\n   * taker address\n   * @type {string}\n   * @memberof NFTOrderRequestV3\n   */\n  taker?: string;\n  /**\n   * affiliate account id\n   * @type {string}\n   * @memberof NFTOrderRequestV3\n   */\n  affiliate?: string;\n} & XOR<\n  {\n    /**\n     * sell token info\n     * @type {NFTTokenAmountInfo}\n     * @memberof NFTOrderRequestV3\n     */\n    sellToken: NFTTokenAmountInfo;\n    /**\n     * buy token info\n     * @type {TokenVolumeV5}\n     * @memberof NFTOrderRequestV3\n     */\n    buyToken: TokenVolumeV5;\n  },\n  {\n    /**\n     * sell token info\n     * @type {TokenVolumeV5}\n     * @memberof NFTOrderRequestV3\n     */\n    sellToken: TokenVolumeV5;\n    /**\n     * buy token info\n     * @type {NFTTokenAmountInfo}\n     * @memberof NFTOrderRequestV3\n     */\n    buyToken: NFTTokenAmountInfo;\n  }\n>;\n\n/**\n *\n * @export\n * @interface NFTTradeRequestV3\n */\nexport interface NFTTradeRequestV3 {\n  /**\n   * maker order\n   * @type {NFTOrderRequestV3}\n   * @memberof NFTTradeRequestV3\n   */\n  maker: NFTOrderRequestV3;\n  /**\n   * maker fee bips\n   * @type {number}\n   * @memberof NFTOrderRequestV3\n   */\n  makerFeeBips: number;\n  /**\n   * taker order\n   * @type {NFTOrderRequestV3}\n   * @memberof NFTTradeRequestV3\n   */\n  taker: NFTOrderRequestV3;\n  /**\n   * taker fee bips\n   * @type {number}\n   * @memberof NFTTradeRequestV3\n   */\n  takerFeeBips: number;\n}\n\n/**\n *\n * @export\n * @interface OffChainWithdrawalRequestV3\n */\nexport interface OffChainWithdrawalRequestV3 {\n  /**\n   * exchange address\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  exchange: string;\n  /**\n   * account ID\n   * @type {number}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  accountId: number;\n  /**\n   * account owner address\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  owner: string;\n  /**\n   *\n   * @type {TokenVolumeV3}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  token: TokenVolumeV3;\n  /**\n   *\n   * @type {TokenVolumeV3}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  maxFee: TokenVolumeV3;\n  /**\n   * offchain ID\n   * @type {number}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  storageId: number;\n  /**\n   * Timestamp for order to become invalid\n   * @type {number}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  validUntil: number;\n  /**\n   * min gas for on-chain withdraw, Loopring exchange allocates gas for each distribution, but people can also assign this min gas, so Loopring have to allocate higher gas value for this specific distribution. Normally no need to take care of this value, 0 means let loopring choose the reasonable gas\n   * @type {number}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  minGas: number;\n  /**\n   * withdraw to address\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  to: string;\n  /**\n   * extra data for complex withdraw mode, normally none\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  extraData?: string;\n  /**\n   * is fast withdraw mode\n   * @type {boolean}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  fastWithdrawalMode?: boolean;\n  /**\n   * eddsa signature\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  eddsaSignature?: string;\n  /**\n   * ecdsa signature\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  ecdsaSignature?: string;\n  /**\n   * An approved hash string which was already submitted on eth mainnet\n   * @type {string}\n   * @memberof OffChainWithdrawalRequestV3\n   */\n  hashApproved?: string;\n}\n\n/**\n * Describes the users public key which is a point of the selected eclipse curve.\n * @export\n * @interface PublicKey\n */\nexport interface PublicKey {\n  /**\n   * The public keys x part.\n   * @type {string}\n   * @memberof PublicKey\n   */\n  x: string;\n  /**\n   * The public keys y part.\n   * @type {string}\n   * @memberof PublicKey\n   */\n  y: string;\n}\n\nexport interface UpdateAccountRequestV3 {\n  /**\n   * exchange address\n   * @type {string}\n   * @memberof UpdateAccountRequestV3\n   */\n  exchange: string;\n  /**\n   * owner address\n   * @type {string}\n   * @memberof UpdateAccountRequestV3\n   */\n  owner: string;\n  /**\n   * user account ID\n   * @type {number}\n   * @memberof UpdateAccountRequestV3\n   */\n  accountId: number;\n  /**\n   *\n   * @type {PublicKey}\n   * @memberof UpdateAccountRequestV3\n   */\n  publicKey: PublicKey;\n  /**\n   *\n   * @type {TokenVolumeV3}\n   * @memberof UpdateAccountRequestV3\n   */\n  maxFee: TokenVolumeV3;\n  /**\n   * Timestamp for order to become invalid\n   * @type {number}\n   * @memberof UpdateAccountRequestV3\n   */\n  validUntil: number;\n  /**\n   * Nonce of users exchange account that used in off-chain requests.\n   * @type {number}\n   * @memberof UpdateAccountRequestV3\n   */\n  nonce: number;\n  /**\n   * eddsa signature of this request\n   * @type {string}\n   * @memberof UpdateAccountRequestV3\n   */\n  eddsaSignature?: string;\n  /**\n   * ecdsa signature of this request\n   * @type {string}\n   * @memberof UpdateAccountRequestV3\n   */\n  ecdsaSignature?: string;\n  /**\n   * An approved hash string which was submitted on eth mainnet\n   * @type {string}\n   * @memberof UpdateAccountRequestV3\n   */\n  hashApproved?: string;\n\n  keySeed?: string;\n  counterFactualInfo?: CounterFactualInfo;\n}\n\nexport interface OffChainWithdrawalRequestV3WithPatch {\n  request: OffChainWithdrawalRequestV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\nexport interface OriginTransferRequestV3WithPatch {\n  request: OriginTransferRequestV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\nexport interface OriginForcesWithdrawalsRequestV3WithPatch {\n  request: OriginForcesWithdrawalsV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\nexport interface OriginDeployNFTRequestV3WithPatch {\n  request: OriginDeployNFTRequestV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\nexport interface OriginDeployCollectionRequestV3WithPatch {\n  request: OriginDeployCollectionRequestV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\nexport interface OriginNFTTransferRequestV3WithPatch {\n  request: OriginNFTTransferRequestV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\nexport interface OriginNFTWithdrawRequestV3WithPatch {\n  request: NFTWithdrawRequestV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\nexport interface OriginNFTMINTRequestV3WithPatch {\n  request: NFTMintRequestV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\nexport interface OriginNFTCreateCollectionRequestV3WithPatch {\n  // request: NFTMintRequestV3;\n  // web3: Web3;\n  // chainId: ChainId;\n  // walletType: ConnectorNames;\n  // eddsaKey: string;\n  // apiKey: string;\n  // isHWAddr?: boolean;\n}\n\nexport interface OriginNFTValidateOrderRequestV3WithPatch {\n  request: NFTOrderRequestV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\nexport interface OriginNFTTradeRequestV3WithPatch {\n  request: NFTTradeRequestV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\nexport interface UpdateAccountRequestV3WithPatch {\n  request: UpdateAccountRequestV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  isHWAddr?: boolean;\n}\n\nexport interface GetAccountServicesRequest {\n  phone?: string;\n  email?: string;\n  wallet?: string;\n}\n\n// NFTAction\n\nexport interface GetUserNFTBalancesRequest {\n  accountId: number;\n  nftDatas?: string;\n  tokenAddrs?: string;\n  tokenIds?: string;\n  offset?: number;\n  limit?: number;\n  nonZero?: boolean;\n  metadata?: boolean;\n}\n\nexport interface GetUserNFTBalancesByCollectionRequest {\n  accountId: number;\n  tokenAddress: string;\n  collectionId: number;\n  offset?: number;\n  limit?: number;\n  nonZero?: boolean;\n  metadata?: boolean;\n  favourite?: boolean;\n  hidden?: boolean;\n}\n\nexport enum LegacyNFT {\n  inside = \"inside\",\n  outside = \"outside\",\n  undecided = \"undecided\",\n}\nexport interface GetUserNFTLegacyBalanceRequest {\n  accountId: number;\n  tokenAddress: string;\n  collectionId: number;\n  filter?: LegacyNFT;\n  offset?: number;\n  limit?: number;\n  metadata?: boolean;\n}\n\nexport enum DEPLOYMENT_STATUS {\n  NOT_DEPLOYED = \"NOT_DEPLOYED\",\n  DEPLOY_FAILED = \"DEPLOY_FAILED\",\n  DEPLOYING = \"DEPLOYING\",\n  DEPLOYED = \"DEPLOYED\",\n}\n\nexport enum NFT_IMAGE_SIZES {\n  small = \"240-240\",\n  large = \"332-332\",\n  original = \"original\",\n}\n\nexport type IPFS_METADATA = {\n  uri: string;\n  base: {\n    name: string;\n    decimals: number;\n    description: string;\n    image: string;\n    properties: string;\n    localization: string;\n  };\n\n  imageSize: { [P in NFT_IMAGE_SIZES]?: string };\n  extra: {\n    imageData: string;\n    externalUrl: string;\n    attributes: string;\n    backgroundColor: string;\n    animationUrl: string;\n    youtubeUrl: string;\n    minter: string;\n  };\n  nftId?: string;\n  nftType: NFTType;\n  network: 0;\n  tokenAddress: string;\n  tokenId: string;\n};\n\nexport interface UserNFTBalanceInfo<I = NFT_IMAGE_SIZES> extends NFTTokenInfo {\n  accountId: number;\n  tokenId: number;\n  total?: string;\n  locked?: string;\n  pending: {\n    withdraw: string;\n    deposit: string;\n  };\n  preference: {\n    favourite: boolean;\n    hide: boolean;\n  };\n  collectionInfo: CollectionMeta;\n  metadata?: IPFS_METADATA;\n  deploymentStatus: DEPLOYMENT_STATUS;\n  isCounterFactualNFT: boolean;\n}\n\nexport interface GetUserVIPInfoRequest {\n  userAddress: string;\n}\n\nexport interface getUserVIPAssetsRequest {\n  address: string;\n  currency?: string;\n  assetTypes?: string;\n  token?: string;\n  limit?: number;\n}\n\nexport type NftData = string;\n\nexport interface NFTTokenInfo {\n  nftData: string;\n  minter: string;\n  nftType: string;\n  tokenAddress: string;\n  nftId: string;\n  status: boolean;\n}\n\nexport interface NFTTokenAmountInfo {\n  tokenId: number;\n  nftData?: string;\n  amount: string;\n}\n\nexport type GetUserNFTTransferHistoryRequest = {\n  accountId: number;\n  nftData?: string;\n  start?: number;\n  end?: number;\n  hashes?: string;\n  txStatus?: string;\n  limit?: number;\n  // offset?: number\n  // transferTypes?: string // transfer, transfer_red\n};\n\nexport type GetUserNFTMintHistoryRequest = {\n  accountId: number;\n  nftData?: string;\n  start?: number;\n  startId?: number;\n  end?: number;\n  hashes?: string;\n  txStatus?: string;\n  limit?: number;\n  // offset?: number\n  // transferTypes?: string // transfer, transfer_red\n};\n\nexport type GetUserNFTDepositHistoryRequest = {\n  accountId: number;\n  nftData?: string;\n  start?: number;\n  end?: number;\n  startId?: number;\n  hashes?: string;\n  txStatus?: string;\n  limit?: number;\n};\n\nexport type GetUserNFTWithdrawalHistoryRequest = {\n  accountId: number;\n  nftData?: string;\n  start?: number;\n  end?: number;\n  startId?: number;\n  hashes?: string;\n  txStatus?: string;\n  limit?: number;\n};\n\nexport interface UserNFTDepositHistoryTx {\n  id: number;\n  requestId: number;\n  nftData: string;\n  amount: string;\n  hash: string;\n  txHash: string;\n  accountId: number;\n  owner: string;\n  status: TxStatus;\n  progress: string;\n  timestamp: number;\n  blockId: number;\n  indexInBlock: number;\n  createdAt: number;\n  updatedAt: number;\n  feeTokenSymbol: string;\n  feeAmount: string;\n  memo?: string;\n  depositFrom: string;\n  depositFromAccountId: string;\n}\n\nexport interface UserNFTWithdrawalHistoryTx {\n  id: number;\n  requestId: number;\n  hash: string;\n  txHash: string;\n  accountId: number;\n  owner: string;\n  status: string;\n  nftData?: string;\n  amount?: string;\n  feeTokenSymbol?: string;\n  feeAmount: string;\n  createdAt: number;\n  updatedAt: number;\n  memo?: string;\n  recipient: string;\n  distributeHash: string;\n  fastWithdrawStatus: string;\n  isFast: false;\n  blockIdInfo: {\n    blockId: number;\n    indexInBlock: number;\n  };\n  storageInfo: {\n    accountId: number;\n    tokenId: number;\n    storageId: number;\n  };\n}\n\nexport interface UserNFTTransferHistoryTx {\n  id: string;\n  requestId: number;\n  hash: string;\n  txHash: string;\n  accountId: number;\n  owner: string;\n  status: string;\n  nftData: string;\n  amount: string;\n  feeTokenSymbol: string;\n  feeAmount: string;\n  createdAt: number;\n  updatedAt: number;\n  memo: string;\n  payeeId: number;\n  payeeAddress: string;\n  blockIdInfo: {\n    blockId: number;\n    indexInBlock: number;\n  };\n  storageInfo: {\n    accountId: number;\n    tokenId: number;\n    storageId: number;\n  };\n}\n\nexport type UserNFTMintHistoryTx = {\n  id: string;\n  requestId: number;\n  hash: string;\n  txHash: string;\n  accountId: number;\n  owner: string;\n  status: string;\n  nftData: string;\n  amount: string;\n  feeTokenSymbol: string;\n  feeAmount: string;\n  createdAt: number;\n  updatedAt: number;\n  memo: string;\n  minterId: number;\n  minterAddress: string;\n  blockIdInfo: {\n    blockId: number;\n    indexInBlock: number;\n  };\n  storageInfo: {\n    accountId: number;\n    tokenId: number;\n    storageId: number;\n  };\n};\n\nexport interface UserNFTTxsHistory {\n  id: string;\n  requestId: number;\n  hash: string;\n  txHash: string;\n  accountId: number;\n  owner: string;\n  nftData: string;\n  amount: string;\n  feeTokenSymbol: string;\n  feeAmount: string;\n  createdAt: number;\n  updatedAt: number;\n  memo: string;\n  payeeId: number;\n  payeeAddress: string;\n  nftTxType: string;\n  symbol: string;\n  receiver: number;\n  status: TxStatus;\n  progress: string;\n  timestamp: number;\n  blockNum: number;\n  distributeHash: string;\n  receiverAddress: string;\n  senderAddress: string;\n  fastStatus: string;\n  recipient: string;\n  minterInfo: { accountId: number; minter: string; originalMinter: string };\n  nftStatusInfo: {};\n  withdrawalInfo: {\n    distributeHash: string;\n    fastStatus: boolean;\n    recipient: string;\n  };\n  metadata?: IPFS_METADATA;\n  storageInfo: {\n    accountId: number;\n    tokenId: number;\n    storageId: number;\n  };\n}\n\nexport declare type NFTOrderInfo = {\n  orderHash: string;\n  accountId: number;\n  feeAmount: string;\n  storageId: number;\n  address: string;\n};\n\nexport interface UserNFTTradeHistory {\n  fillId: number;\n  nftHash: string;\n  feeTokenId: number;\n  price: string;\n  nftAmount: string;\n  feeAmount: string;\n  feeTokenSymbol: string;\n  createdAt: number;\n  hash: string;\n  blockId: number;\n  indexInBlock: number;\n  tokenId: number;\n  counter: number;\n  tokenAddress: number;\n  sInfo: NFTOrderInfo;\n  bInfo: NFTOrderInfo;\n  metadata: IPFS_METADATA;\n}\n\nexport type Protector = {\n  ens: string;\n  address: string;\n  lockStatus: HEBAO_LOCK_STATUS;\n};\nexport type HebaoOperationLog = {\n  createdAt: number;\n  ens: string;\n  from: string;\n  hebaoTxType: HEBAO_META_TYPE;\n  id: number;\n  status: 0 | 1;\n  to: string;\n};\n\nexport type Guardian = {\n  ens: string;\n  address: string;\n  type: keyof typeof HEBAO_META_TYPE;\n  id: string;\n  messageHash: string;\n  businessDataJson: any;\n  signedRequest: any;\n  createAt: number;\n};\n\n/**\n *\n * @export\n * @interface ApproveHebaoRequest\n */\nexport type GuardiaContractAddress = string;\n\nexport interface ApproveHebaoRequestV3WithPatch {\n  request: Guardian & { code: string };\n  web3: Web3;\n  address: string;\n  chainId: ChainId;\n  guardiaContractAddress: GuardiaContractAddress;\n  walletType?: ConnectorNames;\n}\n\nexport interface RejectHebaoRequestV3WithPatch {\n  request: { approveRecordId: string; signer: string; network?: NetworkWallet };\n  web3: Web3;\n  address: string;\n  chainId: ChainId;\n  guardiaContractAddress: GuardiaContractAddress;\n  walletType?: ConnectorNames;\n}\n\nexport interface LockHebaoHebaoParam {\n  web3: Web3;\n  from: string;\n  wallet: string;\n  value?: string | number;\n  contractAddress: string;\n  gasPrice: number;\n  gasLimit: number;\n  chainId?: ChainId;\n  nonce: number;\n  isVersion1: boolean;\n  sendByMetaMask?: boolean;\n}\n\nexport interface HebaoOperationLogs {\n  from: string;\n  fromTime: number;\n  to?: string;\n  offset?: number;\n  statues?: string;\n  hebaoTxType?: string;\n  limit?: number;\n  network?: NetworkWallet;\n}\n\nexport interface WalletType {\n  isInCounterFactualStatus: boolean;\n  isContract: boolean;\n  loopringWalletContractVersion: string;\n}\n\nexport interface ContractType {\n  network: string;\n  contractVersion: string; //V1_x_x\"|V2_x_x\n  masterCopy?: string; // V2 only\n  walletFactory?: string; // V2 only\n  ens?: string;\n  walletStatus: number;\n  queueStatus: number;\n  walletType: number; // HEBAO = 0; EOA = 1;\n  isCounterFactual: boolean; //isCounterFactual\n}\n\nexport interface ModuleType {\n  moduleName: string; // FORWARDER_MODULE\n  moduleAddress: string;\n}\n\n/**\n * DefiOrderRequest\n */\nexport interface DefiOrderRequest {\n  /**\n   * exchange address\n   * @type {string}\n   * @memberof DefiOrderRequest\n   */\n  exchange: string;\n  /**\n   * storageId\n   * @type {number}\n   * @memberof DefiOrderRequest\n   */\n  storageId: number;\n  /**\n   * accountId\n   * @type {number}\n   * @memberof DefiOrderRequest\n   */\n  accountId: number;\n  /**\n   * sellToken\n   * @type TokenVolumeV3\n   * @memberof DefiOrderRequest\n   */\n  sellToken: TokenVolumeV3;\n  /**\n   * buyToken\n   * @type TokenVolumeV3\n   * @memberof DefiOrderRequest\n   */\n  buyToken: TokenVolumeV3;\n  /**\n   * Timestamp for order become invalid\n   * @type {number}\n   * @memberof DefiOrderRequest\n   */\n  validUntil: number;\n  /**\n   * fee\n   * @type {string}\n   * @memberof DefiOrderRequest\n   */\n  fee: string;\n  /**\n   * Maximum order fee that the user can accept, value range (in ten thousandths) 1 ~ 63\n   * @type {number}\n   * @memberof DefiOrderRequest\n   */\n  maxFeeBips: number;\n  /**\n   * fillAmountBOrS\n   * @type boolean\n   * @memberof DefiOrderRequest\n   */\n  fillAmountBOrS: boolean;\n  /**\n   * taker address\n   * @type {string}\n   * @memberof DefiOrderRequest\n   */\n  taker?: string;\n  /**\n   * The orders EdDSA signature. The signature is a hexadecimal string obtained by signing the order itself and concatenating the resulting signature parts (Rx, Ry, and S). Used to authenticate and authorize the operation.\n   * @type {string}\n   * @memberof DefiOrderRequest\n   */\n  eddsaSignature?: string;\n  /**\n   * type\n   * @type {string}\n   * @memberof DefiOrderRequest\n   */\n  type: string;\n  /**\n   * action\n   * @type {string}\n   * @memberof DefiOrderRequest\n   */\n  action: string;\n}\n\nexport interface DefiResult {\n  hash: string;\n  clientOrderId: string;\n  status: TxStatus;\n  isIdempotent: boolean;\n}\n\nexport const SEP = \",\";\n\nexport enum DefiAction {\n  Deposit = \"deposit\",\n  Withdraw = \"withdraw\",\n}\n\nexport interface UserDefiTxsHistory {\n  id: string;\n  txType: string;\n  action: DefiAction;\n  hash: string;\n  market: string;\n  sellToken: TokenVolumeV3;\n  buyToken: TokenVolumeV3;\n  fee: TokenVolumeV3;\n  status: TxStatus;\n  updatedAt: number;\n  storageInfo: {\n    accountId: number;\n    tokenId: number;\n    storageId: number;\n  };\n}\n\nexport interface GetDefiMarketRequest {\n  defiType?: string;\n}\n\nexport interface GetUserDefiRewardRequest {\n  accountId: number;\n}\n\nexport interface GetUserDefiTxRequest {\n  accountId: number;\n  offset: number;\n  start?: number;\n  end?: number;\n  limit: number;\n}\n\nexport type CollectionExtendsKey = {\n  thumbnail?: string;\n  cid?: string;\n  id?: string;\n  contractAddress: string;\n  collectionAddress: string;\n  deployStatus: DEPLOYMENT_STATUS;\n  updatedAt: number;\n  createdAt: number;\n  nftType: string;\n  baseUri: string;\n  collectionTitle?: string;\n  extra: {\n    mintChannel: string;\n    properties: {\n      isCounterFactualNFT: boolean;\n      isDeletable: boolean;\n      isEditable: boolean;\n      isLegacy: boolean;\n      isMintable: boolean;\n      isPublic: boolean;\n    };\n  };\n  cached: {\n    avatar: string;\n    banner: string;\n    thumbnail: string;\n    tileUri: string;\n  };\n  isCounterFactualNFT?: boolean;\n  isDeletable?: boolean;\n  isEditable?: boolean;\n  isLegacy?: boolean;\n  isMintable?: boolean;\n  isPublic?: boolean;\n};\n\nexport type CollectionBasicMeta = {\n  name: string;\n  tileUri: string;\n  nftFactory?: string;\n  description?: string;\n  avatar?: string;\n  banner?: string;\n  owner: string;\n};\nexport type CollectionDelete = {\n  accountId: number;\n  collectionId: number;\n};\n\nexport type CollectionLegacyMeta = Omit<CollectionBasicMeta, \"owner\"> & {\n  accountId: number;\n  tokenAddress: string;\n};\n\nexport enum NFT_PREFERENCE_TYPE {\n  fav = \"fav\",\n  hide = \"hide\",\n}\nexport type UpdateNFTLegacyCollectionRequest = {\n  accountId: number;\n  nftHashes: string[];\n  collectionId?: number;\n};\n\nexport type UpdateNFTGroupRequest = {\n  accountId: number;\n  nftHashes: string[];\n  collectionId?: number;\n  preferenceType: NFT_PREFERENCE_TYPE;\n  statusToUpdate: boolean;\n};\n/**\n * CollectionMeta\n * @property name string useToCreate Collection\n * @property name string\n * @property tileUri string option\n * @property owner? string option\n * @property nftFactory? string option\n * @property baseUri? string option\n * @property collectionTitle? string option\n * @property description? string option\n * @property avatar? string option\n * @property banner? string option\n * @property thumbnail? string option\n * @property cid? string option\n *\n */\nexport type CollectionMeta = CollectionExtendsKey & CollectionBasicMeta;\n\nexport interface GetUserOwnerCollectionRequest {\n  owner: string;\n  offset?: number;\n  limit?: number;\n  tokenAddress?: string;\n  isMintable?: boolean;\n}\n\nexport interface GetUserLegacyCollectionRequest {\n  accountId: string;\n  tokenAddress: string;\n  offset?: number;\n  limit?: number;\n}\nexport interface GetCollectionWholeNFTsRequest {\n  id: number;\n  metadata?: boolean;\n  offset?: number;\n  limit?: number;\n}\n\nexport interface GetUserNFTCollectionRequest {\n  accountId: string;\n  offset?: number;\n  limit?: number;\n  collectionId?: number;\n  tokenAddress?: string;\n}\n\nexport enum DUAL_TYPE {\n  DUAL_BASE = \"DUAL_BASE\",\n  DUAL_CURRENCY = \"DUAL_CURRENCY\",\n}\n\nexport type GetDualInfosRequest = {\n  baseSymbol: string;\n  quoteSymbol: string;\n  currency: string;\n  dualType: DUAL_TYPE;\n  minStrike?: string;\n  maxStrike?: string;\n  startTime?: number;\n  timeSpan?: number;\n  limit: number;\n};\nexport type GetDualPricesRequest = {\n  baseSymbol: string;\n  productIds: string;\n};\nexport type GetDualRuleRequest = { baseSymbol: string; currency?: string };\n\nexport type DualBid = {\n  baseProfit: string;\n  baseQty: string;\n};\nexport type DualPrice = {\n  productId: string;\n  cacheQty: string;\n  priceTime: number;\n  dualBid: DualBid[];\n};\nexport type DualIndex = {\n  index: string;\n  base: string;\n  quote: string;\n  indexTime: number;\n};\n\nexport type DualProductAndPrice = {\n  productId: string;\n  base: string;\n  quote: string;\n  currency: string;\n  createTime: number;\n  expireTime: number;\n  strike: string;\n  expired: boolean;\n  dualType: DUAL_TYPE;\n  ratio: number;\n  profit: string;\n  baseSize: string;\n};\n\nexport type DualRulesCoinsInfo = {\n  base: string;\n  quote: string;\n  currency: string;\n  basePrecision: number;\n  currencyPrecision: number;\n  baseMin: string;\n  currencyMin: string;\n  baseMax: string;\n  currencyMax: string;\n  granulation: number;\n  baseProfitStep: number;\n};\nexport type DualBalance = {\n  coin: string;\n  free: string;\n  frozen: string;\n};\n\nexport enum LABEL_INVESTMENT_STATUS {\n  // INVESTMENT_SUCCEEDED = \"INVESTMENT_SUCCEEDED\",\n  // INVESTMENT_FAILED = \"INVESTMENT_FAILED\",\n  // INVESTMENT_RECEIVED = \"INVESTMENT_RECEIVED\",\n  PROCESSED = \"processed\",\n  FAILED = \"failed\",\n  PROCESSING = \"processing\",\n  CANCELLED = \"cancelled\",\n}\n\nexport enum SETTLEMENT_STATUS {\n  UNSETTLED = \"UNSETTLED\",\n  SETTLED = \"SETTLED\",\n  PAID = \"PAID\",\n}\n\nexport interface GetUserDualTxRequest {\n  accountId: number;\n  dualTypes: DUAL_TYPE;\n  investmentStatuses?: LABEL_INVESTMENT_STATUS;\n  settlementStatuses?: SETTLEMENT_STATUS;\n  offset: number;\n  start: number;\n  end: number;\n  limit: number;\n}\n\nexport interface UserDualTxsHistory {\n  id: string;\n  hash: string;\n  productId: string;\n  dualType: DUAL_TYPE;\n  settleRatio: number;\n  filled: string;\n  dualFilled: string;\n  deliveryPrice: number;\n  strike: number;\n  market: string;\n  tokenInfoOrigin: {\n    base: string;\n    quote: string;\n    currency: string;\n    amountIn: string;\n    amountOut: string;\n    market: string;\n    tokenIn: number;\n    tokenOut: number;\n  };\n  timeOrigin: {\n    expireTime: number;\n    createTime: number;\n    updateTime: number;\n    settlementTime: number;\n  };\n  investmentStatus: LABEL_INVESTMENT_STATUS;\n  settlementStatus: SETTLEMENT_STATUS;\n  createdAt: number;\n  updatedAt: number;\n}\n\n/**\n * DualOrderRequest\n */\nexport interface DualOrderRequest {\n  /**\n   * exchange address\n   * @type {string}\n   * @memberof DefiOrderRequest\n   */\n  exchange: string;\n  /**\n   * storageId\n   * @type {number}\n   * @memberof DefiOrderRequest\n   */\n  storageId: number;\n  /**\n   * accountId\n   * @type {number}\n   * @memberof DefiOrderRequest\n   */\n  accountId: number;\n  /**\n   * sellToken\n   * @type TokenVolumeV3\n   * @memberof DefiOrderRequest\n   */\n  sellToken: TokenVolumeV3;\n  /**\n   * buyToken\n   * @type TokenVolumeV3\n   * @memberof DefiOrderRequest\n   */\n  buyToken: TokenVolumeV3;\n  /**\n   * Timestamp for order become invalid\n   * @type {number}\n   * @memberof DefiOrderRequest\n   */\n  validUntil: number;\n  /**\n   * fee\n   * @type {string}\n   * @memberof DefiOrderRequest\n   */\n  fee: string;\n  /**\n   * Maximum order fee that the user can accept, value range (in ten thousandths) 1 ~ 63\n   * @type {number}\n   * @memberof DefiOrderRequest\n   */\n  maxFeeBips: number;\n  /**\n   * fillAmountBOrS\n   * @type boolean\n   * @memberof DefiOrderRequest\n   */\n  fillAmountBOrS: boolean;\n  /**\n   * The orders EdDSA signature. The signature is a hexadecimal string obtained by signing the order itself and concatenating the resulting signature parts (Rx, Ry, and S). Used to authenticate and authorize the operation.\n   * @type {string}\n   * @memberof DefiOrderRequest\n   */\n  eddsaSignature?: string;\n\n  baseProfit: string;\n  clientOrderId: string;\n  productId: string;\n  settleRatio: string;\n  expireTime: number;\n}\n\nexport type CalDualResult = {\n  sellVol: string;\n  quota: string;\n  lessEarnVol: string;\n  lessEarnTokenSymbol: string;\n  greaterEarnVol: string;\n  greaterEarnTokenSymbol: string;\n  maxSellAmount: string;\n  miniSellVol: string;\n  feeVol: string | undefined;\n  feeTokenSymbol?: string;\n  maxFeeBips: number;\n  sellToken: TokenInfo;\n};\n\nexport interface DualUserLockedRequest {\n  accountId: number;\n  lockTag: DUAL_TYPE[];\n  status: string;\n}\n\nexport enum LuckyTokenItemStatusIndex {\n  SUBMITTING = 0,\n  NOT_EFFECTIVE = 1,\n  PENDING = 2,\n  COMPLETED = 3,\n  OVER_DUE = 4,\n  FAILED = 5,\n}\nexport enum LuckyTokenWithdrawStatus {\n  RECEIVED = 0,\n  PROCESSING = 1,\n  PROCESSED = 2,\n  WITHDRAW_FAILED = 3,\n  PREPARE_FAILED = 4,\n}\n\nexport enum LuckyTokenItemStatus {\n  SUBMITTING = \"SUBMITTING\",\n  NOT_EFFECTIVE = \"NOT_EFFECTIVE\",\n  PENDING = \"PENDING\",\n  COMPLETED = \"COMPLETED\",\n  OVER_DUE = \"OVER_DUE\",\n  FAILED = \"FAILED\",\n}\nexport enum LuckyTokenAmountType {\n  RANDOM = 0,\n  AVERAGE = 1,\n}\nexport enum LuckyTokenViewType {\n  PUBLIC = 0,\n  PRIVATE = 1,\n}\nexport enum LuckyTokenClaimType {\n  RELAY = 0,\n  COMMON = 1,\n  BLIND_BOX = 2,\n}\nexport enum ClaimRecordStatus {\n  WAITING_CLAIM = \"WAITING_CLAIM\",\n  CLAIMED = \"CLAIMED\",\n  EXPIRED = \"EXPIRED\",\n}\nexport enum BlindBoxStatus {\n  NOT_OPENED = \"NOT_OPENED\",\n  OPENED = \"OPENED\",\n  EXPIRED = \"EXPIRED\",\n}\nexport type LuckyTokenChampion = {\n  accountId: number;\n  address: string;\n  ens: string;\n  amount: number;\n};\nexport type LuckyTokenAmount = {\n  totalCount: number;\n  remainCount: number;\n  totalAmount: string;\n  remainAmount: string;\n  claimedBoxCount: number;\n  giftCount: number;\n};\nexport type LuckyTokenType = {\n  partition: LuckyTokenAmountType;\n  scope: LuckyTokenViewType;\n  mode: LuckyTokenClaimType;\n};\nexport type LuckyTokenInfo = {\n  memo: string;\n  signer: string;\n  signerUrl: string;\n  logoUrl: string;\n};\nexport type LuckyTokenSender = {\n  accountId: number;\n  address: string;\n  ens: string;\n};\nexport type LuckyTokenItemForReceive = {\n  hash: string;\n  sender: LuckyTokenSender;\n  champion: LuckyTokenChampion;\n  tokenId: number;\n  tokenAmount: LuckyTokenAmount;\n  type: LuckyTokenType;\n  status: LuckyTokenItemStatus;\n  validSince: number;\n  validUntil: number;\n  info: LuckyTokenInfo;\n  templateNo: number;\n  createdAt: number;\n  nftTokenInfo?: UserNFTBalanceInfo;\n  isNft?: boolean;\n};\nexport type BlindBoxClaimInfo = {\n  // 盲盒信息\n  id: number;\n  hash: string;\n  claimer: {\n    accountId: number;\n    address: string;\n    ens: string;\n  };\n  tokenId: number;\n  nftHash: string;\n  amount: string;\n  status: string;\n  openTime: string;\n  expireTime: string;\n  createdAt: number;\n};\nexport type LuckyTokenBlindBoxItemReceive = {\n  luckyToken: LuckyTokenItemForReceive;\n  claim: BlindBoxClaimInfo;\n};\nexport type LuckTokenClaim = {\n  hash: string;\n  claimer: {\n    accountId: number;\n    address: string;\n    ens: string;\n  };\n  referrer: {\n    accountId: number;\n    address: number;\n    ens: string;\n  };\n  helper: {\n    accountId: number;\n    address: number;\n    ens: number;\n  };\n  amount: number;\n  createdAt: number;\n  claimId: number;\n};\n\nexport type LuckyTokenSignerFlag = 0 | 1;\nexport type LuckTokenHistory = {\n  champion: LuckyTokenChampion;\n  claimAmount: number;\n  claim: {\n    id: number;\n  } & LuckTokenClaim;\n  tokenId: number;\n  hash: string;\n  helpers: {\n    accountId: number;\n    address: number;\n    ens: number;\n  }[];\n  luckyToken: {\n    id: number;\n  } & LuckyTokenItemForReceive;\n};\nexport type LuckTokenClaimDetail = {\n  champion: LuckyTokenChampion;\n  claimAmount: number;\n  claims: Array<\n    {\n      id: number;\n    } & LuckTokenClaim\n  >;\n  tokenId: number;\n  hash: string;\n  helpers: {\n    accountId: number;\n    address: number;\n    ens: number;\n    amount: number;\n  }[];\n  luckyToken: {\n    id: number;\n  } & LuckyTokenItemForReceive;\n};\n\nexport type LuckTokenWithdraw = {\n  id: number;\n  hash: string;\n  claimer: {\n    accountId: number;\n    address: number;\n    ens: string;\n  };\n  tokenId: number;\n  amount: string;\n  feeTokenId: number;\n  feeAmount: number;\n  status: 0 | 1 | 2; // PENDING:0 SUCCESS:1  FAIL:2\n  createdAt: number;\n  updatedAt: number;\n  isNft: boolean;\n  nftTokenInfo?: UserNFTBalanceInfo;\n};\n\nexport type TOKENMAPLIST = {\n  tokensMap: LoopringMap<TokenInfo>;\n  coinMap: LoopringMap<{\n    icon?: string;\n    name: string;\n    simpleName: string;\n    description?: string;\n    company: string;\n  }>;\n  totalCoinMap: LoopringMap<{\n    icon?: string;\n    name: string;\n    simpleName: string;\n    description?: string;\n    company: string;\n  }>;\n  idIndex: LoopringMap<string>;\n  addressIndex: LoopringMap<TokenAddress>;\n};\n\nexport interface OriginLuckTokenWithdrawsRequestV3 {\n  tokenId: number;\n  feeTokenId: number;\n  amount: string;\n  claimer: string;\n  transfer: Omit<OriginTransferRequestV3, \"payeeId\" | \"maxFee\" | \"memo\"> & {\n    payeeId?: 0;\n    memo?: string;\n    maxFee?: {\n      volume: \"0\";\n      tokenId: number | string;\n    };\n  };\n  nftData?: string;\n}\n\nexport interface OriginLuckTokenWithdrawsRequestV3WithPatch {\n  request: OriginLuckTokenWithdrawsRequestV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\n/**\n * LuckyTokenItemForSend\n *\n */\nexport type LuckyTokenItemForSendV3 = {\n  type: LuckyTokenType;\n  /**\n   * numbers\n   * @type {number}  ERC20 [1,10000], NFT [1,20000]\n   * @memberof LuckyTokenItemForSend\n   */\n  numbers: number; // <10000\n  giftNumbers: number; // <10000\n  memo: string;\n  signerFlag: boolean;\n  templateId: number;\n  validSince: number;\n  validUntil: number;\n} & (\n  | {\n      luckyToken: OriginTransfer3RequestV3;\n      /**\n       * nftData\n       * @type {string}  NFT required\n       * @memberof LuckyTokenItemForSend\n       */\n      nftData: string;\n    }\n  | {\n      luckyToken: OriginTransfer3RequestV3;\n    }\n);\n\nexport interface OriginLuckTokenSendRequestV3WithPatch {\n  request: LuckyTokenItemForSendV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\nexport interface OriginTransfer3RequestV3 {\n  /**\n   * exchange address\n   * @type {string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  exchange: string;\n  /**\n   * payer account ID\n   * @type {number}\n   * @memberof OriginTransferRequestV3\n   */\n  payerId: number;\n  /**\n   * payer account address\n   * @type {string}\n   * @memberof OriginTransferRequestV3\n   */\n  payerAddr: string;\n  /**\n   * payee account ID\n   * @type {number}\n   * @memberof OriginTransferRequestV3\n   */\n  payeeId: number;\n  /**\n   * payee account address\n   * @type {string}\n   * @memberof OriginTransferRequestV3\n   */\n  payeeAddr: string;\n  /**\n   *\n   * @type {TokenVolumeV3}\n   * @memberof OriginTransferRequestV3\n   */\n  token: string;\n  amount: string;\n  /**\n   *\n   * @type { Pick<TokenVolumeV3,'tokenId'> & {amount:string}}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  feeToken: string;\n  maxFeeAmount: string; //Pick<TokenVolumeV3, \"tokenId\"> & { amount: string };\n  /**\n   * offchain Id\n   * @type {number}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  storageId: number;\n  /**\n   * Timestamp for order to become invalid\n   * @type {number}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  validUntil: number;\n  /**\n   * transfer memo\n   * @type {string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  memo?: string;\n  /**\n   * eddsa signature\n   * @type {string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  eddsaSig?: string;\n  /**\n   * ecdsa signature\n   * @type {string}\n   * @memberof OriginNFTTransferRequestV3\n   */\n  counterFactualInfo?: CounterFactualInfo;\n}\n\nexport type STACKING_PRODUCT = {\n  tokenId: number;\n  symbol: string;\n  address: string;\n  decimals: number;\n  status: number;\n  apr: string;\n  precision: number;\n  staked: string;\n  rewardPeriod: string;\n  minAmount: string;\n  maxAmount: string;\n};\nexport enum StakeStatus {\n  received = \"received\",\n  locked = \"locked\",\n  partial_unlocked = \"partial_unlocked\",\n  completely_unlocked = \"completely_unlocked\",\n  failed = \"failed\",\n}\nexport type StakeInfoOrigin = {\n  accountId: number;\n  tokenId: number;\n  stakeAt: number;\n  createdAt: number;\n  updatedAt: number;\n  claimableTime: number;\n  apr: string;\n  lastDayPendingRewards: string;\n  initialAmount: string;\n  remainAmount: string;\n  totalRewards: string;\n  productId: string;\n  hash: string;\n  status: StakeStatus;\n};\nexport type STACKING_SUMMARY = {\n  totalStaked: string;\n  totalLastDayPendingRewards: string;\n  totalStakedRewards: string;\n  totalClaimableRewards: string;\n  staking: StakeInfoOrigin[];\n};\nexport enum StakeTransactionType {\n  subscribe = \"subscribe\",\n  redeem = \"redeem\",\n  claim = \"claim\",\n}\nexport type STACKING_TRANSACTIONS = {\n  accountId: number;\n  tokenId: number;\n  amount: string;\n  productId: string;\n  hash: string;\n  type: StakeTransactionType;\n  createdAt: number;\n  updatedAt: number;\n};\nexport interface OriginStakeClaimRequestV3 {\n  accountId: number;\n  token: TokenVolumeV3;\n  transfer: Omit<OriginTransferRequestV3, \"payeeId\" | \"memo\"> & {\n    payeeId?: 0;\n    memo?: string;\n  };\n}\nexport interface OriginStakeClaimRequestV3WithPatch {\n  request: OriginStakeClaimRequestV3;\n  web3: Web3;\n  chainId: ChainId;\n  walletType: ConnectorNames;\n  eddsaKey: string;\n  apiKey: string;\n  isHWAddr?: boolean;\n}\n\nexport interface GetContactsRequest {\n  isHebao: boolean;\n  accountId: number;\n}\n\nexport enum AddressType {\n  UNKNOWN_ADDRESS = 0,\n  LOOPRING_HEBAO_CF = 100,\n  // hebao\n  LOOPRING_HEBAO_CONTRACT_1_1_6 = 2000,\n  LOOPRING_HEBAO_CONTRACT_1_2_0 = 2001,\n  LOOPRING_HEBAO_CONTRACT_2_0_0 = 2002,\n  LOOPRING_HEBAO_CONTRACT_2_1_0 = 2003,\n\n  LOOPRING_DEX_EOA = 300,\n  //exchange\n  EXCHANGE_OTHER = 4000,\n  EXCHANGE_BINANCE = 4001,\n  EXCHANGE_OKX = 4002,\n  EXCHANGE_HUOBI = 4003,\n  EXCHANGE_COINBASE = 4004,\n\n  EOA = 5000,\n  EOA_METAMASK = 5001,\n  EOA_COINBASE = 5002,\n  EOA_LEDGER = 5003,\n\n  CONTRACT = 600,\n}\n\nexport interface GetContactsResponse {\n  contacts: {\n    addressType: AddressType;\n    contactAddress: string;\n    contactMemo: string;\n    contactName: string;\n    isFavourite: boolean;\n    network: string;\n    ownerAccountId: number;\n  }[];\n  total: number;\n}\n\nexport interface CreateContactRequest {\n  accountId: number;\n  isHebao: boolean;\n  contactAddress: string;\n  contactName: string;\n  contactMemo?: string;\n}\n\nexport interface UpdateContactRequest {\n  contactAddress: string;\n  isHebao: boolean;\n  accountId: number;\n  contactName?: string;\n  contactMemo?: string;\n  addressType?: number;\n}\n\nexport interface DeleteContactRequest {\n  contactAddress: string;\n  isHebao: boolean;\n  accountId: number;\n  contactName?: string;\n  contactMemo?: string;\n}\n\nexport type CEX_MARKET = {\n  market: string;\n  baseTokenId: number;\n  quoteTokenId: number;\n  precisionForPrice: number;\n  orderbookAggLevels: number;\n  precisionForAmount: number;\n  precisionForTotal: number;\n  enabled: boolean;\n  feeBips: number;\n  cefiQuota: {\n    base: string | \"\";\n    quote: string | \"\";\n  };\n  l2Quota: {\n    base: string | \"\";\n    quote: string | \"\";\n  };\n};\n\nexport interface OriginCEXV3OrderRequest {\n  /**\n   * exchange address\n   * @type {string}\n   * @memberof OriginCEXV3OrderRequest\n   */\n  exchange: string;\n  /**\n   * storageId\n   * @type {number}\n   * @memberof OriginCEXV3OrderRequest\n   */\n  storageId: number;\n  /**\n   * accountId\n   * @type {number}\n   * @memberof OriginCEXV3OrderRequest\n   */\n  accountId: number;\n  /**\n   * sellToken\n   * @type TokenVolumeV3\n   * @memberof OriginCEXV3OrderRequest\n   */\n  sellToken: TokenVolumeV3;\n  /**\n   * buyToken\n   * @type TokenVolumeV3\n   * @memberof OriginCEXV3OrderRequest\n   */\n  buyToken: TokenVolumeV3;\n  /**\n   * allOrNone\n   * @description Whether the order supports partial fills or not.Currently only supports false as a valid value\n   * @type boolean\n   * @memberof OriginCEXV3OrderRequest\n   */\n  allOrNone: Boolean;\n  /**\n   * fillAmountBOrS\n   * @type boolean\n   * @memberof OriginCEXV3OrderRequest\n   */\n  fillAmountBOrS: boolean;\n  /**\n   * Timestamp for order become invalid\n   * @type {number}\n   * @memberof OriginCEXV3OrderRequest\n   */\n  validUntil: number;\n  /**\n   * fee\n   * @type {string}\n   * @memberof OriginCEXV3OrderRequest\n   */\n  maxFeeBips: number;\n  /**\n   * The orders EdDSA signature. The signature is a hexadecimal string obtained by signing the order itself and concatenating the resulting signature parts (Rx, Ry, and S). Used to authenticate and authorize the operation.\n   * @type {string}\n   * @memberof OriginCEXV3OrderRequest\n   */\n  eddsaSignature?: string;\n  clientOrderId: string;\n  orderType: OrderTypeResp;\n}\n\nexport type CexResult = {\n  exceedDepth: boolean;\n  isAtoB: boolean;\n  isReverse: boolean;\n  feeBips: string;\n  /**\n   *  with decimals\n   */\n  amountS: string | undefined;\n  /**\n   *  with decimals\n   */\n  amountB: string | undefined;\n  info: CEX_MARKET;\n  // view\n  sellVol: string | undefined;\n  // view\n  buyVol: string | undefined;\n};\n","import { AxiosResponse } from \"axios\";\n\nexport enum LoopringErrorCode {\n  Unknown_Error = 100000,\n  Invalid_Args = 100001,\n\n  Address_Not_Found = 101001,\n  User_Not_Found = 101002,\n\n  ExchangeId_Incorrect = 102001,\n  Unsupported_TokenId = 102002,\n  Invalid_AccountId = 102003, //dup\n  Invalid_OrderId = 102004,\n  Market_Not_Supported = 102005, //dup\n  Illegal_Rate = 102006,\n  Order_Already_Existed = 102007,\n  Order_Already_Expired = 102008,\n  Order_Missing_Sig = 102010,\n  Invalid_User_Balance = 102011,\n  Order_Amount_Too_Small = 102012,\n  Failed_To_Freeze_Amt = 102014,\n  Exceed_Max_Order_Amt = 102020,\n  Invalid_Nonce = 102021,\n  Invalid_Transfer_Sender = 102022,\n  Invalid_Transfer_Receiver = 102023,\n  Unsuported_Fee_Token = 102024,\n  Transfer_Token_Is_Not_Consistent_With_Fee_Token = 102025,\n\n  Sumbit_Order_Failed = 102027,\n  No_Order_To_Cancel = 102117,\n  Fail_To_Cancel_Order = 102118,\n  Order_Is_Not_Valid = 102120,\n\n  Empty_Apikey = 104001,\n  Invalid_Apikey = 104002,\n  Invalid_AccountID = 104003, //dup\n  No_Sig_Provided = 104004,\n  Wrong_Sig = 104005,\n\n  User_Cannot_Be_Empty = 107001,\n  Orderhash_Cannot_Be_Empty = 107002,\n  Order_Not_Exist = 107003,\n\n  Unsupported_Market = 108000, //dup\n  Unsupported_Depth_Level = 108001,\n  SKD_UNKNOW = 500000,\n  CONTRACTNFT_URI = 500001,\n  CONTRACTNFT_BALANCE = 500002,\n  CONTRACTNFT_IS_APPROVE = 500003,\n  CONTRACTNFT_SET_APPROVE = 500004,\n  NOT_SUPPORT_ERROR = 500005,\n  USER_DENIED = 500006,\n  USER_DENIED_2 = 500007,\n  NO_EDDSA_KEY = 500008,\n  HTTP_ERROR = 500009,\n  CEX_NO_DEPTH_ERROR = 500010,\n  CEX_NO_PRODUCT = 500011,\n}\n\nexport enum ConnectorError {\n  NOT_SUPPORT_ERROR = \"Not supported on this device\",\n  USER_DENIED = \"User denied message signature\",\n  USER_DENIED_2 = \"personalSign err before Validate\",\n  CONTRACTNFT_URI = \"contract nft uri Error\",\n  CONTRACTNFT_BALANCE = \"contract nft balance error\",\n  CONTRACTNFT_IS_APPROVE = \"ContractNFT is Approve error\",\n  CONTRACTNFT_SET_APPROVE = \"ContractNFT set Approve error\",\n  NO_EDDSA_KEY = \"No EDDSA KEY\",\n  HTTP_ERROR = \"HTTP Request Failed!\",\n  CEX_NO_DEPTH_ERROR = \"NO Depth for CEX\",\n  CEX_NO_PRODUCT = \"NO Market for CEX\",\n}\n\nexport interface RESULT_INFO {\n  code?: number;\n  msg?: string;\n  message?: string;\n}\nexport type ERROR_INFO = {\n  resultInfo: RESULT_INFO;\n};\n\nexport const checkErrorInfo = (\n  errorInfo: RESULT_INFO,\n  isFirstTime?: boolean\n) => {\n  const message = errorInfo.message;\n  if (isFirstTime && message === \"NOT_SUPPORT_ERROR\") {\n    return ConnectorError.NOT_SUPPORT_ERROR;\n  } else if (message === \"USER_DENIED\" || message === \"USER_DENIED_2\") {\n    return ConnectorError.USER_DENIED;\n  } else if (\n    message &&\n    (message.startsWith(\"personalSign last\") ||\n      message.indexOf(\"User denied transaction\") > 0)\n  ) {\n    return ConnectorError.USER_DENIED;\n  }\n  return message;\n};\n","export * from \"./account_defs\";\nexport * from \"./web3_defs\";\nexport * from \"./ws_defs\";\nexport * from \"./url_defs\";\nexport * from \"./loopring_constants\";\nexport * from \"./loopring_enums\";\nexport * from \"./loopring_defs\";\nexport * from \"./error_codes\";\n\nexport const IsMobile = {\n  Android: function () {\n    return navigator.userAgent.match(/Android/i);\n  },\n  BlackBerry: function () {\n    return navigator.userAgent.match(/BlackBerry/i);\n  },\n  iOS: function () {\n    return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n  },\n  Opera: function () {\n    return navigator.userAgent.match(/Opera Mini/i);\n  },\n  Windows: function () {\n    return (\n      navigator.userAgent.match(/IEMobile/i) ||\n      navigator.userAgent.match(/WPDesktop/i)\n    );\n  },\n  Ethereum: function () {\n    return window?.ethereum && window?.ethereum.isImToken;\n  },\n\n  any: function () {\n    if (typeof global.navigator === 'undefined' || typeof navigator === 'undefined') {\n      console.log(\"IsMobile any navigator is undefined\")\n      return false;\n    }\n    return (\n      IsMobile.Android() ||\n      IsMobile.BlackBerry() ||\n      IsMobile.iOS() ||\n      IsMobile.Opera() ||\n      IsMobile.Windows() ||\n      IsMobile.Ethereum()\n    );\n  },\n};\n\ntype Ethereum = any;\ndeclare global {\n  interface Window {\n    ethereum?: Ethereum;\n    // socketEventMap: {[key:string]:any\n    // imageConfig:{[key:string]:any}|undefined\n  }\n}\n","import * as ethUtil from \"ethereumjs-util\";\nimport BN from \"bn.js\";\nimport BigNumber from \"bignumber.js\";\nimport {\n  AmmPoolInfoV3,\n  LOOPRING_URLs,\n  LoopringMap,\n  MarketInfo,\n  MarketStatus,\n  SEP,\n  SoursURL,\n  TokenAddress,\n  TokenInfo,\n  TOKENMAPLIST,\n  TokenRelatedInfo,\n} from \"../defs\";\n\nBigNumber.config({\n  EXPONENTIAL_AT: 100,\n  RANGE: [-100000, 10000000],\n  ROUNDING_MODE: 1,\n});\n\n/**\n * Returns hex string with '0x' prefix\n * @param input\n * @returns {string}\n */\nexport function addHexPrefix(input: any) {\n  if (typeof input === \"string\") {\n    return input.startsWith(\"0x\") ? input : \"0x\" + input;\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed Buffer|number|string (hex string must be with '0x' prefix)\n * @returns {Buffer}\n */\nexport function toBuffer(mixed: any) {\n  if (mixed instanceof Buffer) {\n    return mixed;\n  } else {\n    return ethUtil.toBuffer(mixed);\n  }\n}\n\n/**\n *\n * @param num number|string (hex string must be with '0x' prefix)\n * @param places number of zeros to pad\n * @returns {Buffer}\n */\nexport function zeroPad(num: any, places: any) {\n  return toBuffer(String(num).padStart(places, \"0\"));\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string | Uint8Array\n * @returns {string}\n */\nexport function toHex(\n  mixed: number | BigNumber | BN | Buffer | string | Uint8Array\n) {\n  if (\n    typeof mixed === \"number\" ||\n    mixed instanceof BigNumber ||\n    mixed instanceof BN\n  ) {\n    return addHexPrefix(mixed.toString(16));\n  }\n\n  if (mixed instanceof Buffer || mixed instanceof Uint8Array) {\n    return addHexPrefix(mixed.toString(\"hex\"));\n  }\n\n  if (typeof mixed === \"string\") {\n    const regex = new RegExp(/^0x[0-9a-fA-F]*$/);\n    return regex.test(mixed)\n      ? mixed\n      : addHexPrefix(toBuffer(mixed).toString(\"hex\"));\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string | Uint8Array\n * @returns {number}\n */\nexport function toNumber(\n  mixed: number | BigNumber | BN | Buffer | string | Uint8Array\n) {\n  if (typeof mixed === \"number\") {\n    return mixed;\n  }\n\n  if (mixed instanceof BigNumber || mixed instanceof BN) {\n    return mixed.toNumber();\n  }\n\n  if (typeof mixed === \"string\") {\n    return Number(mixed);\n  }\n\n  if (mixed instanceof Buffer || mixed instanceof Uint8Array) {\n    return Number(mixed.toString(\"hex\"));\n  }\n\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string | Uint8Array\n * @returns {BigNumber}\n */\nexport function toBig(\n  mixed: number | BigNumber | BN | Buffer | string | Uint8Array\n) {\n  if (mixed instanceof BigNumber) {\n    return mixed;\n  }\n\n  if (typeof mixed === \"number\") {\n    return new BigNumber(mixed.toString());\n  }\n\n  if (typeof mixed === \"string\") {\n    return new BigNumber(mixed);\n  }\n  if (mixed instanceof Buffer || mixed instanceof Uint8Array) {\n    return new BigNumber(mixed.toString(\"hex\"));\n  }\n\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param mixed number | BigNumber |  BN  | Buffer | string\n * @returns {BN}\n */\nexport function toBN(mixed: any) {\n  return mixed instanceof BN ? mixed : new BN(toBig(mixed).toString(10), 10);\n}\n\n/**\n *\n * @param value number | BigNumber | Buffer | string\n * @returns {BN}\n */\nexport function fromGWEI(value: any) {\n  return new BigNumber(toBig(value).times(1e9).toFixed(0));\n}\n\n/**\n *\n * @param value number | BigNumber | Buffer | string\n * @returns {BN}\n */\nexport function toGWEI(value: any) {\n  return toBig(value).div(1e9);\n}\n\n/**\n * Returns formatted hex string of a given private key\n * @param mixed Buffer | string | Uint8Array\n * @returns {string}\n */\nexport function formatKey(mixed: Buffer | string | Uint8Array) {\n  if (mixed instanceof Buffer || mixed instanceof Uint8Array) {\n    return mixed.toString(\"hex\");\n  }\n\n  if (typeof mixed === \"string\") {\n    return mixed.startsWith(\"0x\") ? mixed.slice(2) : mixed;\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n * Returns hex string of a given address\n * @param mixed Buffer | string |Uint8Array\n * @returns {string}\n */\nexport function formatAddress(mixed: Buffer | string | Uint8Array) {\n  if (mixed instanceof Buffer || mixed instanceof Uint8Array) {\n    return ethUtil.toChecksumAddress(\"0x\" + mixed.toString(\"hex\"));\n  }\n\n  if (typeof mixed === \"string\") {\n    return ethUtil.toChecksumAddress(\n      mixed.startsWith(\"0x\") ? mixed : \"0x\" + mixed\n    );\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n * Returns hex string without '0x' prefix\n * @param input string\n * @returns {string}\n */\nexport function clearHexPrefix(input: any) {\n  if (typeof input === \"string\") {\n    return input.startsWith(\"0x\") ? input.slice(2) : input;\n  }\n  throw new Error(\"Unsupported type\");\n}\n\n/**\n *\n * @param hex\n * @returns {string}\n */\nexport function padLeftEven(hex: any) {\n  return hex.length % 2 !== 0 ? `0${hex}` : hex;\n}\n\n/**\n * Returns symbol of a given kind of currency\n * @param settingsCurrency\n * @returns {*}\n */\nexport function getDisplaySymbol(settingsCurrency: any) {\n  switch (settingsCurrency) {\n    case \"CNY\":\n      return \"￥\";\n    case \"USD\":\n      return \"$\";\n    default:\n      return \"\";\n  }\n}\n\n/**\n * Returns number in string with a given precision\n * @param number number | BigNumber\n * @param precision number\n * @param ceil bool  round up\n * @returns {string}\n */\nexport function toFixed(number: any, precision: any, ceil: any) {\n  precision = precision || 0;\n  if (number instanceof BigNumber) {\n    const rm = ceil ? 0 : 1;\n    return number.toFixed(precision, rm);\n  }\n\n  if (typeof number === \"number\") {\n    return ceil\n      ? (\n          Math.ceil(number * Number(\"1e\" + precision)) /\n          Number(\"1e\" + precision)\n        ).toFixed(precision)\n      : (\n          Math.floor(number * Number(\"1e\" + precision)) /\n          Number(\"1e\" + precision)\n        ).toFixed(precision);\n  }\n\n  throw new Error(\"Unsupported type\");\n}\n\nexport function formatEddsaKey(key: any) {\n  const hexKey = clearHexPrefix(key);\n  return addHexPrefix(String(hexKey).padStart(64, \"0\"));\n}\n\n/**\n * Returns a number with commas as thousands separators\n * @param number number\n * @returns {*}\n */\nexport function numberWithCommas(number: any) {\n  if (number) {\n    number = number.toString().replace(/,/g, \"\");\n    if (isNaN(Number(number))) {\n      return \"-\";\n    }\n    try {\n      const parts = number.toString().split(\".\");\n      parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      return parts.join(\".\");\n    } catch (err) {\n      return \"-\";\n    }\n  } else {\n    return number;\n  }\n}\n\nexport function sortObjDictionary(obj: {\n  [key: string]: any;\n}): Map<string, any> {\n  const dataToSig: Map<string, any> = new Map();\n  if (obj) {\n    Reflect.ownKeys(obj)\n      .sort((a, b) => a.toString().localeCompare(b.toString()))\n      .forEach((key) => {\n        dataToSig.set(key.toString(), obj[key.toString()]);\n      });\n  }\n  return dataToSig;\n}\nexport function makeMarket<R>(raw_data: TokenInfo[]): TOKENMAPLIST {\n  const coinMap: LoopringMap<{\n    icon?: string;\n    name: string;\n    simpleName: string;\n    description?: string;\n    company: string;\n  }> = {};\n  const totalCoinMap: LoopringMap<{\n    icon?: string;\n    name: string;\n    simpleName: string;\n    description?: string;\n    company: string;\n  }> = {};\n  const addressIndex: LoopringMap<TokenAddress> = {};\n  const idIndex: LoopringMap<string> = {};\n  const tokensMap: LoopringMap<TokenInfo> = {};\n  if (raw_data instanceof Array) {\n    raw_data.forEach((item: TokenInfo) => {\n      if (item.symbol.startsWith(\"LP-\")) {\n        item.isLpToken = true;\n      } else {\n        item.isLpToken = false;\n      }\n      tokensMap[item.symbol] = item;\n\n      const coinInfo = {\n        icon: SoursURL + `ethereum/assets/${item.address}/logo.png`,\n        name: item.name,\n        simpleName: item.symbol,\n        description: item.type,\n        company: item.name,\n      };\n      if (!item.symbol.startsWith(\"LP-\")) {\n        coinMap[item.symbol] = coinInfo;\n      }\n      totalCoinMap[item.symbol] = coinInfo;\n      addressIndex[item.address.toLowerCase()] = item.symbol;\n      idIndex[item.tokenId] = item.symbol;\n    });\n  }\n  return {\n    tokensMap,\n    coinMap,\n    totalCoinMap,\n    idIndex,\n    addressIndex,\n  };\n}\nexport function makeAmmPool<R>(raw_data: any): {\n  ammpools: LoopringMap<AmmPoolInfoV3>;\n  pairs: LoopringMap<TokenRelatedInfo>;\n} {\n  const ammpools: LoopringMap<AmmPoolInfoV3> = {};\n  const pairs: LoopringMap<TokenRelatedInfo> = {};\n  if (raw_data?.pools instanceof Array) {\n    raw_data.pools.forEach((item: any) => {\n      const market: string = item.market;\n      ammpools[market] = item;\n      let base = \"\",\n        quote = \"\";\n      const ind = market.indexOf(\"-\");\n      const ind2 = market.lastIndexOf(\"-\");\n      base = market.substring(ind + 1, ind2);\n      quote = market.substring(ind2 + 1, market.length);\n\n      if (!pairs[base]) {\n        pairs[base] = {\n          tokenId: item.tokens.pooled[0],\n          tokenList: [quote],\n        };\n      } else {\n        pairs[base].tokenList = [...pairs[base].tokenList, quote];\n      }\n\n      if (!pairs[quote]) {\n        pairs[quote] = {\n          tokenId: item.tokens.pooled[1],\n          tokenList: [base],\n        };\n      } else {\n        pairs[quote].tokenList = [...pairs[quote].tokenList, base];\n      }\n    });\n  }\n  return {\n    ammpools,\n    pairs,\n  };\n}\n\nexport function makeMarkets<R>(\n  raw_data: any,\n  url: string = LOOPRING_URLs.GET_MARKETS\n): {\n  markets: LoopringMap<MarketInfo>;\n  pairs: LoopringMap<TokenRelatedInfo>;\n  tokenArr: string[];\n  tokenArrStr: string;\n  marketArr: string[];\n  marketArrStr: string;\n} {\n  const markets: LoopringMap<MarketInfo> = {};\n\n  const pairs: LoopringMap<TokenRelatedInfo> = {};\n\n  const isMix = url === LOOPRING_URLs.GET_MIX_MARKETS;\n\n  if (raw_data?.markets instanceof Array) {\n    raw_data.markets.forEach((item: any) => {\n      const marketInfo: MarketInfo = {\n        baseTokenId: item.baseTokenId,\n        enabled: item.enabled,\n        market: item.market,\n        orderbookAggLevels: item.orderbookAggLevels,\n        precisionForPrice: item.precisionForPrice,\n        quoteTokenId: item.quoteTokenId,\n      };\n\n      if (isMix) {\n        marketInfo.status = item.status as MarketStatus;\n        marketInfo.isSwapEnabled =\n          marketInfo.status === MarketStatus.ALL ||\n          marketInfo.status === MarketStatus.AMM;\n        marketInfo.createdAt = parseInt(item.createdAt);\n      }\n\n      markets[item.market] = marketInfo;\n\n      if (item.enabled) {\n        const market: string = item.market;\n        const ind = market.indexOf(\"-\");\n        const base = market.substring(0, ind);\n        const quote = market.substring(ind + 1, market.length);\n\n        if (!pairs[base]) {\n          pairs[base] = {\n            tokenId: item.baseTokenId,\n            tokenList: [quote],\n          };\n        } else {\n          pairs[base].tokenList = [...pairs[base].tokenList, quote];\n        }\n\n        if (!pairs[quote]) {\n          pairs[quote] = {\n            tokenId: item.quoteTokenId,\n            tokenList: [base],\n          };\n        } else {\n          pairs[quote].tokenList = [...pairs[quote].tokenList, base];\n        }\n      }\n    });\n  }\n\n  const marketArr: string[] = Reflect.ownKeys(markets) as string[];\n\n  const tokenArr: string[] = Reflect.ownKeys(pairs) as string[];\n\n  return {\n    markets,\n    pairs,\n    tokenArr,\n    tokenArrStr: tokenArr.join(SEP),\n    marketArr,\n    marketArrStr: marketArr.join(SEP),\n  };\n}\n","/* eslint-disable no-console, @typescript-eslint/ban-ts-comment */\nlet _myLog;\n\nif (\n  process.env.NODE_ENV !== \"production\" ||\n  // @ts-ignore\n  (typeof window !== \"undefined\" && window?.___OhTrustDebugger___)\n) {\n  _myLog = console.log;\n} else {\n  _myLog = function (message?: any, ...optionalParams: any[]) {\n    return \"\";\n  };\n}\nlet _myError;\nif (\n  process.env.NODE_ENV !== \"production\" ||\n  // @ts-ignore\n  (typeof window !== \"undefined\" && window?.___OhTrustDebugger___)\n) {\n  _myError = console.error;\n} else {\n  _myError = function (message?: any, ...optionalParams: any[]) {\n    return \"\";\n  };\n}\nexport const myLog = _myLog;\nexport const myError = _myError;\n","import * as fm from \"./formatter\";\nimport { toBig } from \"./formatter\";\n\nimport {\n  ABInfo,\n  AmmPoolSnapshot,\n  CalDualResult,\n  CEX_MARKET,\n  CexResult,\n  ConnectorError,\n  DefiMarketInfo,\n  DepthData,\n  DUAL_TYPE,\n  DualBalance,\n  DualIndex,\n  DualProductAndPrice,\n  DualRulesCoinsInfo,\n  ExitAmmPoolRequest,\n  JoinAmmPoolRequest,\n  LoopringErrorCode,\n  LoopringMap,\n  MarketInfo,\n  OffchainFeeInfo,\n  TokenInfo,\n  TokenVolumeV3,\n  XOR,\n} from \"../defs\";\n\nimport { getExistedMarket, getTokenInfoBySymbol } from \"./symbol_tools\";\nimport BigNumber from \"bignumber.js\";\nimport { myLog } from \"./log_tools\";\n\nconst BIG0 = fm.toBig(0);\n\nconst BIG1 = fm.toBig(1);\n\nconst BIG10 = fm.toBig(10);\n\nconst BIG10K = fm.toBig(10000);\n\nexport const getToken = (tokens: any, token: any) => {\n  if (!tokens) {\n    throw Error(\"no tokens list!\");\n  }\n  return tokens[token];\n};\n\nexport const getTokenInfoByToken = (\n  ammBalance: any,\n  tokens: any,\n  token: any\n) => {\n  const tokenInfo = getToken(tokens, token);\n\n  const tokenVol = ammBalance.pooledMap[tokenInfo.tokenId].volume;\n  const reserve = fm.toBig(tokenVol);\n\n  return {\n    tokenInfo,\n    tokenVol,\n    reserve,\n  };\n};\n\nexport function fromWEI(\n  tokens: any,\n  symbol: any,\n  valueInWEI: any,\n  precision?: any,\n  ceil?: any\n) {\n  try {\n    const tokenInfo = getToken(tokens, symbol);\n    const precisionToFixed = precision ? precision : tokenInfo.precision;\n    const value = fm.toBig(valueInWEI).div(\"1e\" + tokenInfo.decimals);\n    return fm.toFixed(value, precisionToFixed, ceil);\n  } catch (err) {\n    return undefined;\n  }\n  return \"0\";\n}\n\nexport function toWEI(\n  tokens: any,\n  symbol: any,\n  value: any,\n  rm: any = undefined\n) {\n  const tokenInfo = getToken(tokens, symbol);\n  if (typeof tokenInfo === \"undefined\") {\n    return \"0\";\n  }\n\n  const bigN = fm.toBig(value).times(\"1e\" + tokenInfo.decimals);\n\n  return rm === undefined ? bigN.toString() : bigN.toFixed(0, rm);\n}\n\nexport function isEmpty(input: any) {\n  if (!input || input.trim() === \"\") {\n    return true;\n  }\n\n  return false;\n}\n\nfunction getAmountOutWithFeeBips(\n  amountIn: string,\n  feeBips: string,\n  reserveIn: string,\n  reserveOut: string\n) {\n  const amountInBig = fm.toBig(amountIn);\n  const reserveInBig = fm.toBig(reserveIn);\n  const reserveOutBig = fm.toBig(reserveOut);\n\n  if (amountInBig.lt(BIG0) || reserveInBig.lt(BIG0) || reserveOutBig.lt(BIG0)) {\n    return BIG0;\n  }\n\n  const feeBipsBig = fm.toBig(feeBips);\n\n  const amountInWithFee = amountInBig.times(BIG10K.minus(feeBipsBig));\n  const numerator = amountInWithFee.times(reserveOutBig);\n  const denominator = reserveInBig.times(BIG10K).plus(amountInWithFee);\n\n  return numerator.div(denominator);\n}\n\nfunction getAmountInWithFeeBips(\n  amountOut: string,\n  feeBips: string,\n  reserveIn: string,\n  reserveOut: string\n) {\n  const amountOutBig = fm.toBig(amountOut);\n  const reserveInBig = fm.toBig(reserveIn);\n  const reserveOutBig = fm.toBig(reserveOut);\n\n  if (\n    amountOutBig.lt(BIG0) ||\n    reserveInBig.lt(BIG0) ||\n    reserveOutBig.lt(BIG0)\n  ) {\n    return BIG0;\n  }\n\n  const feeBipsBig = fm.toBig(feeBips);\n\n  const numerator = reserveInBig.times(amountOutBig).times(BIG10K);\n  const denominator = reserveOutBig\n    .minus(amountOutBig)\n    .times(BIG10K.minus(feeBipsBig));\n\n  return numerator.div(denominator).plus(BIG1);\n}\n\nfunction getOutputOrderbook(\n  input: string,\n  baseToken: TokenInfo | undefined,\n  quoteToken: TokenInfo | undefined,\n  feeBips: string,\n  isAtoB: boolean,\n  isReverse: boolean,\n  depth: DepthData\n) {\n  let output = \"0\";\n  let remain: string = input;\n\n  const bids = depth.bids; // .reverse()\n\n  // console.log('bids:', bids[0])\n  // console.log('bids last:', bids[bids.length - 1])\n  // console.log('asks:', depth.asks[0])\n  // console.log('asks last:', depth.asks[depth.asks.length - 1])\n\n  // console.log(`isAtoB:${isAtoB} isReverse:${isReverse}`)\n\n  if (!baseToken || !quoteToken) {\n    return output;\n  }\n  // myLog(baseToken, ' ', quoteToken)\n\n  //amt is size(base ETH). vol is volume(quote USDT)\n\n  if (isAtoB) {\n    if (!isReverse) {\n      //ETH -> USDT\n\n      remain = fm\n        .toBig(remain)\n        .times(\"1e\" + baseToken.decimals)\n        .toString();\n\n      for (let i = bids.length - 1; i >= 0; i--) {\n        const abInfo: ABInfo = bids[i];\n\n        // console.log(`i:${i} abInfo:`, abInfo, `decimals:${baseToken.decimals} ${quoteToken.decimals}`)\n\n        const consume: string = fm.toBig(remain).gte(fm.toBig(abInfo.amt))\n          ? abInfo.amt\n          : remain;\n\n        if (fm.toBig(consume).lte(BIG0)) {\n          break;\n        }\n\n        const volValue = fm.toBig(abInfo.vol).div(\"1e\" + quoteToken.decimals);\n\n        if (fm.toBig(consume).eq(fm.toBig(abInfo.amt))) {\n          output = fm.toBig(output).plus(volValue).toString();\n        } else {\n          const ratio = fm.toBig(consume).div(fm.toBig(abInfo.amt));\n          // myLog('got ratio:', ratio.toString(), consume, abInfo.amt)\n          output = fm.toBig(output).plus(ratio.times(volValue)).toString();\n        }\n\n        // myLog('1__ ', i, ' output:', output, ' remain:', remain, ' abInfo.amt:', abInfo.amt, ' abInfo.vol:', abInfo.vol, ' volValue:', volValue.toString())\n\n        remain = fm.toBig(remain).minus(fm.toBig(consume)).toString();\n      }\n    } else {\n      // USDT -> ETH\n      // isAtoB = true, isReverse = false\n\n      remain = fm.toBig(remain).times(BIG10.pow(baseToken.decimals)).toString();\n\n      for (let i = 0; i < depth.asks.length; i++) {\n        const abInfo: ABInfo = depth.asks[i];\n        // const placed: string = fm.toBig(abInfo.vol).div(BIG10.pow(quoteToken.decimals)).toString()\n        const consume: string = fm.toBig(remain).gte(fm.toBig(abInfo.vol))\n          ? abInfo.vol\n          : remain;\n\n        if (fm.toBig(consume).lte(BIG0)) {\n          // console.log('return 22222')\n          break;\n        }\n\n        // console.log(`i:${i} abInfo:`, abInfo, `decimals:${baseToken.decimals} ${quoteToken.decimals}`)\n\n        // console.log('remain:', remain, ' abInfo.vol:', abInfo.vol, ' consume:', consume)\n\n        const amtValue = fm.toBig(abInfo.amt).div(\"1e\" + quoteToken.decimals);\n\n        if (fm.toBig(consume).eq(fm.toBig(abInfo.vol))) {\n          output = fm.toBig(output).plus(amtValue).toString();\n        } else {\n          const ratio = fm.toBig(consume).div(fm.toBig(abInfo.vol));\n          output = fm.toBig(output).plus(ratio.times(amtValue)).toString();\n        }\n\n        remain = fm.toBig(remain).minus(fm.toBig(consume)).toString();\n\n        // myLog('2__ ', i, ' output:', output, ' abInfo.vol:', abInfo.vol, ' remain:', remain)\n      }\n    }\n  } else {\n    if (!isReverse) {\n      // ETH <- USDT\n\n      remain = fm\n        .toBig(remain)\n        .times(BIG10.pow(quoteToken.decimals))\n        .toString();\n\n      for (let i = bids.length - 1; i >= 0; i--) {\n        const abInfo: ABInfo = bids[i];\n        // const placed: string = fm.toBig(abInfo.vol).div(BIG10.pow(quoteToken.decimals)).toString()\n\n        const consume: string = fm.toBig(remain).gte(fm.toBig(abInfo.vol))\n          ? abInfo.vol\n          : remain;\n\n        if (fm.toBig(consume).lte(BIG0)) {\n          break;\n        }\n\n        // myLog(`i:${i} abInfo:`, abInfo, `decimals:${baseToken.decimals} ${quoteToken.decimals}`)\n\n        // myLog('remain:', remain, 'abInfo.vol:', abInfo.vol, ' consume:', consume)\n\n        const amtValue = fm\n          .toBig(abInfo.amt)\n          .div(BIG10.pow(baseToken.decimals));\n\n        if (fm.toBig(consume).eq(abInfo.vol)) {\n          output = fm.toBig(output).plus(fm.toBig(amtValue)).toString();\n        } else {\n          const ratio = fm.toBig(consume).div(fm.toBig(abInfo.vol));\n          output = fm.toBig(output).plus(ratio.times(amtValue)).toString();\n        }\n\n        remain = fm.toBig(remain).minus(fm.toBig(consume)).toString();\n\n        // myLog('3__', i, ' output:', output, ' abInfo.vol:', abInfo.vol, ' remain:', remain)\n      }\n    } else {\n      // USDT <- ETH\n\n      remain = fm\n        .toBig(remain)\n        .times(BIG10.pow(quoteToken.decimals))\n        .toString();\n\n      for (let i = 0; i < depth.asks.length; i++) {\n        const abInfo: ABInfo = depth.asks[i];\n\n        // myLog(`i:${i} abInfo:`, abInfo, `decimals:${baseToken.decimals} ${quoteToken.decimals}`)\n\n        const consume: string = fm.toBig(remain).gte(fm.toBig(abInfo.amt))\n          ? abInfo.amt\n          : remain;\n\n        if (fm.toBig(consume).lte(BIG0)) {\n          break;\n        }\n\n        const volValue = fm\n          .toBig(abInfo.vol)\n          .div(BIG10.pow(baseToken.decimals));\n\n        if (fm.toBig(consume).eq(fm.toBig(abInfo.amt))) {\n          output = fm.toBig(output).plus(volValue).toString();\n        } else {\n          const ratio = fm.toBig(consume).div(fm.toBig(abInfo.amt));\n          output = fm.toBig(output).plus(ratio.times(volValue)).toString();\n        }\n\n        // myLog('4__', i, ' output:', output, ' abInfo.vol:', abInfo.vol, ' volValue:', volValue.toString())\n\n        remain = fm.toBig(remain).minus(fm.toBig(consume)).toString();\n      }\n    }\n  }\n\n  return output;\n}\n\nexport function getReserveInfo(\n  sell: string,\n  buy: string,\n  marketArr: string[],\n  tokenMap: LoopringMap<TokenInfo>,\n  marketMap: LoopringMap<MarketInfo>,\n  ammPoolSnapshot: AmmPoolSnapshot | undefined = undefined\n) {\n  const { market, amm, baseShow, quoteShow } = getExistedMarket(\n    marketArr,\n    sell,\n    buy\n  );\n\n  if (\n    isEmpty(market) ||\n    isEmpty(amm) ||\n    Object.keys(marketMap).indexOf(market) < 0\n  ) {\n    return undefined;\n  }\n\n  const marketInfo: MarketInfo = marketMap[market];\n\n  const sellToken = getTokenInfoBySymbol(tokenMap, sell);\n  const buyToken = getTokenInfoBySymbol(tokenMap, buy);\n\n  let isReverse = false;\n\n  const coinA = ammPoolSnapshot?.pooled[0];\n\n  const coinB = ammPoolSnapshot?.pooled[1];\n\n  let reserveIn = \"0\";\n  let reserveOut = \"0\";\n\n  if (\n    sellToken?.tokenId !== undefined &&\n    buyToken?.tokenId !== undefined &&\n    coinA?.tokenId !== undefined &&\n    coinB?.tokenId !== undefined\n  ) {\n    if (sellToken?.tokenId === coinA?.tokenId) {\n      reserveIn = coinA.volume;\n      reserveOut = coinB.volume;\n    } else {\n      reserveIn = coinB.volume;\n      reserveOut = coinA.volume;\n      isReverse = true;\n    }\n  } else {\n    if (market === `${buy}-${sell}`) {\n      isReverse = true;\n    }\n  }\n\n  return {\n    reserveIn,\n    reserveOut,\n    sellToken,\n    buyToken,\n    coinA,\n    coinB,\n    isReverse,\n    marketInfo,\n  };\n}\n\nfunction getPriceImpactStr(curPrice: string, toPrice: string) {\n  if (!curPrice || !toPrice) {\n    return \"0\";\n  }\n\n  const toPriceBig = fm.toBig(toPrice);\n\n  if (toPriceBig.eq(BIG0)) {\n    return \"0\";\n  }\n\n  const percent = fm.toBig(toPriceBig).div(curPrice);\n\n  return BIG1.minus(percent).abs().toString();\n}\n\nexport function getCurPrice(reserveIn: string, reserveOut: string) {\n  if (!reserveIn || !reserveOut) {\n    return \"0\";\n  }\n\n  reserveIn = reserveIn.trim();\n  reserveOut = reserveOut.trim();\n\n  const reserveInBig = fm.toBig(reserveIn);\n  const reserveOutBig = fm.toBig(reserveOut);\n\n  if (reserveInBig.eq(BIG0)) {\n    return \"0\";\n  }\n\n  return reserveOutBig.div(reserveInBig).toString();\n}\n\nexport function getToPrice(amountS: string, amountB: string) {\n  if (!amountS || !amountB) {\n    return \"0\";\n  }\n\n  amountS = amountS.trim();\n  amountB = amountB.trim();\n\n  const amountSBig = fm.toBig(amountS);\n  const amountBBig = fm.toBig(amountB);\n\n  if (amountSBig.eq(BIG0)) {\n    return \"0\";\n  }\n\n  return amountBBig.div(amountSBig).toString();\n}\n\nexport function getPriceImpact(\n  reserveIn: string,\n  reserveOut: string,\n  amountS: string,\n  feeBips: string,\n  takerFee: string\n) {\n  let amountB: BigNumber = getAmountOutWithFeeBips(\n    amountS,\n    feeBips,\n    reserveIn,\n    reserveOut\n  );\n  amountB = amountB.times(BIG10K.minus(fm.toBig(takerFee))).div(BIG10K);\n  const curPrice = getCurPrice(reserveIn, reserveOut);\n  const toPrice = getToPrice(amountS, amountB.toString());\n\n  return getPriceImpactStr(curPrice, toPrice);\n}\n\nexport function updatePriceImpact_new(\n  reverseIn: string,\n  reverseOut: string,\n  amountS: string,\n  sellDecimal: number,\n  amountBOut: string,\n  buyDecimal: number,\n  feeBips: string,\n  takerFee: string,\n  isAtoB: boolean,\n  isReversed: boolean,\n  exceedDepth: boolean,\n  depth: DepthData\n) {\n  let priceImpact = \"0\";\n\n  if (isEmpty(reverseIn) || isEmpty(reverseOut) || isEmpty(feeBips)) {\n    return \"0\";\n  }\n\n  if (exceedDepth) {\n    priceImpact = getPriceImpact(reverseIn, reverseOut, amountS, feeBips, \"0\");\n  } else {\n    if (!depth.mid_price) {\n      return \"0\";\n    }\n\n    // LRC / ETH !isReversed isAtoB\n    const coinADecimal = !isReversed ? sellDecimal : buyDecimal;\n    const coinBDecimal = !isReversed ? buyDecimal : sellDecimal;\n    const curPrice = fm\n      .toBig(depth.mid_price)\n      .times(\"1e\" + coinBDecimal)\n      .div(\"1e\" + coinADecimal)\n      .toString();\n    const toPrice = !isReversed\n      ? getToPrice(amountS, amountBOut)\n      : getToPrice(amountBOut, amountS);\n    // console.log('updatePriceImpact_new isReversed:', isReversed, ' amountS:', amountS, ' amountBOut:', amountBOut)\n    // console.log('updatePriceImpact_new toPrice:', toPrice, ' curPrice:', curPrice)\n\n    priceImpact = getPriceImpactStr(curPrice, toPrice);\n  }\n\n  return priceImpact;\n}\n\nexport function getMinReceived(\n  amountBOut: string,\n  minimumDecimal: number,\n  slipBips: string\n) {\n  const minReceived = fm\n    .toBig(amountBOut)\n    .times(BIG10K.minus(fm.toBig(slipBips)))\n    .div(BIG10K);\n  return {\n    minReceived: minReceived.toFixed(0, 0),\n    minReceivedVal: minReceived.div(\"1e\" + minimumDecimal).toString(),\n    minimumDecimal,\n  };\n}\n\nexport function getOutputAmount({\n  input,\n  sell,\n  buy,\n  isAtoB,\n  marketArr,\n  tokenMap,\n  marketMap,\n  depth,\n  ammPoolSnapshot,\n  feeBips,\n  takerRate,\n  slipBips,\n}: {\n  input: string;\n  sell: string;\n  buy: string;\n  isAtoB: boolean;\n  marketArr: string[];\n  tokenMap: LoopringMap<TokenInfo>;\n  marketMap: LoopringMap<MarketInfo>;\n  depth: DepthData;\n  ammPoolSnapshot: AmmPoolSnapshot | undefined;\n  feeBips: string;\n  takerRate: string;\n  slipBips: string;\n}):\n  | {\n      exceedDepth: boolean;\n      isReverse: boolean;\n      isAtoB: boolean;\n      slipBips: string;\n      takerRate: string;\n      feeBips: string;\n      output: any;\n      sellAmt: string;\n      buyAmt: string;\n      amountS: string;\n      amountBOut: string;\n      amountBOutWithoutFee: string;\n      amountBOutSlip: {\n        minReceived: string;\n        minReceivedVal: string;\n        minimumDecimal: number;\n      };\n      priceImpact: string;\n    }\n  | undefined {\n  // console.log('enter getOutputAmount:', input, base, quote, isAtoB, marketArr, tokenMap, marketMap, depth, ammPoolSnapshot, feeBips, takerRate, slipBips)\n\n  // console.log(`getOutputAmount market: ${base} / ${quote}`)\n\n  // console.log('ammPoolSnapshot:', ammPoolSnapshot)\n\n  const reserveInfo = getReserveInfo(\n    sell,\n    buy,\n    marketArr,\n    tokenMap,\n    marketMap,\n    ammPoolSnapshot\n  );\n\n  if (!reserveInfo) {\n    return undefined;\n  }\n\n  const { reserveIn, reserveOut, sellToken, buyToken, isReverse, marketInfo } =\n    reserveInfo;\n\n  if (!sellToken || !buyToken) {\n    return undefined;\n  }\n\n  input = input.trim();\n\n  let exceedDepth = false;\n\n  let output: any = \"0\";\n\n  let amountS = \"0\";\n\n  let amountBOutWithoutFee = \"0\";\n\n  let amountBOut = \"0\";\n\n  let sellAmt = \"0\";\n  let buyAmt = \"0\";\n\n  let minimumDecimal = 0;\n\n  if (isAtoB) {\n    // bids_amtTotal -> bidsSizeShown\n    // asks_volTotal -> asksQuoteSizeShown\n    const amountInWei = toWEI(tokenMap, sell, input, 0);\n\n    // console.log('isAtoB amountInWei:', amountInWei)\n\n    if (isEmpty(depth.bids_amtTotal) || isEmpty(depth.asks_volTotal)) {\n      exceedDepth = true;\n    } else {\n      if (!isReverse) {\n        exceedDepth = fm.toBig(amountInWei).gt(fm.toBig(depth.bids_amtTotal));\n        // console.log('3 amountInWei:', amountInWei, ' bids_amtTotal:', depth.bids_amtTotal)\n      } else {\n        exceedDepth = fm.toBig(amountInWei).gt(fm.toBig(depth.asks_volTotal));\n        // console.log('4 amountInWei:', amountInWei, ' asks_volTotal:', depth.asks_volTotal)\n      }\n    }\n\n    // console.log(`a2b(input:${input})  exceedDepth:`, exceedDepth, ' isSwapEnabled:', marketInfo.isSwapEnabled)\n\n    if (exceedDepth) {\n      if (marketInfo.isSwapEnabled) {\n        const amountB = getAmountOutWithFeeBips(\n          amountInWei,\n          feeBips,\n          reserveIn,\n          reserveOut\n        );\n        output = fromWEI(tokenMap, buy, amountB.toFixed(0, 0));\n      }\n    } else {\n      output = getOutputOrderbook(\n        input,\n        sellToken,\n        buyToken,\n        feeBips,\n        isAtoB,\n        isReverse,\n        depth\n      );\n    }\n\n    amountBOutWithoutFee = toWEI(tokenMap, buy, output, 0);\n\n    const leftRatio = BIG10K.minus(fm.toBig(takerRate)).div(BIG10K);\n\n    // console.log('amountBOutWithoutFee:', amountBOutWithoutFee, ' leftRatio:', leftRatio.toString())\n\n    amountBOut = toWEI(\n      tokenMap,\n      buy,\n      fm.toBig(output).times(leftRatio).toString(),\n      0\n    );\n\n    amountS = toWEI(tokenMap, sell, input, 0);\n\n    sellAmt = input;\n    buyAmt = output;\n  } else {\n    // asks_amtTotal -> asksSizeShown\n    // bids_volTotal -> bidsQuoteSizeShown\n\n    if (isEmpty(depth.bids_volTotal) || isEmpty(depth.asks_amtTotal)) {\n      exceedDepth = true;\n    } else {\n      const amountInWei = toWEI(tokenMap, buy, input, 0);\n\n      if (!isReverse) {\n        exceedDepth = fm.toBig(amountInWei).gt(fm.toBig(depth.bids_volTotal));\n      } else {\n        exceedDepth = fm.toBig(amountInWei).gt(fm.toBig(depth.asks_amtTotal));\n      }\n    }\n\n    let amountSBint = BIG0;\n\n    const amountB: string = toWEI(tokenMap, buy, input, 0);\n\n    // console.log(`b2a(input:${input}) exceedDepth:${exceedDepth} amountB:${amountB}`)\n\n    if (exceedDepth) {\n      if (marketInfo.isSwapEnabled) {\n        amountSBint = getAmountInWithFeeBips(\n          amountB,\n          feeBips,\n          reserveIn,\n          reserveOut\n        );\n      }\n    } else {\n      const outputOrderbook = getOutputOrderbook(\n        input,\n        sellToken,\n        buyToken,\n        feeBips,\n        isAtoB,\n        isReverse,\n        depth\n      );\n      amountSBint = fm.toBig(toWEI(tokenMap, sell, outputOrderbook));\n    }\n\n    if (amountSBint.gt(BIG0)) {\n      output = fromWEI(tokenMap, sell, amountSBint.toString());\n\n      amountBOutWithoutFee = fm.toBig(amountB).toFixed(0, 0);\n      // amountBOutWithoutFee = amountB\n      const leftRatio = BIG10K.minus(fm.toBig(takerRate)).div(BIG10K);\n      amountBOut = fm.toBig(amountB).times(leftRatio).toFixed(0, 0);\n    }\n\n    amountS = amountSBint.toFixed(0, 0);\n\n    // console.log('got amountSBint:', amountSBint.toString(), amountSBint.gt(BIG0), ' amountBOut:', amountBOut.toString())\n\n    sellAmt = output;\n    buyAmt = input;\n  }\n\n  minimumDecimal = buyToken.decimals;\n\n  const amountBOutSlip = getMinReceived(amountBOut, minimumDecimal, slipBips);\n\n  const priceImpact = updatePriceImpact_new(\n    reserveIn,\n    reserveOut,\n    amountS,\n    sellToken.decimals,\n    amountBOut,\n    buyToken.decimals,\n    feeBips,\n    takerRate,\n    isAtoB,\n    isReverse,\n    exceedDepth,\n    depth\n  );\n\n  return {\n    exceedDepth,\n    isReverse,\n    isAtoB,\n\n    slipBips,\n    takerRate,\n    feeBips,\n\n    output,\n\n    sellAmt,\n    buyAmt,\n\n    amountS,\n\n    amountBOut,\n    amountBOutWithoutFee,\n\n    amountBOutSlip,\n\n    priceImpact,\n  };\n}\n\nexport function ammPoolCalc(\n  rawVal: string,\n  isAtoB: boolean,\n  coinA: TokenVolumeV3,\n  coinB: TokenVolumeV3\n) {\n  const coinA_Vol_BIG = fm.toBig(coinA.volume);\n  const coinB_Vol_BIG = fm.toBig(coinB.volume);\n\n  let output = BIG0;\n\n  let ratio = BIG0;\n\n  if (isAtoB) {\n    if (!coinA_Vol_BIG.eq(BIG0)) {\n      ratio = fm.toBig(rawVal).div(coinA_Vol_BIG);\n      output = ratio.times(coinB_Vol_BIG);\n    }\n  } else {\n    if (!coinB_Vol_BIG.eq(BIG0)) {\n      ratio = fm.toBig(rawVal).div(coinB_Vol_BIG);\n      output = ratio.times(coinA_Vol_BIG);\n    }\n  }\n\n  return {\n    output: output.toFixed(0, 0),\n    ratio,\n  };\n}\n\n/**\n *\n * @param rawVal\n * @param isAtoB\n * @param slippageTolerance\n * @param owner\n * @param fees\n * @param ammPoolSnapshot\n * @param tokenMap\n * @param idIdx\n * @param coinAOffchainId\n * @param coinBOffchainId\n * @param rawValMatchForRawVal first time add to pool\n */\nexport function makeJoinAmmPoolRequest(\n  rawVal: string,\n  isAtoB: boolean,\n  slippageTolerance: string,\n  owner: string,\n  fees: LoopringMap<OffchainFeeInfo>,\n  ammPoolSnapshot: AmmPoolSnapshot,\n  tokenMap: LoopringMap<TokenInfo>,\n  idIdx: LoopringMap<string>,\n  coinAOffchainId = 0,\n  coinBOffchainId = 0,\n  rawValMatchForRawVal?: string\n) {\n  const coinA: TokenVolumeV3 = ammPoolSnapshot.pooled[0];\n  const coinB: TokenVolumeV3 = ammPoolSnapshot.pooled[1];\n\n  const baseToken: TokenInfo = tokenMap[idIdx[coinA.tokenId]];\n  const quoteToken: TokenInfo = tokenMap[idIdx[coinB.tokenId]];\n\n  const fee =\n    fees && fees[quoteToken.symbol] && fees[quoteToken.symbol].fee\n      ? fees[quoteToken.symbol].fee\n      : \"0\";\n\n  rawVal = fm\n    .toBig(rawVal)\n    .times(BIG10.pow(isAtoB ? baseToken.decimals : quoteToken.decimals))\n    .toFixed(0, 0);\n\n  // eslint-disable-next-line prefer-const\n  let { output, ratio } = ammPoolCalc(rawVal, isAtoB, coinA, coinB);\n  let volLp;\n  if (output === \"0\" && rawValMatchForRawVal) {\n    output = fm\n      .toBig(rawValMatchForRawVal)\n      .times(BIG10.pow(isAtoB ? quoteToken.decimals : baseToken.decimals))\n      .toFixed(0, 0);\n    // ratio = fm.toBig(\"1\");\n    volLp = \"1\";\n  } else {\n    const rest = BIG1.minus(fm.toBig(slippageTolerance));\n    volLp = fm\n      .toBig(ammPoolSnapshot.lp.volume)\n      .times(ratio)\n      .times(rest)\n      .toFixed(0, 0);\n  }\n  const volA = isAtoB ? rawVal : output;\n  const volB = isAtoB ? output : rawVal;\n\n  const request: JoinAmmPoolRequest = {\n    owner,\n    poolAddress: ammPoolSnapshot.poolAddress,\n    joinTokens: {\n      pooled: [\n        { tokenId: coinA.tokenId, volume: volA },\n        { tokenId: coinB.tokenId, volume: volB },\n      ],\n      minimumLp: { tokenId: ammPoolSnapshot.lp.tokenId, volume: volLp },\n    },\n    storageIds: [coinAOffchainId, coinBOffchainId],\n    fee,\n  };\n\n  return {\n    request,\n  };\n}\nexport function makeExitAmmPoolMini(\n  rawVal: string,\n  ammPoolSnapshot: AmmPoolSnapshot,\n  tokenMap: LoopringMap<TokenInfo>,\n  idIdx: LoopringMap<string>,\n  RatioDecimal = 10\n) {\n  const lpTokenVol: TokenVolumeV3 = ammPoolSnapshot.lp;\n  const lpToken: TokenInfo = tokenMap[idIdx[lpTokenVol.tokenId]];\n  const miniLpVol = fm //minLP Volume big number\n    .toBig(lpTokenVol.volume)\n    .times(2)\n    .div(\"1e\" + RatioDecimal);\n  return {\n    miniLpVol: miniLpVol.toString(),\n    miniLpVal: fm\n      .toBig(miniLpVol)\n      .div(\"1e\" + lpToken.decimals)\n      .toString(),\n  };\n}\nexport function makeExitAmmCoverFeeLP(\n  fees: LoopringMap<OffchainFeeInfo>,\n  ammPoolSnapshot: AmmPoolSnapshot,\n  tokenMap: LoopringMap<TokenInfo>,\n  idIdx: LoopringMap<string>,\n  slippageTolerance = \"0.001\"\n) {\n  const lpTokenVol: TokenVolumeV3 = ammPoolSnapshot.lp;\n  const lpToken: TokenInfo = tokenMap[idIdx[lpTokenVol.tokenId]];\n  const quote: TokenVolumeV3 = ammPoolSnapshot.pooled[1];\n  const quoteToken: TokenInfo = tokenMap[idIdx[quote.tokenId]];\n  const quoteVolume = quote.volume;\n\n  const maxFee =\n    fees && fees[quoteToken.symbol] ? fees[quoteToken.symbol].fee : \"0\";\n  // feeLp = fee /snap.quote*snap.lp\n  const feeLp = fm\n    .toBig(maxFee)\n    .times(lpTokenVol.volume)\n    .div(quoteVolume)\n    .plus(1);\n  // feeLp = feeLp / (1-slippageTolerance)  slippageTolerance default is 0.001\n  const feeLpWithSlippage = feeLp.div(BIG1.minus(fm.toBig(slippageTolerance)));\n  return {\n    feeLp: feeLp.toString(),\n    feeLpWithSlippage: feeLpWithSlippage.toString(),\n    miniFeeLpWithSlippageVal: fm\n      .toBig(feeLpWithSlippage)\n      .div(\"1e\" + lpToken.decimals)\n      .toString(),\n    feeLpVal: fm\n      .toBig(feeLp)\n      .div(\"1e\" + lpToken.decimals)\n      .toString(),\n  };\n}\n\nexport function makeExitAmmPoolRequest2(\n  rawVal: string,\n  slippageTolerance: string,\n  owner: string,\n  fees: LoopringMap<OffchainFeeInfo>,\n  ammPoolSnapshot: AmmPoolSnapshot,\n  tokenMap: LoopringMap<TokenInfo>,\n  idIdx: LoopringMap<string>,\n  offchainId = 0,\n  minDecimal = 10\n) {\n  const lpTokenVol: TokenVolumeV3 = ammPoolSnapshot.lp;\n  const lpToken: TokenInfo = tokenMap[idIdx[lpTokenVol.tokenId]];\n\n  const burnedVol = fm\n    .toBig(rawVal)\n    .times(\"1e\" + lpToken.decimals)\n    .toFixed(0, 0);\n\n  const ratio = fm\n    .toBig(burnedVol)\n    .times(\"1e\" + minDecimal)\n    .div(lpTokenVol.volume)\n    .toFixed(0, 1);\n\n  const coinA: TokenVolumeV3 = ammPoolSnapshot.pooled[0];\n  const coinB: TokenVolumeV3 = ammPoolSnapshot.pooled[1];\n\n  const rest = BIG1.minus(fm.toBig(slippageTolerance));\n\n  const volA = toBig(ratio)\n    .times(coinA.volume)\n    .div(\"1e\" + minDecimal)\n    .times(rest)\n    .toFixed(0, 0);\n\n  const volB = toBig(ratio)\n    .times(coinB.volume)\n    .div(\"1e\" + minDecimal)\n    .times(rest)\n    .toFixed(0, 0);\n\n  const baseToken: TokenInfo = tokenMap[idIdx[coinA.tokenId]];\n  const quoteToken: TokenInfo = tokenMap[idIdx[coinB.tokenId]];\n\n  const maxFee =\n    fees && fees[quoteToken.symbol] ? fees[quoteToken.symbol].fee : \"0\";\n\n  const request: ExitAmmPoolRequest = {\n    owner,\n    poolAddress: ammPoolSnapshot.poolAddress,\n    exitTokens: {\n      unPooled: [\n        { tokenId: coinA.tokenId, volume: volA },\n        { tokenId: coinB.tokenId, volume: volB },\n      ],\n      burned: { tokenId: ammPoolSnapshot.lp.tokenId, volume: burnedVol },\n    },\n    storageId: offchainId,\n    maxFee,\n  };\n\n  return {\n    ratio,\n    volA,\n    volB,\n    volA_show: fm\n      .toBig(volA)\n      .div(\"1e\" + baseToken.decimals)\n      .toString(),\n    volB_show: fm\n      .toBig(volB)\n      .div(\"1e\" + quoteToken.decimals)\n      .toString(),\n    request,\n  };\n}\n\n/**\n * calcDefi\n * @param isJoin {boolean} true is join, false is exit\n * @param isInputSell {boolean} user input sell of buy\n * @param XOR<sellAmount,buyAmount> user input sell amount number (without decimals)\n * @param feeVol fee Volume from server-side (decimals)\n * @param marketInfo {DefiMarketInfo} DefiMarketInfo from sever-side\n * @param tokenSell {TokenInfo} token Config information\n * @param tokenBuy {TokenInfo} token Config information\n * @param buyTokenBalanceVol   buy Token Balance server-side (decimals)\n * @return {sellVol} sell Volume (decimals);\n * @return {buyVol} buy Volume (decimals);\n * @return {maxSellVol} max Sell Volume (decimals); please use ceil for view\n * @return {miniSellVol} min Sell Volume (decimals); please use round for view\n * @return {maxFeeBips} number maxFeeBips;\n * @return {isJoin} boolean;\n * @return {isInputSell} boolean;\n */\nexport function calcDefi({\n  isJoin,\n  isInputSell,\n  sellAmount,\n  buyAmount,\n  feeVol,\n  marketInfo,\n  tokenSell,\n  tokenBuy,\n  buyTokenBalanceVol,\n}: {\n  isJoin: boolean;\n  isInputSell: boolean;\n  feeVol: string;\n  marketInfo: DefiMarketInfo;\n  tokenSell: TokenInfo;\n  tokenBuy: TokenInfo;\n  buyTokenBalanceVol: string;\n} & XOR<{ sellAmount: string }, { buyAmount: string }>): {\n  sellVol: string;\n  buyVol: string;\n  maxSellVol: string;\n  maxFeeBips: number;\n  miniSellVol: string;\n  isJoin: boolean;\n  isInputSell: boolean;\n} {\n  /** isDeposit calc sellPrice & buyPrice */\n  const [sellPrice] = isJoin\n    ? [marketInfo.depositPrice]\n    : [marketInfo.withdrawPrice];\n\n  /** calc MiniSellVol & MaxSellVol**/\n  const dustToken = tokenBuy;\n\n  const minVolBuy = BigNumber.max(\n    fm.toBig(feeVol).times(2),\n    dustToken.orderAmounts.dust\n  );\n\n  const miniSellVol = BigNumber.max(\n    minVolBuy.div(sellPrice),\n    tokenSell.orderAmounts.dust\n  );\n  const maxSellVol = fm.toBig(buyTokenBalanceVol).div(sellPrice);\n  /** calc MiniSellVol & MaxSellVol END**/\n  // debugger;\n  /** View input calc sellVol & buyVol */\n  let sellVol, buyVol;\n  if (isInputSell) {\n    sellVol = fm\n      .toBig(sellAmount ? sellAmount : 0)\n      .times(\"1e\" + tokenSell.decimals);\n    buyVol = sellVol.times(sellPrice);\n  } else {\n    buyVol = fm\n      .toBig(buyAmount ? buyAmount : 0)\n      .times(\"1e\" + tokenBuy.decimals);\n    sellVol = buyVol.div(sellPrice);\n  }\n  /** View input calc sellVol & buyVol END */\n\n  /** calc current maxFeeBips **/\n  const maxFeeBips = Math.ceil(\n    fm.toBig(feeVol).times(10000).div(buyVol).toNumber()\n  );\n\n  return {\n    sellVol: sellVol.toString(),\n    buyVol: buyVol.toString(),\n    maxSellVol: maxSellVol.toString(),\n    isJoin,\n    isInputSell,\n    maxFeeBips,\n    miniSellVol: miniSellVol.toString(),\n  };\n}\n\n/**\n *\n * @param info\n * @param index\n * @param rule\n * @param balance\n * @param feeVol\n * @param sellToken\n * @param buyToken\n * @param sellAmount\n * @param currentPrice\n */\nexport function calcDual({\n  info,\n  index,\n  rule,\n  balance,\n  feeVol,\n  sellToken,\n  // dualViewInfo,\n  buyToken,\n  sellAmount,\n  dualMarket,\n}: {\n  sellAmount: string | undefined;\n  info: DualProductAndPrice;\n  index: DualIndex;\n  rule: DualRulesCoinsInfo;\n  balance: { [key: string]: DualBalance };\n  sellToken: TokenInfo;\n  buyToken: TokenInfo;\n\n  // dualViewInfo:R\n  feeVol?: string | undefined;\n  dualMarket: DefiMarketInfo;\n}): CalDualResult {\n  const sellVol = fm\n    .toBig(sellAmount ? sellAmount : 0)\n    .times(\"1e\" + sellToken.decimals);\n  let lessEarnVol,\n    lessEarnTokenSymbol,\n    greaterEarnVol,\n    greaterEarnTokenSymbol,\n    maxSellAmount,\n    miniSellVol,\n    feeTokenSymbol,\n    quota,\n    maxFeeBips;\n  const { base, currency } = info;\n  const settleRatio = fm\n    .toBig(info.profit)\n    .times(info.ratio)\n    .toFixed(6, BigNumber.ROUND_DOWN);\n  if (info.dualType === DUAL_TYPE.DUAL_BASE) {\n    lessEarnVol = toBig(settleRatio).plus(1).times(sellVol); //dualViewInfo.strike);\n    lessEarnTokenSymbol = sellToken.symbol;\n    greaterEarnVol = toBig(\n      toBig(settleRatio)\n        .plus(1)\n        .times(sellAmount ? sellAmount : 0)\n        .times(info.strike)\n        .toFixed(buyToken.precision, BigNumber.ROUND_CEIL)\n    ).times(\"1e\" + buyToken.decimals);\n    // myLog('greaterEarnVol',toBig(settleRatio).plus(1).times(sellAmount ?sellAmount: 0)\n    // \t.times(info.strike).toFixed(buyToken.precision,BigNumber.ROUND_CEIL).toString(), greaterEarnVol.toString())\n    greaterEarnTokenSymbol = buyToken.symbol;\n    miniSellVol = BigNumber.max(\n      dualMarket.baseLimitAmount,\n      toBig(rule.baseMin).times(\"1e\" + sellToken.decimals)\n    ); // rule.baseMin;\n    quota = BigNumber.min(info.baseSize, balance ? balance[base]?.free : 0);\n    // quota = BigNumber.min(100, balance ? balance[ base ]?.free : 0)\n    maxSellAmount = BigNumber.min(rule.baseMax ? rule.baseMax : 0, quota);\n    feeTokenSymbol = buyToken.symbol;\n    maxFeeBips = 5;\n    //info.dualPrice.dualBid[ 0 ].baseQty;\n  } else {\n    lessEarnVol = toBig(\n      toBig(settleRatio)\n        .plus(1)\n        .times(sellAmount ? sellAmount : 0)\n        // .times(1 + info.ratio)\n        .div(info.strike)\n        .toFixed(buyToken.precision, BigNumber.ROUND_CEIL)\n    ).times(\"1e\" + buyToken.decimals);\n\n    // sellVol.times(1 + info.ratio).div(dualViewInfo.strike); //.times(1 + dualViewInfo.settleRatio);\n    lessEarnTokenSymbol = buyToken.symbol;\n    greaterEarnVol = toBig(settleRatio).plus(1).times(sellVol);\n    //.div(dualViewInfo.strike);\n    greaterEarnTokenSymbol = sellToken.symbol;\n    miniSellVol = BigNumber.max(\n      dualMarket.quoteLimitAmount,\n      toBig(rule.currencyMin).times(\"1e\" + sellToken.decimals)\n    ); // rule.baseMin;\n    quota = BigNumber.min(\n      toBig(info.baseSize).times(info.strike).toString(),\n      balance[currency].free\n    );\n    maxSellAmount = BigNumber.min(rule.currencyMax, quota);\n    /** calc current maxFeeBips **/\n    feeTokenSymbol = buyToken.symbol;\n    maxFeeBips = 5;\n  }\n  myLog(\n    \"settleRatio\",\n    settleRatio,\n    lessEarnVol.toString(),\n    greaterEarnVol.toString(),\n    \"strike\",\n    info.strike\n  );\n  return {\n    quota: quota.toString(),\n    sellVol: sellVol.toString(),\n    lessEarnVol: lessEarnVol.toString(),\n    lessEarnTokenSymbol,\n    greaterEarnVol: greaterEarnVol.toString(),\n    greaterEarnTokenSymbol,\n    miniSellVol: miniSellVol.toString(),\n    sellToken,\n    maxSellAmount: maxSellAmount ? maxSellAmount?.toString() : \"\",\n    maxFeeBips: maxFeeBips,\n    // dualViewInfo: dualViewInfo as unknown as R,\n    feeVol,\n    feeTokenSymbol,\n  };\n}\n\n/**\n *\n * @param info  CEX_MARKET\n * @param index\n * @param rule\n * @param balance\n * @param feeVol\n * @param sellToken\n * @param buyToken\n * @param sellAmount\n * @param currentPrice\n */\nexport function calcDex({\n  info,\n  input,\n  sell,\n  buy,\n  isAtoB,\n  marketArr,\n  tokenMap,\n  marketMap,\n  depth,\n  feeBips,\n}: {\n  info: CEX_MARKET;\n  input: string;\n  sell: string;\n  buy: string;\n  isAtoB: boolean;\n  marketArr: string[];\n  tokenMap: LoopringMap<TokenInfo>;\n  marketMap: LoopringMap<MarketInfo>;\n  depth: DepthData;\n  feeBips: string;\n}): CexResult | undefined {\n  const sellToken = tokenMap[sell];\n  const buyToken = tokenMap[buy];\n  const reserveInfo = getReserveInfo(sell, buy, marketArr, tokenMap, marketMap);\n  if (!reserveInfo) {\n    throw {\n      message: ConnectorError.CEX_NO_PRODUCT,\n      msg: ConnectorError.CEX_NO_PRODUCT,\n      code: LoopringErrorCode.CEX_NO_PRODUCT,\n    };\n  }\n  const { isReverse } = reserveInfo;\n  let sellVol, buyVol, amountB, amountS, exceedDepth;\n  if (isAtoB) {\n    sellVol = input;\n    amountS = fm.toBig(input ? input : 0).times(\"1e\" + sellToken.decimals);\n    const amountInWei = amountS;\n    if (isEmpty(depth.bids_amtTotal) || isEmpty(depth.asks_volTotal)) {\n      throw {\n        message: ConnectorError.CEX_NO_DEPTH_ERROR,\n        msg: ConnectorError.CEX_NO_DEPTH_ERROR,\n        code: LoopringErrorCode.CEX_NO_DEPTH_ERROR,\n      };\n    } else {\n      if (!isReverse) {\n        exceedDepth = fm.toBig(amountInWei).gt(fm.toBig(depth.bids_amtTotal));\n        // console.log('3 amountInWei:', amountInWei, ' bids_amtTotal:', depth.bids_amtTotal)\n      } else {\n        exceedDepth = fm.toBig(amountInWei).gt(fm.toBig(depth.asks_volTotal));\n        // console.log('4 amountInWei:', amountInWei, ' asks_volTotal:', depth.asks_volTotal)\n      }\n      if (exceedDepth) {\n        buyVol = undefined;\n        amountB = undefined;\n      } else {\n        buyVol = getOutputOrderbook(\n          input,\n          sellToken,\n          buyToken,\n          feeBips,\n          isAtoB,\n          isReverse,\n          depth\n        ).toString();\n        amountB = fm.toBig(buyVol ?? 0).times(\"1e\" + buyToken.decimals);\n      }\n    }\n  } else {\n    buyVol = input;\n    amountB = fm.toBig(input ? input : 0).times(\"1e\" + buyToken.decimals);\n\n    if (isEmpty(depth.bids_volTotal) || isEmpty(depth.asks_amtTotal)) {\n      throw {\n        message: ConnectorError.CEX_NO_DEPTH_ERROR,\n        msg: ConnectorError.CEX_NO_DEPTH_ERROR,\n        code: LoopringErrorCode.CEX_NO_DEPTH_ERROR,\n      };\n    } else {\n      // const amountInWei = amountB;\n      if (!isReverse) {\n        exceedDepth = amountB.gt(fm.toBig(depth.bids_volTotal));\n      } else {\n        exceedDepth = amountB.gt(fm.toBig(depth.asks_amtTotal));\n      }\n      if (exceedDepth) {\n        sellVol = undefined;\n        amountS = undefined;\n      } else {\n        const outputOrderbook = getOutputOrderbook(\n          input,\n          sellToken,\n          buyToken,\n          feeBips,\n          isAtoB,\n          isReverse,\n          depth\n        );\n        sellVol = fm.toBig(toWEI(tokenMap, sell, outputOrderbook)).toString();\n        amountS = fm.toBig(sellVol ?? 0).times(\"1e\" + sellToken.decimals);\n      }\n    } // console.log(`b2a(input:${input}) exceedDepth:${exceedDepth} amountB:${amountB}`)\n  }\n  return {\n    feeBips,\n    info,\n    isAtoB,\n    isReverse,\n    sellVol,\n    buyVol,\n    amountB: amountB?.toString(),\n    amountS: amountS?.toString(),\n    exceedDepth,\n  };\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import { BigNumber } from \"ethers\";\nimport { BigInteger } from \"jsbn\";\n\nexport class field {\n  // Fq is the base field of Jubjub\n  static SNARK_SCALAR_FIELD = BigNumber.from(\"21888242871839275222246405745257275088548364400416034343698204186575808495617\")\n\n  // Fr is the scalar field of Jubjub\n  static FR_ORDER = BigNumber.from(\"21888242871839275222246405745257275088614511777268538073601725287587578984328\")\n}\n\n// A class for field elements in FQ. Wrap a number in this class,\n// and it becomes a field element.\nexport class FQ {\n  public m: BigNumber;\n  public n: BigNumber;\n\n  constructor(n: BigNumber, field_modulus = field.SNARK_SCALAR_FIELD) {\n    this.m = field_modulus;\n    this.n = n.mod(this.m);\n  }\n\n  //\n  // Use this.n as other\n  //\n\n  add(other: BigNumber) {\n    const on = other\n    const n = (this.n.add(on)).mod(this.m)\n    return new FQ(n, this.m)\n  }\n\n  mul(other: BigNumber) {\n    const on = other\n    const n = this.n.mul(on).mod(this.m)\n    return new FQ(n, this.m)\n  }\n\n  sub(other: BigNumber) {\n    const on = other\n    let new_n: BigNumber;\n    if (this.n.gte(on)) {\n      new_n = (this.n.sub(on)).mod(this.m)\n    } else {\n      new_n = (this.n.sub(on).add(this.m)).mod(this.m)\n    }\n    return new FQ(new_n, this.m)\n  }\n\n  div(other: BigNumber) {\n    const on_c = other\n    const m_c = this.m\n    const two_c = BigNumber.from(\"2\")\n    const on_power_c = modulo(on_c, m_c.sub(two_c), m_c)\n    const n_on_power_remainder = this.n.mul(on_power_c).mod(this.m)\n\n    return new FQ(n_on_power_remainder, this.m)\n  }\n\n  static one(modulus: BigNumber = field.SNARK_SCALAR_FIELD) {\n    return new FQ(BigNumber.from(\"1\"), modulus)\n  }\n\n  static zero(modulus: BigNumber = field.SNARK_SCALAR_FIELD) {\n    return new FQ(BigNumber.from(\"0\"), modulus)\n  }\n\n}\n\nexport function modulo(n: BigNumber, p: BigNumber, m: BigNumber) {\n  const n_ = new BigInteger(n.toString())\n  const p_ = new BigInteger(p.toString())\n  const m_ = new BigInteger(m.toString())\n\n  // console.log(\"modulo\", n_.toString(), p_.toString(), m_.toString());\n  const result = n_.modPow(p_, m_)\n  // console.log(n_.toString(), p_.toString(), m_.toString(), result.toString())\n  return BigNumber.from(result.toString())\n}","/*\nThis module implements the extended twisted edwards and extended affine coordinates\ndescribed in the paper \"Twisted Edwards Curves Revisited\":\n\n - https://iacr.org/archive/asiacrypt2008/53500329/53500329.pdf\n   Huseyin Hisil, Kenneth Koon-Ho Wong, Gary Carter, and Ed Dawson\n\n        Information Security Institute,\n        Queensland University of Technology, QLD, 4000, Australia\n        {h.hisil, kk.wong, g.carter, e.dawson}@qut.edu.au\n\nBy using the extended coordinate system we can avoid expensive modular exponentiation\ncalls, for example - a scalar multiplication call (or multiple...) may perform only\none 3d->2d projection at the point where affine coordinates are necessary, and every\nintermediate uses a much faster form.\n\n# XXX: none of these functions are constant time, they should not be used interactively!\n*/\nimport { BigNumber } from \"ethers\";\nimport { field, FQ } from \"./field\";\n\nexport class jubjub {\n  static JUBJUB_Q = field.SNARK_SCALAR_FIELD\n  static JUBJUB_E = BigNumber.from(\"21888242871839275222246405745257275088614511777268538073601725287587578984328\")\n  static JUBJUB_C = BigNumber.from(\"8\")  // Cofactor\n\n  static JUBJUB_L = jubjub.JUBJUB_E.div(jubjub.JUBJUB_C)  // L*B = 0, and (2^C)*L == #E\n  static JUBJUB_A = BigNumber.from(\"168700\") // Coefficient A\n  static JUBJUB_D = BigNumber.from(\"168696\") // Coefficient D\n}\n\nexport class Point {\n  public x: FQ\n  public y: FQ\n\n  constructor(x: FQ, y: FQ) {\n    this.x = x\n    this.y = y\n  }\n\n  static generate() {\n    const xBigInt = BigNumber.from(\"16540640123574156134436876038791482806971768689494387082833631921987005038935\")\n    const yBigInt = BigNumber.from(\"20819045374670962167435360035096875258406992893633759881276124905556507972311\")\n    const point = new Point(new FQ(xBigInt), new FQ(yBigInt))\n    return point\n  }\n\n  mul(scaler: BigNumber) {\n    let p = new Point(this.x, this.y)\n    let a = Point.infinity()\n    let i = 0\n\n    while (!scaler.eq(BigNumber.from(\"0\"))) {\n      const bitwiseAnd = scaler.and(BigNumber.from(\"1\"))\n      if (!bitwiseAnd.eq(BigNumber.from(\"0\"))) {\n        a = a.add(p)\n      }\n      let copyP1 = new Point(p.x, p.y)\n      let copyP2 = new Point(p.x, p.y)\n      p = copyP1.add(copyP2)\n      scaler = scaler.div(BigNumber.from(\"2\"))\n      // console.log(i + \" scaler\", scaler.toString())\n      i = i + 1\n    }\n    return a\n  }\n\n  add(other: Point) {\n    if (this.x.n.eq(BigNumber.from(\"0\")) && this.y.n.eq(BigNumber.from(\"0\"))) {\n      return other\n    }\n    const u1 = this.x\n    const v1 = this.y\n    const u2 = other.x\n    const v2 = other.y\n\n    const u3_tmp0 = (u1.mul(v2.n)).add(v1.mul(u2.n).n)\n    const u3_tmp1 = u1.mul(u2.n).mul(v1.n).mul(v2.n).mul(jubjub.JUBJUB_D)\n    const u3_tmp2 = FQ.one().add(u3_tmp1.n)\n\n    const u3 = u3_tmp0.div(u3_tmp2.n)\n\n    const v3_tmp0 = v1.mul(v2.n)\n    const v3_tmp1 = u1.mul(u2.n).mul(jubjub.JUBJUB_A)\n    const v3_tmp3 = v3_tmp0.sub(v3_tmp1.n)  \n    const v3_tmp5 = FQ.one().sub(u3_tmp1.n)\n\n    const v3 = v3_tmp3.div(v3_tmp5.n)\n\n    return new Point(u3, v3)\n  }\n\n  static infinity() {\n    return new Point(new FQ(BigNumber.from(\"0\")), new FQ(BigNumber.from(\"1\")))\n  }\n}\n","import sha256 from \"crypto-js/sha256\";\nimport * as abi from \"ethereumjs-abi\";\nimport * as sigUtil from \"eth-sig-util\";\nimport { EIP712Message, EIP712TypedData, EIP712Types } from \"eth-sig-util\";\n\nimport * as ethUtil from \"ethereumjs-util\";\n\nimport BN from \"bn.js\";\n\nimport BigInteger from \"bignumber.js\";\nimport { BigNumber } from \"ethers\";\n\nimport { bnToBufWithFixedLength } from \"./poseidon/eddsa\";\nimport { EDDSAUtil } from \"./poseidon/EDDSAUtil\";\nimport { field } from \"./poseidon/field\";\nimport { permunation, PoseidonParams } from \"./poseidon/permutation\";\n\nimport * as fm from \"../../utils/formatter\";\nimport { toBig, toHex } from \"../../utils/formatter\";\n\nimport { ChainId, ConnectorNames } from \"../../defs/web3_defs\";\n\nimport {\n  AmmPoolRequestPatch,\n  ExitAmmPoolRequest,\n  JoinAmmPoolRequest,\n  NFTMintRequestV3,\n  NFTWithdrawRequestV3,\n  OffChainWithdrawalRequestV3,\n  OriginNFTTransferRequestV3,\n  OriginTransferRequestV3,\n  PublicKey,\n  UpdateAccountRequestV3,\n  NFTOrderRequestV3,\n  NFTTokenAmountInfo,\n  NFTTradeRequestV3,\n  SubmitOrderRequestV3,\n  DualOrderRequest,\n} from \"../../defs/loopring_defs\";\n\nimport Web3 from \"web3\";\nimport { myLog } from \"../../utils/log_tools\";\nimport { personalSign } from \"../base_api\";\nimport { CounterFactualInfo, IsMobile } from \"../../defs\";\n\nexport enum GetEcDSASigType {\n  HasDataStruct,\n  WithoutDataStruct,\n  Contract,\n}\n\nconst MIN_NFT_TOKENID = 32768;\n\nconst SNARK_SCALAR_FIELD = new BigInteger(\n  \"21888242871839275222246405745257275088548364400416034343698204186575808495617\",\n  10\n);\n\nexport interface KeyPairParams {\n  web3: any;\n  address: string;\n  walletType: ConnectorNames;\n  keySeed: string;\n  chainId: ChainId;\n  accountId?: number;\n  counterFactualInfo?: CounterFactualInfo;\n  isMobile?: boolean;\n}\nexport function generatePrivateKey(result: {\n  sig: string;\n  counterFactualInfo: any;\n  error: any;\n}) {\n  if (!result.error) {\n    // myLog(\"sig:\", result.sig);\n    const seedBuff = ethUtil.sha256(fm.toBuffer(result.sig));\n    // myLog(`seedBuff.toString('hex') ${seedBuff.toString('hex')}`)\n    const seed = BigNumber.from(\"0x\" + seedBuff.toString(\"hex\"));\n    // myLog(`seed ${seed.toString()}`)\n    const bitIntDataItems = bnToBufWithFixedLength(seed.toString(), 32);\n    // myLog(`bigIntData ${bitIntDataItems}`)\n    const keyPair = EDDSAUtil.generateKeyPair(bitIntDataItems);\n    // myLog(\"keyPair\", keyPair)\n\n    const formatedPx = fm.formatEddsaKey(\n      fm.toHex(fm.toBig(keyPair.publicKeyX))\n    );\n    const formatedPy = fm.formatEddsaKey(\n      fm.toHex(fm.toBig(keyPair.publicKeyY))\n    );\n    const sk = toHex(toBig(keyPair.secretKey));\n\n    return {\n      keyPair,\n      formatedPx,\n      formatedPy,\n      sk,\n      counterFactualInfo: result.counterFactualInfo,\n    };\n  } else {\n    console.log(\"generateKeyPair personalSign error\", result.error);\n    throw Error(result.error);\n  }\n}\nexport async function generateKeyPair(\n  {\n    web3,\n    address,\n    walletType,\n    keySeed,\n    chainId,\n    accountId,\n    counterFactualInfo,\n    isMobile,\n  }: KeyPairParams,\n  publicKey: { x: string; y: string } | undefined = undefined\n) {\n  // LOG: for signature\n  // console.log(\n  //   \"personalSign ->\",\n  //   \"counterFactualInfo\",\n  //   counterFactualInfo,\n  //   \"keySeed\",\n  //   keySeed,\n  //   \"walletType\",\n  //   walletType,\n  //   \"publicKey from sever side \",\n  //   publicKey\n  // );\n  const result: any = await personalSign(\n    web3,\n    address,\n    \"\",\n    keySeed,\n    walletType,\n    chainId,\n    accountId,\n    counterFactualInfo,\n    isMobile === undefined ? IsMobile.any() : isMobile\n  );\n  try {\n    let { keyPair, formatedPx, formatedPy, sk, counterFactualInfo } =\n      generatePrivateKey(result);\n\n    if (\n      publicKey &&\n      result.sig.length > 3 &&\n      publicKey.x &&\n      publicKey.y &&\n      (!fm.toBig(formatedPx).eq(fm.toBig(publicKey.x)) ||\n        !fm.toBig(formatedPy).eq(fm.toBig(publicKey.y)))\n    ) {\n      let value = result.sig.split(\"\");\n      let end = value.splice(result.sig.length - 2, 2).join(\"\");\n      end = end == \"1c\" ? \"01\" : \"1c\";\n      result.sig = value.concat(end.split(\"\")).join(\"\");\n      let newValue = generatePrivateKey(result);\n      // LOG: for signature\n      console.log(\n        \"personalSign ->\",\n        \"publicKey calc by sign\",\n        \"x\",\n        formatedPx,\n        \"y\",\n        formatedPy,\n        \"publicKey from server\",\n        publicKey,\n        \"personalSign again->\",\n        \"publicKey calc by sign\",\n        \"x\",\n        end,\n        newValue.formatedPx,\n        \"y\",\n        newValue.formatedPy\n      );\n      return {\n        keyPair: newValue.keyPair,\n        formatedPx: newValue.formatedPx,\n        formatedPy: newValue.formatedPy,\n        sk: newValue.sk,\n        counterFactualInfo,\n      };\n    } else {\n      return { keyPair, formatedPx, formatedPy, sk, counterFactualInfo };\n    }\n  } catch (error) {\n    throw Error(error as any);\n  }\n}\n\nconst makeRequestParamStr = (request: Map<string, any>) => {\n  const arrObj = Array.from(request);\n  arrObj.sort(function (a, b) {\n    return a[0].localeCompare(b[0]);\n  });\n  const orderedMap = new Map(arrObj.map((i) => [i[0], i[1]]));\n\n  const paramlist: Array<string> = [];\n\n  const keys = Object.keys(Object.fromEntries(orderedMap));\n\n  if (keys) {\n    keys.forEach((key: string) => {\n      const value = request.get(key);\n      if (value !== undefined && value !== \"\")\n        paramlist.push(`${key}=${value}`);\n    });\n  }\n\n  // force to change encode ',' due to different encode rules between server and client\n  return encodeURIComponent(paramlist.join(\"&\")).replace(/%2C/g, \"%252C\");\n};\n\n//submitOrderV3\nconst genSigWithPadding = (PrivateKey: string | undefined, hash: any) => {\n  const signature = EDDSAUtil.sign(PrivateKey, hash);\n\n  let signatureRx_Hex = fm.clearHexPrefix(fm.toHex(fm.toBN(signature.Rx)));\n  if (signatureRx_Hex.length < 64) {\n    const padding = new Array(64 - signatureRx_Hex.length).fill(0);\n    signatureRx_Hex = padding.join(\"\").toString() + signatureRx_Hex;\n  }\n\n  let signatureRy_Hex = fm.clearHexPrefix(fm.toHex(fm.toBN(signature.Ry)));\n  if (signatureRy_Hex.length < 64) {\n    const padding = new Array(64 - signatureRy_Hex.length).fill(0);\n    signatureRy_Hex = padding.join(\"\").toString() + signatureRy_Hex;\n  }\n\n  let signatureS_Hex = fm.clearHexPrefix(fm.toHex(fm.toBN(signature.s)));\n  if (signatureS_Hex.length < 64) {\n    const padding = new Array(64 - signatureS_Hex.length).fill(0);\n    signatureS_Hex = padding.join(\"\").toString() + signatureS_Hex;\n  }\n\n  const result = \"0x\" + signatureRx_Hex + signatureRy_Hex + signatureS_Hex;\n  // myLog(\"signature result\", result)\n  return result;\n};\n\nconst makeObjectStr = (request: Map<string, any>) => {\n  const jsonTxt = JSON.stringify(Object.fromEntries(request));\n  return encodeURIComponent(jsonTxt).replace(/[!'()]/g, escape); //replace(/'/ig, \"%27\")\n};\n\nexport function getEdDSASig(\n  method: string,\n  basePath: string,\n  api_url: string,\n  requestInfo: any,\n  PrivateKey: string | undefined\n) {\n  let params = undefined;\n\n  method = method.toUpperCase().trim();\n\n  if (method === \"GET\" || method === \"DELETE\") {\n    params = makeRequestParamStr(requestInfo);\n  } else if (method === \"POST\" || method === \"PUT\") {\n    params = makeObjectStr(requestInfo);\n  } else {\n    throw new Error(`${method} is not supported yet!`);\n  }\n\n  const uri = encodeURIComponent(`${basePath}${api_url}`);\n\n  const message = `${method}&${uri}&${params}`;\n  // LOG: for signature\n  myLog(\"getEdDSASig\", message);\n  let _hash: any = new BigInteger(sha256(message).toString(), 16);\n\n  let hash = _hash.mod(SNARK_SCALAR_FIELD).toFormat(0, 0, {});\n  // LOG: for signature\n  myLog(\"getEdDSASig hash\", message, \"_hash\", _hash, \"hash\", hash);\n\n  const sig = genSigWithPadding(PrivateKey, hash);\n\n  return sig;\n}\n\nexport function verifyEdDSASig(\n  hash: string,\n  input: { Rx: string; Ry: string; s: string }\n): Boolean {\n  return true;\n}\nexport const getEdDSASigWithPoseidon = (\n  inputs: any,\n  PrivateKey: string | undefined\n) => {\n  const p = field.SNARK_SCALAR_FIELD;\n  const poseidonParams = new PoseidonParams(\n    p,\n    inputs.length + 1,\n    6,\n    53,\n    \"poseidon\",\n    BigNumber.from(5),\n    null,\n    null,\n    128\n  );\n  let bigIntInputs: any;\n  bigIntInputs = [];\n  for (let i = 0; i < inputs.length; i++) {\n    const input = inputs[i];\n    bigIntInputs.push(BigNumber.from(input));\n  }\n  const hash = permunation.poseidon(bigIntInputs, poseidonParams);\n  // myLog(\"getEdDSASigWithPoseidon\", hash.toHexString(), bigIntInputs);\n  return {\n    hash,\n    result: genSigWithPadding(PrivateKey, hash),\n  };\n};\n\n/**\n * @description sign EIP712\n * @param web3\n * @param account\n * @param method\n * @param params\n * @returns {Promise.<*>}\n */\nexport async function signEip712(\n  web3: any,\n  account: string,\n  method: string,\n  params: any\n) {\n  const response: any = await new Promise((resolve) => {\n    web3.currentProvider?.sendAsync(\n      {\n        method,\n        params,\n        account,\n      },\n      function (err: any, result: any) {\n        if (err) {\n          resolve({ error: { message: err.message } });\n          return;\n        }\n\n        if (result.error) {\n          resolve({ error: { message: result.error.message } });\n          return;\n        }\n\n        resolve({ result: result.result });\n      }\n    );\n  });\n\n  if (response[\"result\"]) {\n    return response;\n  } else {\n    throw new Error(response[\"error\"][\"message\"]);\n  }\n}\n\nexport async function signEip712WalletConnect(\n  web3: any,\n  account: string,\n  typedData: any\n) {\n  try {\n    const response: any = await web3.currentProvider?.send(\n      \"eth_signTypedData\",\n      [account, typedData]\n    );\n\n    return response;\n  } catch (err) {\n    return { error: err as any };\n  }\n}\n\nexport async function getEcDSASig(\n  web3: any,\n  typedData: any,\n  address: string | undefined,\n  type: GetEcDSASigType,\n  chainId: ChainId,\n  accountId?: number,\n  pwd = \"\",\n  walletType?: ConnectorNames,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const msgParams = JSON.stringify(typedData);\n  const params = [address, msgParams];\n\n  let response: any,\n    hash: Buffer | string,\n    signEip712Result: any,\n    signature: any;\n  switch (type) {\n    case GetEcDSASigType.HasDataStruct:\n      response = await new Promise((resolve) => {\n        web3.currentProvider.send(\n          {\n            method: \"eth_signTypedData_v4\",\n            params,\n            address,\n          },\n          function (err: any, result: any) {\n            if (err) {\n              resolve({ error: { message: err.message } });\n            } else if (result?.error) {\n              resolve({ error: { message: result.error.message } });\n            } else {\n              resolve({ result: result.result });\n            }\n          }\n        );\n      });\n\n      if (!response[\"result\"]) {\n        throw new Error(response[\"error\"][\"message\"]);\n      }\n\n      return {\n        ecdsaSig: response.result,\n      };\n\n    case GetEcDSASigType.WithoutDataStruct:\n      hash = sigUtil.TypedDataUtils.sign(typedData);\n      hash = fm.toHex(hash);\n\n      // myLog('WithoutDataStruct hash:', hash)\n\n      if (!walletType) {\n        throw Error(\"no walletType set!\");\n      }\n\n      signature = await personalSign(\n        web3,\n        address,\n        pwd,\n        hash,\n        walletType,\n        chainId,\n        counterFactualInfo ? counterFactualInfo.accountId : undefined,\n        counterFactualInfo,\n        IsMobile.any()\n      );\n\n      if (signature?.sig) {\n        return {\n          ecdsaSig: signature.sig,\n          counterFactualInfo: signature.counterFactualInfo,\n        };\n      }\n      throw new Error(signature.error);\n    case GetEcDSASigType.Contract:\n      // TODO:\n      hash = sigUtil.TypedDataUtils.sign(typedData);\n      hash = fm.toHex(hash);\n      myLog(\"Contract Contract hash\", hash);\n\n      signEip712Result = await signEip712WalletConnect(\n        web3,\n        address as string,\n        msgParams\n      );\n\n      if (signEip712Result.error) {\n        throw Error(\"Contract sig error\");\n      }\n\n      return {\n        ecdsaSig: signEip712Result,\n      };\n    default:\n      break;\n  }\n  throw Error(\"getEcDSASig unsupported switch case:\" + type);\n}\n\nexport function convertPublicKey2(pk: PublicKey) {\n  // return new BN(EdDSA.pack(pk.x, pk.y), 16);\n  return new BN(EDDSAUtil.pack(pk.x, pk.y), 16);\n}\n\nexport function convertPublicKey(pk: PublicKey) {\n  const publicKeyX = fm.formatEddsaKey(fm.toHex(fm.toBig(pk.x)));\n  const publicKeyY = fm.formatEddsaKey(fm.toHex(fm.toBig(pk.y)));\n\n  // return new BN(EdDSA.pack(publicKeyX, publicKeyY), 16);\n  return new BN(EDDSAUtil.pack(publicKeyX, publicKeyY), 16);\n}\n\nexport function getUpdateAccountEcdsaTypedData(\n  data: UpdateAccountRequestV3,\n  chainId: ChainId\n) {\n  const message: any = {\n    owner: data.owner,\n    accountID: data.accountId,\n    feeTokenID: data.maxFee.tokenId,\n    maxFee: data.maxFee.volume,\n    publicKey: fm.addHexPrefix(convertPublicKey2(data.publicKey).toString(16)),\n    validUntil: data.validUntil,\n    nonce: data.nonce,\n  };\n\n  const typedData: EIP712TypedData = {\n    types: {\n      EIP712Domain: [\n        { name: \"name\", type: \"string\" },\n        { name: \"version\", type: \"string\" },\n        { name: \"chainId\", type: \"uint256\" },\n        { name: \"verifyingContract\", type: \"address\" },\n      ],\n      AccountUpdate: [\n        { name: \"owner\", type: \"address\" },\n        { name: \"accountID\", type: \"uint32\" },\n        { name: \"feeTokenID\", type: \"uint16\" },\n        { name: \"maxFee\", type: \"uint96\" },\n        { name: \"publicKey\", type: \"uint256\" },\n        { name: \"validUntil\", type: \"uint32\" },\n        { name: \"nonce\", type: \"uint32\" },\n      ],\n    },\n    primaryType: \"AccountUpdate\",\n    domain: {\n      name: \"Loopring Protocol\",\n      version: \"3.6.0\",\n      chainId,\n      verifyingContract: data.exchange,\n    },\n    message: message,\n  };\n\n  return typedData;\n}\n\nexport async function signUpdateAccountWithDataStructure(\n  web3: Web3,\n  bodyParams: UpdateAccountRequestV3,\n  chainId: ChainId,\n  walletType: ConnectorNames,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData = getUpdateAccountEcdsaTypedData(bodyParams, chainId);\n  // myLog('typedData:', typedData)\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    bodyParams.owner,\n    GetEcDSASigType.HasDataStruct,\n    chainId,\n    accountId,\n    \"\",\n    ConnectorNames.Unknown,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport async function signUpdateAccountWithoutDataStructure(\n  web3: Web3,\n  bodyParams: UpdateAccountRequestV3,\n  chainId: ChainId,\n  walletType: ConnectorNames,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData: any = getUpdateAccountEcdsaTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    bodyParams.owner,\n    GetEcDSASigType.WithoutDataStruct,\n    chainId,\n    accountId,\n    \"\",\n    walletType,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport async function signUpdateAccountWithDataStructureForContract(\n  web3: Web3,\n  bodyParams: UpdateAccountRequestV3,\n  chainId: ChainId,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData = getUpdateAccountEcdsaTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    bodyParams.owner,\n    GetEcDSASigType.Contract,\n    chainId,\n    accountId,\n    \"\",\n    ConnectorNames.Unknown,\n    counterFactualInfo\n  );\n  return result;\n}\n\n// withdraw\nexport function get_EddsaSig_OffChainWithdraw(\n  request: OffChainWithdrawalRequestV3,\n  eddsaKey: string\n) {\n  const onchainDataHash = abi\n    .soliditySHA3(\n      [\"uint256\", \"address\", \"bytes\"],\n      [\n        request.minGas,\n        new BN(fm.clearHexPrefix(request.to), 16),\n        ethUtil.toBuffer(request.extraData),\n      ]\n    )\n    .slice(0, 20);\n\n  const orderHashStr = fm.addHexPrefix(onchainDataHash.toString(\"hex\"));\n\n  const inputs = [\n    new BN(ethUtil.toBuffer(request.exchange)).toString(),\n    request.accountId,\n    request.token.tokenId,\n    request.token.volume,\n    request.maxFee.tokenId,\n    request.maxFee.volume,\n    orderHashStr,\n    request.validUntil,\n    request.storageId,\n  ];\n\n  return getEdDSASigWithPoseidon(inputs, eddsaKey);\n}\n\nexport function getOrderHash(request: SubmitOrderRequestV3) {\n  const p = field.SNARK_SCALAR_FIELD;\n  const poseidonParams = new PoseidonParams(\n    p,\n    12,\n    6,\n    53,\n    \"poseidon\",\n    BigNumber.from(5),\n    null,\n    null,\n    128\n  );\n\n  const inputs = [\n    new BN(ethUtil.toBuffer(request.exchange)).toString(),\n    request.storageId,\n    request.accountId,\n    request.sellToken.tokenId,\n    request.buyToken.tokenId,\n    request.sellToken.volume,\n    request.buyToken.volume,\n    request.validUntil,\n    request.maxFeeBips,\n    request.fillAmountBOrS ? 1 : 0,\n    new BN(ethUtil.toBuffer(request.taker)).toString(),\n  ];\n  let bigIntInputs: any;\n  bigIntInputs = [];\n  for (let i = 0; i < inputs.length; i++) {\n    const input = inputs[i];\n    bigIntInputs.push(BigNumber.from(input));\n  }\n  const hash = permunation.poseidon(bigIntInputs, poseidonParams);\n  let hashInHex = hash.toHexString();\n  return hashInHex;\n}\n\nexport function getWithdrawTypedData(\n  data: OffChainWithdrawalRequestV3,\n  chainId: ChainId\n): EIP712TypedData {\n  const message = {\n    owner: data.owner,\n    accountID: data.accountId,\n    tokenID: data.token.tokenId,\n    amount: data.token.volume,\n    feeTokenID: data.maxFee.tokenId,\n    maxFee: data.maxFee.volume,\n    to: data.to,\n    extraData: data.extraData ? data.extraData : \"\",\n    minGas: data.minGas,\n    validUntil: data.validUntil,\n    storageID: data.storageId,\n  };\n\n  const typedData: EIP712TypedData = {\n    types: {\n      EIP712Domain: [\n        { name: \"name\", type: \"string\" },\n        { name: \"version\", type: \"string\" },\n        { name: \"chainId\", type: \"uint256\" },\n        { name: \"verifyingContract\", type: \"address\" },\n      ],\n      Withdrawal: [\n        { name: \"owner\", type: \"address\" },\n        { name: \"accountID\", type: \"uint32\" },\n        { name: \"tokenID\", type: \"uint16\" },\n        { name: \"amount\", type: \"uint96\" },\n        { name: \"feeTokenID\", type: \"uint16\" },\n        { name: \"maxFee\", type: \"uint96\" },\n        { name: \"to\", type: \"address\" },\n        { name: \"extraData\", type: \"bytes\" },\n        { name: \"minGas\", type: \"uint256\" },\n        { name: \"validUntil\", type: \"uint32\" },\n        { name: \"storageID\", type: \"uint32\" },\n      ],\n    },\n    primaryType: \"Withdrawal\",\n    domain: {\n      name: \"Loopring Protocol\",\n      version: \"3.6.0\",\n      chainId: chainId,\n      verifyingContract: data.exchange,\n    },\n    message: message,\n  };\n  return typedData;\n}\n\nexport async function signOffchainWithdrawWithDataStructure(\n  web3: Web3,\n  owner: string,\n  bodyParams: OffChainWithdrawalRequestV3,\n  chainId: ChainId,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData = getWithdrawTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.HasDataStruct,\n    chainId,\n    accountId,\n    \"\",\n    ConnectorNames.Unknown,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport async function signOffchainWithdrawWithoutDataStructure(\n  web3: Web3,\n  owner: string,\n  bodyParams: OffChainWithdrawalRequestV3,\n  chainId: ChainId,\n  walletType: ConnectorNames,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData: any = getWithdrawTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.WithoutDataStruct,\n    chainId,\n    accountId,\n    \"\",\n    walletType,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport async function signOffchainWithdrawWithDataStructureForContract(\n  web3: Web3,\n  owner: string,\n  bodyParams: OffChainWithdrawalRequestV3,\n  chainId: ChainId,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData = getWithdrawTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.Contract,\n    chainId,\n    accountId,\n    \"\",\n    ConnectorNames.Unknown,\n    counterFactualInfo\n  );\n  return result;\n}\n\n//NFT Withdraw\nexport function get_EddsaSig_NFT_Withdraw(\n  request: NFTWithdrawRequestV3,\n  eddsaKey: string\n) {\n  const onchainDataHash = abi\n    .soliditySHA3(\n      [\"uint256\", \"address\", \"bytes\"],\n      [\n        request.minGas,\n        new BN(fm.clearHexPrefix(request.to), 16),\n        ethUtil.toBuffer(request.extraData),\n      ]\n    )\n    .slice(0, 20);\n\n  const orderHashStr = fm.addHexPrefix(onchainDataHash.toString(\"hex\"));\n\n  const inputs = [\n    new BN(ethUtil.toBuffer(request.exchange)).toString(),\n    request.accountId,\n    request.token.tokenId,\n    request.token.amount,\n    request.maxFee.tokenId,\n    request.maxFee.amount,\n    orderHashStr,\n    request.validUntil,\n    request.storageId,\n  ];\n\n  return getEdDSASigWithPoseidon(inputs, eddsaKey);\n}\n\nexport function getNftData(request: NFTMintRequestV3) {\n  const p = field.SNARK_SCALAR_FIELD;\n  const poseidonParams = new PoseidonParams(\n    p,\n    7,\n    6,\n    52,\n    \"poseidon\",\n    BigNumber.from(5),\n    null,\n    null,\n    128\n  );\n  const idNo0x = fm.clearHexPrefix(request.nftId);\n  let nftIdLo, nftIdHi;\n  if (idNo0x.length > 32) {\n    nftIdLo = new BN(idNo0x.substr(idNo0x.length - 32, 32), 16).toString(10);\n    nftIdHi = new BN(idNo0x.substr(0, idNo0x.length - 32), 16).toString(10);\n  } else {\n    nftIdLo = new BN(idNo0x.substr(0, idNo0x.length), 16).toString(10);\n    nftIdHi = 0;\n  }\n  myLog(\"nftIdLo\", nftIdLo, \"nftIdHi\", nftIdHi);\n\n  const inputs = [\n    request.minterAddress,\n    request.nftType,\n    request.tokenAddress,\n    nftIdLo,\n    nftIdHi,\n    request.royaltyPercentage,\n  ];\n\n  let bigIntInputs: any;\n  bigIntInputs = [];\n  for (let i = 0; i < inputs.length; i++) {\n    const input = inputs[i];\n    bigIntInputs.push(BigNumber.from(input));\n  }\n  const hash = permunation.poseidon(bigIntInputs, poseidonParams);\n  // myLog(\"get hasher *16 hash:\", hash);\n  return hash;\n}\n\nexport function getNFTMintTypedData(\n  data: NFTMintRequestV3,\n  chainId: ChainId,\n  web3: Web3\n): EIP712TypedData {\n  let nftId = data.nftId;\n  if (data.nftId.startsWith(\"0x\")) {\n    nftId = web3.utils.hexToNumberString(data.nftId);\n  }\n  const message = {\n    minterAddress: data.minterAddress,\n    toAccountId: data.toAccountId,\n    nftType: data.nftType.toString(),\n    amount: data.amount,\n    nftId: nftId,\n    nftAddress: data.tokenAddress,\n    feeTokenID: data.maxFee.tokenId,\n    maxFee: data.maxFee.amount,\n    validUntil: data.validUntil,\n    storageID: data.storageId,\n  };\n\n  const typedData: EIP712TypedData = {\n    types: {\n      EIP712Domain: [\n        { name: \"name\", type: \"string\" },\n        { name: \"version\", type: \"string\" },\n        { name: \"chainId\", type: \"uint256\" },\n        { name: \"verifyingContract\", type: \"address\" },\n      ],\n      Mint: [\n        { name: \"minterAddress\", type: \"address\" },\n        { name: \"toAccountId\", type: \"uint32\" },\n        { name: \"nftType\", type: \"string\" },\n        { name: \"amount\", type: \"uint96\" },\n        { name: \"nftId\", type: \"uint256\" },\n        { name: \"nftAddress\", type: \"address\" },\n        { name: \"feeTokenID\", type: \"uint16\" },\n        { name: \"maxFee\", type: \"uint96\" },\n        { name: \"validUntil\", type: \"uint32\" },\n        { name: \"storageID\", type: \"uint32\" },\n      ],\n    },\n    primaryType: \"Mint\",\n    domain: {\n      name: \"Loopring Protocol\",\n      version: \"3.6.0\",\n      chainId: chainId,\n      verifyingContract: data.exchange,\n    },\n    message: message,\n  };\n  return typedData;\n}\n\nexport function getNFTWithdrawTypedData(\n  data: NFTWithdrawRequestV3,\n  chainId: ChainId\n): EIP712TypedData {\n  const message = {\n    owner: data.owner,\n    accountID: data.accountId,\n    tokenID: data.token.tokenId,\n    amount: data.token.amount,\n    feeTokenID: data.maxFee.tokenId,\n    maxFee: data.maxFee.amount,\n    to: data.to,\n    extraData: data.extraData ? data.extraData : \"\",\n    minGas: data.minGas,\n    validUntil: data.validUntil,\n    storageID: data.storageId,\n  };\n\n  const typedData: EIP712TypedData = {\n    types: {\n      EIP712Domain: [\n        { name: \"name\", type: \"string\" },\n        { name: \"version\", type: \"string\" },\n        { name: \"chainId\", type: \"uint256\" },\n        { name: \"verifyingContract\", type: \"address\" },\n      ],\n      Withdrawal: [\n        { name: \"owner\", type: \"address\" },\n        { name: \"accountID\", type: \"uint32\" },\n        { name: \"tokenID\", type: \"uint16\" },\n        { name: \"amount\", type: \"uint96\" },\n        { name: \"feeTokenID\", type: \"uint16\" },\n        { name: \"maxFee\", type: \"uint96\" },\n        { name: \"to\", type: \"address\" },\n        { name: \"extraData\", type: \"bytes\" },\n        { name: \"minGas\", type: \"uint256\" },\n        { name: \"validUntil\", type: \"uint32\" },\n        { name: \"storageID\", type: \"uint32\" },\n      ],\n    },\n    primaryType: \"Withdrawal\",\n    domain: {\n      name: \"Loopring Protocol\",\n      version: \"3.6.0\",\n      chainId: chainId,\n      verifyingContract: data.exchange,\n    },\n    message: message,\n  };\n  return typedData;\n}\n\nexport async function signNFTWithdrawWithDataStructure(\n  web3: Web3,\n  owner: string,\n  bodyParams: NFTWithdrawRequestV3,\n  chainId: ChainId,\n  walletType: ConnectorNames,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData = getNFTWithdrawTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.HasDataStruct,\n    chainId,\n    accountId,\n    \"\",\n    ConnectorNames.Unknown,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport async function signNFTWithdrawWithoutDataStructure(\n  web3: Web3,\n  owner: string,\n  bodyParams: NFTWithdrawRequestV3,\n  chainId: ChainId,\n  walletType: ConnectorNames,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData: any = getNFTWithdrawTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.WithoutDataStruct,\n    chainId,\n    accountId,\n    \"\",\n    walletType,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport async function signNFTWithdrawWithDataStructureForContract(\n  web3: Web3,\n  owner: string,\n  bodyParams: NFTWithdrawRequestV3,\n  chainId: ChainId,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData = getNFTWithdrawTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.Contract,\n    chainId,\n    accountId,\n    \"\",\n    ConnectorNames.Unknown,\n    counterFactualInfo\n  );\n  return result;\n}\n\n//NFT Mint\nexport function get_EddsaSig_NFT_Mint(\n  request: NFTMintRequestV3,\n  eddsaKey: string\n) {\n  const inputs = [\n    new BN(ethUtil.toBuffer(request.exchange)).toString(),\n    request.minterId,\n    request.toAccountId,\n    getNftData(request),\n    request.amount,\n    request.maxFee.tokenId,\n    request.maxFee.amount,\n    request.validUntil,\n    request.storageId,\n  ];\n  return getEdDSASigWithPoseidon(inputs, eddsaKey);\n}\n\nexport function get_Is_Nft_Token(tokenId: number) {\n  return tokenId >= MIN_NFT_TOKENID;\n}\n\n// NFT Order\nexport function get_EddsaSig_NFT_Order(\n  request: NFTOrderRequestV3,\n  eddsaKey: string\n) {\n  let fillAmountBOrS = 0;\n  if (request.fillAmountBOrS) {\n    fillAmountBOrS = 1;\n  }\n  const inputs = [\n    new BN(ethUtil.toBuffer(request.exchange)).toString(),\n    request.storageId,\n    request.accountId,\n    request.sellToken?.tokenId ? request.sellToken.tokenId : \"\",\n    (request.buyToken as any)?.nftData\n      ? (request.buyToken as NFTTokenAmountInfo).nftData\n      : request.buyToken.tokenId,\n    request.sellToken?.amount ? request.sellToken.amount : 0,\n    request.buyToken?.amount ? request.buyToken.amount : 0,\n    request.validUntil,\n    request.maxFeeBips,\n    fillAmountBOrS,\n    new BN(ethUtil.toBuffer(request.taker)).toString(),\n  ];\n  return getEdDSASigWithPoseidon(inputs, eddsaKey);\n}\n\nexport function get_EddsaSig_Dual_Order(\n  request: DualOrderRequest,\n  eddsaKey: string\n) {\n  const inputs = [\n    new BN(ethUtil.toBuffer(request.exchange)).toString(),\n    request.storageId,\n    request.accountId,\n    request.sellToken.tokenId,\n    request.buyToken.tokenId,\n    request.sellToken.volume,\n    request.buyToken.volume,\n    request.validUntil,\n    request.maxFeeBips,\n    request.fillAmountBOrS ? 1 : 0,\n    0,\n  ];\n\n  return getEdDSASigWithPoseidon(inputs, eddsaKey);\n}\n\nexport async function signNFTMintWithDataStructure(\n  web3: Web3,\n  owner: string,\n  bodyParams: NFTMintRequestV3,\n  chainId: ChainId,\n  walletType: ConnectorNames,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData = getNFTMintTypedData(bodyParams, chainId, web3);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.HasDataStruct,\n    chainId,\n    accountId,\n    \"\",\n    ConnectorNames.Unknown,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport async function signNFTMintWithoutDataStructure(\n  web3: Web3,\n  owner: string,\n  bodyParams: NFTMintRequestV3,\n  chainId: ChainId,\n  walletType: ConnectorNames,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData: any = getNFTMintTypedData(bodyParams, chainId, web3);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.WithoutDataStruct,\n    chainId,\n    accountId,\n    \"\",\n    walletType,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport async function signNFTMintWithDataStructureForContract(\n  web3: Web3,\n  owner: string,\n  bodyParams: NFTMintRequestV3,\n  chainId: ChainId,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData = getNFTMintTypedData(bodyParams, chainId, web3);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.Contract,\n    chainId,\n    accountId,\n    \"\",\n    ConnectorNames.Unknown,\n    counterFactualInfo\n  );\n  return result;\n}\n\n// transfer\nexport function get_EddsaSig_Transfer(\n  request: OriginTransferRequestV3,\n  eddsaKey: string\n) {\n  const inputs = [\n    new BN(ethUtil.toBuffer(request.exchange)).toString(),\n    request.payerId,\n    request.payeeId,\n    request.token.tokenId,\n    request.token.volume,\n    request.maxFee.tokenId,\n    request.maxFee.volume,\n    new BN(ethUtil.toBuffer(request.payeeAddr)).toString(),\n    0,\n    0,\n    request.validUntil,\n    request.storageId,\n  ];\n  return getEdDSASigWithPoseidon(inputs, eddsaKey);\n}\nexport function getTransferOldTypedData(\n  data: OriginTransferRequestV3,\n  chainId: ChainId\n): EIP712TypedData {\n  const message = {\n    from: data.payerAddr,\n    to: data.payeeAddr,\n    tokenID: data.token.tokenId,\n    amount: data.token.volume,\n    feeTokenID: data.maxFee.tokenId,\n    maxFee: data.maxFee.volume,\n    validUntil: data.validUntil,\n    storageID: data.storageId,\n  };\n  const typedData: EIP712TypedData = {\n    types: {\n      EIP712Domain: [\n        { name: \"name\", type: \"string\" },\n        { name: \"version\", type: \"string\" },\n        { name: \"chainId\", type: \"uint256\" },\n        { name: \"verifyingContract\", type: \"address\" },\n      ],\n      Transfer: [\n        { name: \"from\", type: \"address\" },\n        { name: \"to\", type: \"address\" },\n        { name: \"tokenID\", type: \"uint16\" },\n        { name: \"amount\", type: \"uint96\" },\n        { name: \"feeTokenID\", type: \"uint16\" },\n        { name: \"maxFee\", type: \"uint96\" },\n        { name: \"validUntil\", type: \"uint32\" },\n        { name: \"storageID\", type: \"uint32\" },\n      ],\n    },\n    primaryType: \"Transfer\",\n    domain: {\n      name: \"Loopring Protocol\",\n      version: \"3.6.0\",\n      chainId: chainId,\n      verifyingContract: data.exchange,\n    },\n    message: message,\n  };\n  return typedData;\n}\n\nexport function getTransferTypedData(\n  data: OriginTransferRequestV3,\n  chainId: ChainId\n): EIP712TypedData {\n  const message = {\n    from: data.payerAddr,\n    to: data.payeeAddr,\n    tokenID: data.token.tokenId,\n    amount: data.token.volume,\n    feeTokenID: data.maxFee.tokenId,\n    maxFee: data.maxFee.volume,\n    validUntil: data.validUntil,\n    storageID: data.storageId,\n  };\n  const typedData: EIP712TypedData = {\n    types: {\n      EIP712Domain: [\n        { name: \"name\", type: \"string\" },\n        { name: \"version\", type: \"string\" },\n        { name: \"chainId\", type: \"uint256\" },\n        { name: \"verifyingContract\", type: \"address\" },\n      ],\n      Transfer: [\n        { name: \"from\", type: \"address\" },\n        { name: \"to\", type: \"address\" },\n        { name: \"tokenID\", type: \"uint16\" },\n        { name: \"amount\", type: \"uint96\" },\n        { name: \"feeTokenID\", type: \"uint16\" },\n        { name: \"maxFee\", type: \"uint96\" },\n        { name: \"validUntil\", type: \"uint32\" },\n        { name: \"storageID\", type: \"uint32\" },\n      ],\n    },\n    primaryType: \"Transfer\",\n    domain: {\n      name: \"Loopring Protocol\",\n      version: \"3.6.0\",\n      chainId: chainId,\n      verifyingContract: data.exchange,\n    },\n    message: message,\n  };\n  return typedData;\n}\n\nexport async function signTransferWithDataStructure(\n  web3: Web3,\n  owner: string,\n  bodyParams: OriginTransferRequestV3,\n  chainId: ChainId,\n  walletType: ConnectorNames,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData = getTransferTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.HasDataStruct,\n    chainId,\n    accountId,\n    \"\",\n    ConnectorNames.Unknown,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport async function signTransferWithoutDataStructure(\n  web3: Web3,\n  owner: string,\n  bodyParams: OriginTransferRequestV3,\n  chainId: ChainId,\n  walletType: ConnectorNames,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData: any = getTransferTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.WithoutDataStruct,\n    chainId,\n    accountId,\n    \"\",\n    walletType,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport async function signTransferWithDataStructureForContract(\n  web3: Web3,\n  owner: string,\n  bodyParams: OriginTransferRequestV3,\n  chainId: ChainId,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData = getTransferTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.Contract,\n    chainId,\n    accountId,\n    \"\",\n    ConnectorNames.Unknown,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport function get_EddsaSig_NFT_Transfer(\n  request: OriginNFTTransferRequestV3,\n  eddsaKey: string\n) {\n  const inputs = [\n    new BN(ethUtil.toBuffer(request.exchange)).toString(),\n    request.fromAccountId,\n    request.toAccountId,\n    request.token.tokenId,\n    request.token.amount,\n    request.maxFee.tokenId,\n    request.maxFee.amount,\n    new BN(ethUtil.toBuffer(request.toAddress)).toString(),\n    0,\n    0,\n    request.validUntil,\n    request.storageId,\n  ];\n  return getEdDSASigWithPoseidon(inputs, eddsaKey);\n}\n\nexport function getNftTradeHash(request: NFTTradeRequestV3) {\n  const p = field.SNARK_SCALAR_FIELD;\n  const poseidonParams = new PoseidonParams(\n    p,\n    7,\n    6,\n    52,\n    \"poseidon\",\n    BigNumber.from(5),\n    null,\n    null,\n    128\n  );\n\n  const inputs = [\n    request.taker.accountId,\n    request.taker.sellToken.tokenId,\n    request.taker.storageId,\n    request.maker.accountId,\n    request.maker.sellToken.tokenId,\n    request.maker.storageId,\n  ];\n  let bigIntInputs: any;\n  bigIntInputs = [];\n  for (let i = 0; i < inputs.length; i++) {\n    const input = inputs[i];\n    bigIntInputs.push(BigNumber.from(input));\n  }\n  const hash = permunation.poseidon(bigIntInputs, poseidonParams);\n  let hashInHex = hash.toHexString();\n  return hashInHex;\n}\n\nexport function getNFTTransferTypedData(\n  data: OriginNFTTransferRequestV3,\n  chainId: ChainId\n): EIP712TypedData {\n  const message = {\n    from: data.fromAddress,\n    to: data.toAddress,\n    tokenID: data.token.tokenId,\n    amount: data.token.amount,\n    feeTokenID: data.maxFee.tokenId,\n    maxFee: data.maxFee.amount,\n    validUntil: data.validUntil,\n    storageID: data.storageId,\n  };\n  const typedData: EIP712TypedData = {\n    types: {\n      EIP712Domain: [\n        { name: \"name\", type: \"string\" },\n        { name: \"version\", type: \"string\" },\n        { name: \"chainId\", type: \"uint256\" },\n        { name: \"verifyingContract\", type: \"address\" },\n      ],\n      Transfer: [\n        { name: \"from\", type: \"address\" },\n        { name: \"to\", type: \"address\" },\n        { name: \"tokenID\", type: \"uint16\" },\n        { name: \"amount\", type: \"uint96\" },\n        { name: \"feeTokenID\", type: \"uint16\" },\n        { name: \"maxFee\", type: \"uint96\" },\n        { name: \"validUntil\", type: \"uint32\" },\n        { name: \"storageID\", type: \"uint32\" },\n      ],\n    },\n    primaryType: \"Transfer\",\n    domain: {\n      name: \"Loopring Protocol\",\n      version: \"3.6.0\",\n      chainId: chainId,\n      verifyingContract: data.exchange,\n    },\n    message: message,\n  };\n  return typedData;\n}\n\nexport async function signTNFTransferWithDataStructure(\n  web3: Web3,\n  owner: string,\n  bodyParams: OriginNFTTransferRequestV3,\n  chainId: ChainId,\n  walletType: ConnectorNames,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData = getNFTTransferTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.HasDataStruct,\n    chainId,\n    accountId,\n    \"\",\n    ConnectorNames.Unknown,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport async function signNFTTransferWithoutDataStructure(\n  web3: Web3,\n  owner: string,\n  bodyParams: OriginNFTTransferRequestV3,\n  chainId: ChainId,\n  walletType: ConnectorNames,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData: any = getNFTTransferTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.WithoutDataStruct,\n    chainId,\n    accountId,\n    \"\",\n    walletType,\n    counterFactualInfo\n  );\n  return result;\n}\n\n// export async function signNFTTransferWithoutDataStructure(web3: Web3, owner: string, bodyParams: OriginTransferRequestV3,\n//                                                        chainId: ChainId, walletType: ConnectorNames) {\n//   const typedData: any = getTransferTypedData(bodyParams, chainId)\n//   const result = await getEcDSASig(web3, typedData, owner, GetEcDSASigType.WithoutDataStruct, '', walletType)\n//   return result\n// }\n\nexport async function signNFTTransferWithDataStructureForContract(\n  web3: Web3,\n  owner: string,\n  bodyParams: OriginNFTTransferRequestV3,\n  chainId: ChainId,\n  accountId: number,\n  counterFactualInfo?: CounterFactualInfo\n) {\n  const typedData = getNFTTransferTypedData(bodyParams, chainId);\n  const result = await getEcDSASig(\n    web3,\n    typedData,\n    owner,\n    GetEcDSASigType.Contract,\n    chainId,\n    accountId,\n    \"\",\n    ConnectorNames.Unknown,\n    counterFactualInfo\n  );\n  return result;\n}\n\nexport function eddsaSign(typedData: any, eddsaKey: string) {\n  const hash = fm.toHex(sigUtil.TypedDataUtils.sign(typedData));\n  myLog(\"eddsaSign\", hash);\n  const sigHash = fm.toHex(new BigInteger(hash, 16).idiv(8));\n  const signature = EDDSAUtil.sign(eddsaKey, sigHash);\n  return {\n    eddsaSig:\n      fm.formatEddsaKey(fm.toHex(fm.toBig(signature.Rx))) +\n      fm.clearHexPrefix(fm.formatEddsaKey(fm.toHex(fm.toBig(signature.Ry)))) +\n      fm.clearHexPrefix(fm.formatEddsaKey(fm.toHex(fm.toBig(signature.s)))),\n  };\n}\n\nexport function eddsaSignWithDomain(\n  domainHax: string,\n  primaryType: string,\n  message: EIP712Message,\n  types: EIP712Types,\n  eddsaKey: string\n) {\n  const parts = [Buffer.from(\"1901\", \"hex\")];\n  parts.push(Buffer.from(domainHax.slice(2), \"hex\"));\n  parts.push(sigUtil.TypedDataUtils.hashStruct(primaryType, message, types));\n  const hash = fm.toHex(ethUtil.sha3(Buffer.concat(parts)));\n  const sigHash = fm.toHex(new BigInteger(hash, 16).idiv(8));\n  const signature = EDDSAUtil.sign(eddsaKey, sigHash);\n  return {\n    eddsaSig:\n      fm.formatEddsaKey(fm.toHex(fm.toBig(signature.Rx))) +\n      fm.clearHexPrefix(fm.formatEddsaKey(fm.toHex(fm.toBig(signature.Ry)))) +\n      fm.clearHexPrefix(fm.formatEddsaKey(fm.toHex(fm.toBig(signature.s)))),\n  };\n}\n\nexport function getAmmJoinEcdsaTypedData(\n  data: JoinAmmPoolRequest,\n  patch: AmmPoolRequestPatch\n) {\n  const message = {\n    owner: data.owner,\n    joinAmounts: [\n      data.joinTokens.pooled[0].volume,\n      data.joinTokens.pooled[1].volume,\n    ],\n    joinStorageIDs: data.storageIds,\n    mintMinAmount: data.joinTokens.minimumLp.volume,\n    fee: data.fee,\n    validUntil: data.validUntil,\n  };\n\n  // myLog('message:', message)\n  const typedData = {\n    types: {\n      EIP712Domain: [\n        { name: \"name\", type: \"string\" },\n        { name: \"version\", type: \"string\" },\n        { name: \"chainId\", type: \"uint256\" },\n        { name: \"verifyingContract\", type: \"address\" },\n      ],\n      PoolJoin: [\n        { name: \"owner\", type: \"address\" },\n        { name: \"joinAmounts\", type: \"uint96[]\" },\n        { name: \"joinStorageIDs\", type: \"uint32[]\" },\n        { name: \"mintMinAmount\", type: \"uint96\" },\n        { name: \"fee\", type: \"uint96\" },\n        { name: \"validUntil\", type: \"uint32\" },\n      ],\n    },\n    primaryType: \"PoolJoin\",\n    domain: {\n      name: patch.ammName,\n      version: \"1.0.0\",\n      chainId: patch.chainId,\n      verifyingContract: patch.poolAddress,\n    },\n    message: message,\n  };\n  return typedData;\n}\n\n// ammpool join\nexport function get_EddsaSig_JoinAmmPool(\n  data: JoinAmmPoolRequest,\n  patch: AmmPoolRequestPatch\n) {\n  if (data.domainSeparator) {\n    const typedData = getAmmJoinEcdsaTypedData(data, patch);\n    return eddsaSignWithDomain(\n      data.domainSeparator,\n      typedData.primaryType,\n      typedData.message,\n      typedData.types,\n      patch.eddsaKey\n    );\n  } else {\n    const typedData = getAmmJoinEcdsaTypedData(data, patch);\n    return eddsaSign(typedData, patch.eddsaKey);\n  }\n}\n\nexport function getAmmExitEcdsaTypedData(\n  data: ExitAmmPoolRequest,\n  patch: AmmPoolRequestPatch\n) {\n  const message: any = {\n    owner: data.owner,\n    burnAmount: data.exitTokens.burned.volume,\n    burnStorageID: data.storageId,\n    exitMinAmounts: [\n      data.exitTokens.unPooled[0].volume,\n      data.exitTokens.unPooled[1].volume,\n    ],\n    fee: data.maxFee,\n    validUntil: data.validUntil,\n  };\n  const typedData: EIP712TypedData = {\n    types: {\n      EIP712Domain: [\n        { name: \"name\", type: \"string\" },\n        { name: \"version\", type: \"string\" },\n        { name: \"chainId\", type: \"uint256\" },\n        { name: \"verifyingContract\", type: \"address\" },\n      ],\n      PoolExit: [\n        { name: \"owner\", type: \"address\" },\n        { name: \"burnAmount\", type: \"uint96\" },\n        { name: \"burnStorageID\", type: \"uint32\" },\n        { name: \"exitMinAmounts\", type: \"uint96[]\" },\n        { name: \"fee\", type: \"uint96\" },\n        { name: \"validUntil\", type: \"uint32\" },\n      ],\n    },\n    primaryType: \"PoolExit\",\n    domain: {\n      name: patch.ammName,\n      version: \"1.0.0\",\n      chainId: patch.chainId,\n      verifyingContract: patch.poolAddress,\n    },\n    message: message,\n  };\n  return typedData;\n}\n\n// ammpool exit\nexport function get_EddsaSig_ExitAmmPool(\n  data: ExitAmmPoolRequest,\n  patch: AmmPoolRequestPatch\n) {\n  if (data.domainSeparator) {\n    const typedData = getAmmExitEcdsaTypedData(data, patch);\n    return eddsaSignWithDomain(\n      data.domainSeparator,\n      typedData.primaryType,\n      typedData.message,\n      typedData.types,\n      patch.eddsaKey\n    );\n  } else {\n    const typedData = getAmmExitEcdsaTypedData(data, patch);\n    return eddsaSign(typedData, patch.eddsaKey);\n  }\n}\n\n// export function getDefiEcdsaTypedData(\n//   data: DefiOrderRequest,\n//   patch: DefiRequestPatch\n// ) {\n//   const message: any = {\n//     owner: data.owner,\n//     burnAmount: data.exitTokens.burned.volume,\n//     burnStorageID: data.storageId,\n//     exitMinAmounts: [\n//       data.exitTokens.unPooled[0].volume,\n//       data.exitTokens.unPooled[1].volume,\n//     ],\n//     fee: data.maxFee,\n//     validUntil: data.validUntil,\n//   };\n//\n//   const typedData: EIP712TypedData = {\n//     types: {\n//       EIP712Domain: [\n//         { name: \"name\", type: \"string\" },\n//         { name: \"version\", type: \"string\" },\n//         { name: \"chainId\", type: \"uint256\" },\n//         { name: \"verifyingContract\", type: \"address\" },\n//       ],\n//       DefiOrder: [\n//         { name: \"exchange\", type: \"address\" },\n//         { name: \"storageId\", type: \"uint96\" },\n//         { name: \"accountId\", type: \"uint32\" },\n//         { name: \"sellToken.tokenId\", type: \"uint16\" },\n//         { name: \"buyToken.tokenId\", type: \"uint16\" },\n//         { name: \"sellToken.volume\", type: \"uint96\" },\n//         { name: \"buyToken.volume\", type: \"uint96\" },\n//         { name: \"validUntil\", type: \"uint32\" },\n//         { name: \"maxFeeBips\", type: \"uint32\" },\n//         { name: \"fillAmountBOrS\", type: \"uint32\" },\n//         { nane: \"taker\", type: \"uint32\" },\n//       ],\n//     },\n//     primaryType: \"DefiOrder\",\n//     domain: {\n//       name: patch.ammName,\n//       version: \"1.0.0\",\n//       chainId: patch.chainId,\n//       verifyingContract: patch.poolAddress,\n//     },\n//     message: message,\n//   };\n//   return typedData;\n// }\n// export function get_EddsaSig_Defi(request: DefiOrderRequest, eddsaKey: string) {\n//\n//   myLog('get_EddsaSig_Defi input',inputs)\n//   return getEdDSASigWithPoseidon(inputs, eddsaKey);\n//   // return eddsaSign(typedData, patch.eddsaKey);\n// }\n","/*\n Implements the Poseidon permutation:\n\n Starkad and Poseidon: New Hash Functions for Zero Knowledge Proof Systems\n  - Lorenzo Grassi, Daniel Kales, Dmitry Khovratovich, Arnab Roy, Christian Rechberger, and Markus Schofnegger\n  - https://eprint.iacr.org/2019/458.pdf\n\n Other implementations:\n\n  - https://github.com/shamatar/PoseidonTree/\n  - https://github.com/iden3/circomlib/blob/master/src/poseidon.js\n  - https://github.com/dusk-network/poseidon252\n */\n\nimport { BigNumber } from \"ethers\";\nimport { SignatureScheme } from \"./eddsa\";\nimport { modulo } from './field';\n\nimport { TextEncoder } from \"web-encoding\";\n\n// @ts-ignore\nvar blake2b = require('blake2b')\n\nexport class PoseidonParams {\n  public p: BigNumber;\n  public t: number;\n  public nRoundsF: number;\n  public nRoundsP: number;\n  public seed: string;\n  public e: BigNumber;\n  public constants_C: [BigNumber]\n  public constants_M: [[BigNumber]]\n  public security_target: number\n\n  constructor(p: BigNumber, t: number, nRoundsF: number, nRoundsP: number, seed: string, e: BigNumber, constants_C: [BigNumber] | null, constants_M: [[BigNumber]] | null, security_target: number) {\n    this.p = p\n    this.t = t\n    this.nRoundsF = nRoundsF\n    this.nRoundsP = nRoundsP\n    this.seed = seed\n    this.e = e\n\n    if (constants_C == null) {\n      this.constants_C = permunation.poseidon_constants(p, `${seed}_constants`, nRoundsF + nRoundsP)\n    } else {\n      this.constants_C = constants_C\n    }\n\n    if (constants_M == null) {\n      this.constants_M = permunation.poseidon_matrix(p, `${seed}_matrix_0000`, t)\n    } else {\n      this.constants_M = constants_M\n    }\n\n    this.security_target = security_target\n  }\n\n}\n\nexport class permunation {\n\n  static H(arg: string) {\n    const outputLength = 32\n\n    const enc = new TextEncoder();    \n    const message = enc.encode(arg)\n    // console.log(`message ${message}`)\n\n    const buf = Buffer.alloc(outputLength)\n    // console.log(`hashOfSize32Bytes ${buf.toString()}`)    \n    // console.log(`message ${message}`)    \n    blake2b(buf.length, null).update(message).final(buf)\n    const items = buf.toJSON().data\n    // console.log(`H items ${items}`)\n\n    let sum = BigNumber.from(\"0\")\n    var i = 0\n    for (var i = 0; i < items.length; i++) {\n      const itemBigInt = BigNumber.from(items[i])\n      const tmp = itemBigInt.mul((BigNumber.from(\"256\").pow(BigNumber.from(i))))\n      sum = sum.add(tmp)\n    }\n    // console.log(`sum ${sum}`)\n    return sum\n  }\n\n  static H_Bigint(arg: BigNumber) {\n    const outputLength = 32\n\n    const message = new Uint8Array(SignatureScheme.to_bytes(arg))\n    // console.log(`message ${message}`)\n\n    const buf = Buffer.alloc(outputLength)\n    // console.log(`hashOfSize32Bytes ${buf.toString()}`)    \n    blake2b(buf.length, null).update(message).final(buf)\n    const items = buf.toJSON().data\n    // console.log(`H_Bigint items ${items}`)\n\n    let sum = BigNumber.from(\"0\")\n    var i = 0\n    for (var i = 0; i < items.length; i++) {\n      const itemBigInt = BigNumber.from(items[i])\n      const tmp = itemBigInt.mul((BigNumber.from(\"256\").pow(BigNumber.from(i))))\n      sum = sum.add(tmp)\n    }\n    // console.log(`sum ${sum}`)\n    return sum\n  }\n\n\n  static poseidon_constants(p: BigNumber, seed: string, n: number) {\n    let c: any\n    c = []\n    let seedBigInt = this.H(seed)\n    const result = seedBigInt.mod(p)\n    c.push(result)\n    for (let i = 0; i < n-1; i++) {\n      seedBigInt = this.H_Bigint(seedBigInt)\n      const result = seedBigInt.mod(p)\n      c.push(result)\n    }\n    return c\n  }\n\n  static poseidon_matrix(p: BigNumber, seed: string, t: number) {\n    const c = this.poseidon_constants(p, seed, t*2)\n    let matrix: any\n    matrix = []\n    for (let i = 0; i < t; i++) {\n      let row: any\n      row = []\n      for (let j = 0; j < t; j++) {\n        const c_i = c[i]\n        const c_t_j = c[t+j]\n        const p_c = p\n        const c_t_j_p = c_t_j.mod(p_c)\n        const left = c_i.sub(c_t_j_p)\n        const p_2 = p_c.sub(2)\n        const item_c = modulo(left, p_2, p_c)\n        row.push(item_c)\n      }\n      matrix.push(row)\n    }\n    return matrix\n  }\n\n  static poseidon_sbox(state: [BigNumber], i: number, params: PoseidonParams) {\n    /*\n    iacr.org/2019/458 § 2.2 The Hades Strategy (pg 6)\n\n    In more details, assume R_F = 2 · R_f is an even number. Then\n    - the first R_f rounds have a full S-Box layer,\n    - the middle R_P rounds have a partial S-Box layer (i.e., 1 S-Box layer),\n    - the last R_f rounds have a full S-Box layer\n    */\n    const half_F = params.nRoundsF / 2\n\n    if (i < half_F || i >= (half_F + params.nRoundsP)) {\n      for (let j = 0; j < state.length; j++) {\n        const element_c = state[j]\n        const e_c = params.e\n        const p_c = params.p\n        const item = modulo(element_c, e_c, p_c)\n        state[j] = item\n      }\n    } else {\n      const element_c = state[0]\n      const e_c = params.e\n      const p_c = params.p\n      const item = modulo(element_c, e_c, p_c)\n      state[0] = item\n    }\n    return state\n  }\n\n  static poseidon_mix(state: [BigNumber], M: [[BigNumber]], p: BigNumber) {\n    /*\n    The mixing layer is a matrix vector product of the state with the mixing matrix\n      - https://mathinsight.org/matrix_vector_multiplication\n    */\n    let newState: any\n    newState = []\n    for (let i = 0; i < M.length; i++) {\n      let sum = BigNumber.from(0)\n      for (let j = 0; j < state.length; j++) {\n        const element = state[j]\n        sum = sum.add((M[i][j].mul(element)))\n      }\n      newState.push(sum.mod(p))\n    }\n    return newState\n  }\n\n\n  // poseidon\n  /*\n    Main instansiation of the Poseidon permutation\n\n    The state is `t` elements wide, there are `F` full-rounds\n    followed by `P` partial rounds, then `F` full rounds again.\n\n        [    ARK    ]    --,\n          | | | | | |       |\n        [    SBOX   ]       -  Full Round\n          | | | | | |       |\n        [    MIX    ]    --`\n\n\n        [    ARK    ]    --,\n          | | | | | |       |\n        [    SBOX   ]       -  Partial Round\n                    |       |   Only 1 element is substituted in partial round\n        [    MIX    ]    --`\n\n    There are F+P rounds for the full permutation.\n\n    You can provide `r = N - 2s` bits of input per round, where `s` is the desired\n    security level, in most cases this means you can provide `t-1` inputs with\n    appropriately chosen parameters. The permutation can be 'chained' together\n    to form a sponge construct.\n  */\n  static poseidon(inputs: [BigNumber], params: PoseidonParams) {\n    let state: any\n    state = []\n    state = state.concat(inputs)\n    // console.log(`state ${state}`)\n    for (var i = 0; i < params.t - inputs.length; i++) {\n      state.push(BigNumber.from(0))\n    }\n\n    // console.log(`state ${state}`)\n    // console.log(`params.constants_C.length ${params.constants_C.length}`)\n\n    for (var i = 0; i < params.constants_C.length; i++) {\n      const C_i = params.constants_C[i]\n\n      for (let index = 0; index < state.length; index++) {\n        const element = state[index]\n        state[index] = element.add(C_i)\n      }\n\n      state = this.poseidon_sbox(state, i, params)\n      // console.log(`after poseidon_sbox ${state}`)\n\n      state = this.poseidon_mix(state, params.constants_M, params.p)\n      // console.log(`after poseidon_mix ${state}`)\n    }\n    // console.log(`hash is ${state[0]}`)\n    return state[0]\n  }\n\n}\n","/*\nImplements Pure-EdDSA and Hash-EdDSA\n\nThe signer has two secret values:\n\n    * k = Secret key\n    * r = Per-(message,key) nonce\n\nThe signer provides a signature consiting of two values:\n\n    * R = Point, image of `r*B`\n    * s = Image of `r + (k*t)`\n\nThe signer provides the verifier with their public key:\n\n    * A = k*B\n\nBoth the verifier and the signer calculate the common reference string:\n\n    * t = H(R, A, M)\n\nThe nonce `r` is secret, and protects the value `s` from revealing the\nsigners secret key.\n\nFor Hash-EdDSA, the message `M` is compressed before H(R,A,M)\n\nFor further information see: https://ed2519.cr.yp.to/eddsa-20150704.pdf\n*/\n\nimport { BigNumber } from \"ethers\";\nimport { field, FQ } from \"./field\";\nimport { jubjub, Point } from \"./jubjub\";\nimport { sha512 } from \"js-sha512\";\nimport { permunation, PoseidonParams } from \"./permutation\";\n\nexport class Signature {\n  public R: Point;\n  public s: FQ;\n\n  constructor(R: Point, s: FQ) {\n    this.R = R;\n    this.s = s;\n  }\n\n  toStr() {\n    return `${this.R.x.n} ${this.R.y.n} ${this.s.n}`;\n  }\n}\n\nexport class SignedMessage {\n  public A: Point;\n  public sig: Signature;\n  public msg: BigNumber;\n\n  constructor(A: Point, sig: Signature, msg: BigNumber) {\n    this.A = A;\n    this.sig = sig;\n    this.msg = msg;\n  }\n\n  toStr() {\n    return `${this.A.x.n} ${\n      this.A.y.n\n    } ${this.sig.toStr()} ${this.msg.toString()}`;\n  }\n}\n\nexport class SignatureScheme {\n  static to_bytes(arg: BigNumber) {\n    const outputLength = 32;\n\n    // console.log(`input ${arg.toString()}`)\n\n    let bitIntDataItems = bnToBuf(arg.toString());\n    // console.log(`bigIntData ${bitIntDataItems}`)\n\n    const more = outputLength - bitIntDataItems.length;\n    // console.log('more', more)\n    if (more > 0) {\n      for (let i = 0; i < more; i++) {\n        bitIntDataItems = [0].concat(bitIntDataItems);\n      }\n    } else {\n      bitIntDataItems = bitIntDataItems.slice(0, outputLength);\n    }\n\n    bitIntDataItems = bitIntDataItems.reverse();\n    // console.log(`bigIntData return ${bitIntDataItems}`)\n    return bitIntDataItems;\n  }\n\n  /*\n  Identity function for message\n\n  Can be used to truncate the message before hashing it\n  as part of the public parameters.\n  */\n  static prehash_message(M: BigNumber) {\n    return M;\n  }\n\n  /*\n  Hash the key and message to create `r`, the blinding factor for this signature.\n\n  If the same `r` value is used more than once, the key for the signature is revealed.\n\n  From: https://eprint.iacr.org/2015/677.pdf (EdDSA for more curves)\n\n  Page 3:\n\n      (Implementation detail: To save time in the computation of `rB`, the signer\n      can replace `r` with `r mod L` before computing `rB`.)\n  */\n  static hash_secret_python(k: FQ, arg: BigNumber) {\n    const byteArray0 = this.to_bytes(k.n);\n    const byteArray1 = this.to_bytes(arg);\n\n    const sum = byteArray0.concat(byteArray1);\n    // console.log(\"sum\", sum)\n\n    // let byteArrayHexStr = bytesToHexString(sum)\n    // console.log(\"byteArrayHexStr\", byteArrayHexStr)\n\n    const digest1 = sha512.array(new Uint8Array(sum).buffer);\n\n    // let digest1 = createHash('sha512').update .digest(\"SHA-512\", new Uint8Array(sum).buffer)\n    let sha512StrItems: any;\n    // console.log('digest1', digest1);\n    for (let i = 0; i < digest1.length; i++) {\n      const itemInt = digest1[i];\n      let st = itemInt.toString(16);\n      if (st.length == 1) {\n        st = \"0\" + st;\n      }\n      sha512StrItems = [st].concat(sha512StrItems);\n    }\n    const sha512MessageHexStr = sha512StrItems.join(\"\");\n    // console.log(`sha512MessageHexStr ${sha512MessageHexStr}`)\n    const sha512MessageHexStrBigInt = BigNumber.from(\n      \"0x\" + sha512MessageHexStr\n    );\n    // console.log(`sha512MessageHexStrBigInt ${sha512MessageHexStrBigInt}`)\n    const hashed = sha512MessageHexStrBigInt.mod(jubjub.JUBJUB_L);\n    // console.log(`hashed ${hashed.toString()}`)\n    return hashed;\n  }\n\n  static B() {\n    return Point.generate();\n  }\n\n  static sign(msg: BigNumber, key: FQ, B: Point) {\n    // console.log(\"B \", B.x.n.toString(), B.y.n.toString())\n\n    const copyKey = new FQ(key.n, key.m);\n    const A = B.mul(copyKey.n);\n\n    // console.log(\"A.x \", A.x.n.toString(), A.x.m.toString())\n    // console.log(\"A.y \", B.y.n.toString(), A.y.m.toString())\n\n    const M = this.prehash_message(msg);\n    // console.log(\"M \", M.toString())\n\n    const r = this.hash_secret_python(key, M);\n    // console.log(\"r \", r.toString())\n\n    const copy_r = BigNumber.from(r.toString());\n\n    const R = B.mul(copy_r);\n\n    // console.log(\"R.x \", R.x.n.toString(), R.x.m.toString())\n    // console.log(\"R.y \", R.y.n.toString(), R.y.m.toString())\n\n    const t = this.hash_public(R, A, M);\n    // console.log(\"hello world\")\n    // console.log(\"t \", t.toString())\n\n    const t_c = t;\n    const key_n_t = key.n.mul(t_c);\n    const left = r.add(key_n_t);\n    const S = left.mod(jubjub.JUBJUB_E);\n\n    // console.log(\"S \", S.toString())\n\n    const signatureResult = new Signature(R, new FQ(S));\n    // console.log(\"signatureResult\", signatureResult.toStr())\n\n    const signedMessage = new SignedMessage(A, signatureResult, msg);\n    // console.log(\"signedMessage\", signedMessage.toStr())\n\n    return signedMessage;\n  }\n\n  static as_scalar(point: Point) {\n    // console.log(`as_scalar ${point.x.n.toString()}`)\n    return [point.x.n, point.y.n];\n  }\n\n  static hash_public(R: Point, A: Point, M: BigNumber) {\n    let inputMsg: any;\n    inputMsg = this.as_scalar(R).concat(this.as_scalar(A)).concat([M]);\n    // console.log(`inputMsg ${inputMsg}`)\n    const params = new PoseidonParams(\n      field.SNARK_SCALAR_FIELD,\n      6,\n      6,\n      52,\n      \"poseidon\",\n      BigNumber.from(5),\n      null,\n      null,\n      128\n    );\n    const result = permunation.poseidon(inputMsg, params);\n    return result;\n  }\n}\n\nexport function bnToBuf(bn: string) {\n  let hex = BigInt(bn).toString(16);\n  if (hex.length % 2) {\n    hex = \"0\" + hex;\n  }\n  const len = hex.length / 2;\n  // console.log(\"length\", len);\n\n  const u8 = new Uint8Array(len);\n  let i = 0;\n  let j = 0;\n  while (i < len) {\n    u8[i] = parseInt(hex.slice(j, j + 2), 16);\n    i += 1;\n    j += 2;\n  }\n  return Array.from(u8);\n}\n\nexport function bnToBufWithFixedLength(bn: string, outputLength: number) {\n  let hex = BigInt(bn).toString(16);\n  if (hex.length % 2) {\n    hex = \"0\" + hex;\n  }\n  const len = hex.length / 2;\n\n  // console.log(\"len\", len);\n\n  const u8 = new Uint8Array(len);\n  let i = 0;\n  let j = 0;\n  while (i < len) {\n    u8[i] = parseInt(hex.slice(j, j + 2), 16);\n    i += 1;\n    j += 2;\n  }\n\n  let bitIntDataItems = Array.from(u8);\n\n  const more = outputLength - bitIntDataItems.length;\n  // console.log('diff len', more)\n  if (more > 0) {\n    for (let i = 0; i < more; i++) {\n      bitIntDataItems = [0].concat(bitIntDataItems);\n    }\n  } else {\n    bitIntDataItems = bitIntDataItems.slice(0, outputLength);\n  }\n\n  return bitIntDataItems;\n}\n\nexport function bufToBn(buf: any) {\n  let hex: any;\n  hex = [];\n  const u8 = Uint8Array.from(buf);\n\n  u8.forEach(function (i) {\n    let h = i.toString(16);\n    if (h.length % 2) {\n      h = \"0\" + h;\n    }\n    hex.push(h);\n  });\n\n  return BigInt(\"0x\" + hex.join(\"\"));\n}\n\nexport function bytesToHexString(bytes: any) {\n  let strItems: any;\n  strItems = [];\n  for (let i = 0; i < bytes.length; i++) {\n    const item = bytes[i];\n    let st = item.toString(16);\n    if (st.length == 1) {\n      st = \"0\" + st;\n    }\n    // st = st.toUpperCase()\n    strItems.push(st);\n  }\n  const strItemsJoined = strItems.join(\"\");\n  return strItemsJoined;\n}\n","import { BigNumber } from \"ethers\";\nimport { SignatureScheme, bytesToHexString } from \"./eddsa\";\nimport { field } from \"./field\";\n\n\nexport class babyJub {\n  \n  static packPoint(P0: BigNumber, P1: BigNumber) {\n    const packed = SignatureScheme.to_bytes(P1).reverse()\n    // console.log(\"packed\", packed)\n    if (babyJub.lt(P0, BigNumber.from(\"0\"))) {\n      // console.log(\"Update .... lt \")\n      packed[0] = packed[0] | 0x80\n    }\n    const hexStr = bytesToHexString(packed)\n    // console.log(\"hexStr\", hexStr)\n    return hexStr\n  }\n\n  static lt(a: BigNumber, b: BigNumber) {\n    const half = field.SNARK_SCALAR_FIELD.div(BigNumber.from(\"2\"))\n    const p = field.SNARK_SCALAR_FIELD\n    let aa: BigNumber\n    let bb: BigNumber\n    if (a.gt(half)) {\n      aa = a.sub(p)\n    } else {\n      aa = a\n    }\n    if (b.gt(half)) {\n      bb = b.sub(p)\n    } else {\n      bb = b\n    }\n    // console.log(\"lt\", a.toString(), b.toString(), aa.toString(), bb.toString());\n    return aa.lt(bb)\n  }\n\n  static gt(a: BigNumber, b: BigNumber) {\n    const half = field.SNARK_SCALAR_FIELD.div(BigNumber.from(\"2\"))\n    const p = field.SNARK_SCALAR_FIELD\n    let aa: BigNumber\n    let bb: BigNumber\n    if (a.gt(half)) {\n      aa = a.sub(p)\n    } else {\n      aa = a\n    }\n    if (b.gt(half)) {\n      bb = b.sub(p)\n    } else {\n      bb = b\n    }\n    // console.log(\"gt\", a.toString(), b.toString(), aa.toString(), bb.toString());\n    return aa.gt(bb)\n  }\n\n}\n","import { BigNumber } from \"ethers\";\nimport { SignatureScheme } from \"./eddsa\";\nimport { FQ } from \"./field\";\nimport { jubjub } from \"./jubjub\";\nimport { babyJub } from \"./babyJub\";\n\nexport class EDDSAUtil {\n  \n  static sign(PrivateKey: string | undefined, hash: any) {\n    const strKey = BigNumber.from(PrivateKey)\n    const msg = BigNumber.from(hash)\n\n    // console.log(\"strKey\", strKey.toString())\n    // console.log(\"msg\", msg.toString())\n    const copyKey = new FQ(strKey)\n    const B = SignatureScheme.B()\n    const signed = SignatureScheme.sign(msg, copyKey, B)\n    // console.log(\"signed\", signed.toStr())\n    const x = EDDSAUtil.formatted(signed.sig.R.x.n.toHexString().slice(2))\n    const y = EDDSAUtil.formatted(signed.sig.R.y.n.toHexString().slice(2))\n    const s = EDDSAUtil.formatted(signed.sig.s.n.toHexString().slice(2))\n    const result = `0x${x}${y}${s}`\n    // console.log(\"result\", result)\n    return {\n      \"Rx\": signed.sig.R.x.n.toString(),\n      \"Ry\": signed.sig.R.y.n.toString(),\n      \"s\": signed.sig.s.n.toString()\n    }\n  }\n\n  static formatted(hexString: string) {\n    const outputLength = 32 * 2\n    const more = outputLength - hexString.length\n    if (more > 0) {\n      for (let i = 0; i < more; i++) {\n        hexString = \"0\" + (hexString)\n      }\n    } else {\n      hexString = hexString.slice(0, outputLength)\n    }\n    return hexString\n  }\n\n  static generateKeyPair(seed: any) {\n    let bigInt = BigNumber.from(0)\n    for (let i = 0; i < seed.length; i++) {\n      const item = seed[i]\n      const itemBigInt = BigNumber.from(item)\n      const tmp = BigNumber.from(\"256\").pow(BigNumber.from(i))\n      bigInt = bigInt.add(itemBigInt.mul(tmp))\n    }\n    // console.log(\"sum\", bigInt.toString())\n    const secretKey = bigInt.mod(jubjub.JUBJUB_L)\n    // console.log(\"secretKey\", secretKey.toString())\n\n    const copySecretKey = BigNumber.from(secretKey.toString())\n    // console.log(\"copySecretKey\", copySecretKey.toString())\n\n    const B = SignatureScheme.B()\n    // console.log(\"B\", B.toString())\n\n    const publicKey = B.mul(copySecretKey)\n    // console.log(\"publicKey\", publicKey.x.n.toString(), publicKey.y.n.toString())\n\n    const keyPair = {\n      \"publicKeyX\": publicKey.x.n.toString(),\n      \"publicKeyY\": publicKey.y.n.toString(),\n      \"secretKey\": secretKey.toString()\n    }\n\n    return keyPair\n  }\n\n  static pack(publicKeyX: string, publicKeyY: string) {\n    const P0 = BigNumber.from(publicKeyX)\n    const P1 = BigNumber.from(publicKeyY)\n    const newPack = babyJub.packPoint(P0, P1)\n    return newPack\n  }\n\n}\n","export const sortObject = (o: any) =>\n  Object.keys(o)\n    .sort()\n    .reduce((r: any, k) => ((r[k] = o[k]), r), {});\n","import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from \"axios\";\nimport { ReqParams, ReqOptions } from \"../defs/loopring_defs\";\n\nimport { SIG_FLAG } from \"../defs/loopring_enums\";\n\nimport { getEdDSASig, getEdDSASigWithPoseidon } from \"./sign/sign_tools\";\nimport { sortObject } from \"../utils/obj_tools\";\n\n/**\n *\n * @export\n */\nexport const setSearchParams = function (url: URL, ...objects: any[]) {\n  const searchParams = new URLSearchParams(url.search);\n\n  for (const object of objects) {\n    if (object) {\n      const objectTmp = sortObject(object);\n      for (const key in objectTmp) {\n        if (objectTmp[key] != undefined) searchParams.set(key, objectTmp[key]);\n      }\n    }\n  }\n\n  url.search = searchParams.toString();\n};\n\n/**\n *\n * @export\n */\nexport const serializeDataIfNeeded_For_SetReffer = function (value: any) {\n  return JSON.stringify(value, Object.keys(value).sort());\n};\n\nexport const serializeDataIfNeeded = function (value: any) {\n  const nonString = typeof value !== \"string\";\n\n  return nonString\n    ? JSON.stringify(value !== undefined ? sortObject(value) : {})\n    : value || \"\";\n};\n\n/**\n *\n * @export\n */\nexport const toPathString = function (url: URL) {\n  return url.pathname + url.search + url.hash;\n};\n\nexport class Request {\n  private _axios: AxiosInstance;\n\n  private baseOptions: any = {};\n\n  public getIns() {\n    return this._axios;\n  }\n\n  constructor(baseUrl: string, timeout: number) {\n\n    this.baseOptions = {\n      baseURL: baseUrl,\n      timeout: timeout,\n\n      headers: {\n        // 'Accept': '*/*',\n        // 'Accept-Encoding': 'gzip, deflate, br',\n        feeVersion: \"v2\",\n        \"Content-Type\": \"application/json\",\n        pf: \"web\", // tag for recognizing source\n      },\n\n      validateStatus: function (status: any) {\n        if ((status >= 200 && status < 300) || status === 400) {\n          return true;\n        }\n        return false;\n        // return true // always true, handle exception in each bussiness logic\n      },\n\n      insecure: true,\n    };\n\n    this._axios = axios.create(this.baseOptions);\n  }\n\n  public async request(params: ReqParams, options: any = {}) {\n    const localUrl = new URL(params.url, this.baseOptions.baseURL);\n\n    const localVarRequestOptions = { method: params.method, ...options };\n\n    setSearchParams(localUrl, params?.queryParams);\n\n    const urlPathStr = toPathString(localUrl);\n\n    let headers: any = {};\n\n    if (params?.apiKey) {\n      headers[\"X-API-KEY\"] = params?.apiKey;\n    }\n\n    let sig: any = params.sigObj?.sig;\n\n    if (params.sigFlag !== SIG_FLAG.NO_SIG && !params?.sigObj?.dataToSig) {\n      throw Error(\"no dataToSig field!\");\n    }\n\n    switch (params.sigFlag) {\n      case SIG_FLAG.NO_SIG:\n        break;\n      case SIG_FLAG.EDDSA_SIG_POSEIDON:\n        sig = getEdDSASigWithPoseidon(\n          params.sigObj?.dataToSig,\n          params.sigObj?.PrivateKey\n        ).result;\n        break;\n      case SIG_FLAG.EDDSA_SIG:\n        sig = getEdDSASig(\n          params.method,\n          this.baseOptions.baseURL,\n          params.url,\n          params.sigObj?.dataToSig,\n          params.sigObj?.PrivateKey\n        );\n        break;\n      default:\n        break;\n    }\n\n    if (sig) {\n      headers[\"X-API-SIG\"] = sig;\n    } else if (params?.ecdsaSignature) {\n      headers[\"X-API-SIG\"] = params?.ecdsaSignature;\n    } else if (params?.eddsaSignature) {\n      headers[\"X-API-SIG\"] = params?.eddsaSignature;\n    }\n    // myLog('headers[\"X-API-SIG\"]', headers[\"X-API-SIG\"]);\n    if (params?.bodyParams) {\n      const bodyParams = params?.bodyParams;\n      if (sig && params.sigObj?.sigPatch) {\n        bodyParams[params.sigObj?.sigPatch] = sig;\n      }\n\n      if (params?.ecdsaSignature) {\n        bodyParams.ecdsaSignature = params?.ecdsaSignature;\n      }\n\n      if (params?.eddsaSignature) {\n        bodyParams.eddsaSignature = params?.eddsaSignature;\n      }\n\n      localVarRequestOptions.data = serializeDataIfNeeded(bodyParams);\n    }\n\n    headers = { ...this.baseOptions.headers, ...headers };\n\n    const optInOne = {\n      ...this.baseOptions,\n      ...{ headers },\n      ...localVarRequestOptions,\n      url: this.baseOptions.baseURL + urlPathStr,\n    };\n    \n\n    // myLog(optInOne);\n    // myLog(\"headers config\", optInOne);\n    return await this._axios.request(optInOne);\n  }\n\n  public updateOpt(reqOpt: ReqOptions) {\n    this._axios.interceptors.request.use((req: AxiosRequestConfig) => {\n      if (reqOpt?.baseUrl) {\n        req.baseURL = reqOpt?.baseUrl;\n      }\n      if (reqOpt?.url) {\n        req.url = reqOpt?.url;\n      }\n      if (reqOpt?.apiKey) {\n        req.headers[\"X-API-KEY\"] = reqOpt?.apiKey;\n      }\n      if (reqOpt?.signature) {\n        req.headers[\"X-API-SIG\"] = reqOpt?.signature;\n      }\n      return req;\n    });\n    return this;\n  }\n\n  public addApiKey(apiKey: string) {\n    return this.updateOpt({ apiKey });\n  }\n\n  public addSig(signature: string) {\n    return this.updateOpt({ signature });\n  }\n\n  public updateBaseUrl(baseUrl: string) {\n    return this.updateOpt({ baseUrl });\n  }\n\n  public handle400(callback: any = undefined) {\n    this._axios.interceptors.response.use((res: AxiosResponse) => {\n      if (res.status == 400) {\n        // eslint-disable-next-line no-console\n        console.log(res.request + \" got \" + res.statusText);\n      }\n\n      if (callback) {\n        callback();\n      }\n\n      return res;\n    });\n  }\n}\n","import {\n  addHexPrefix,\n  clearHexPrefix,\n  toBuffer,\n  toHex,\n} from \"../../../utils/formatter\";\nimport { methodID, rawDecode, rawEncode } from \"ethereumjs-abi\";\nimport BN from \"bn.js\";\n\nexport default class AbiFunction {\n  constructor({ inputs, name, outputs, constant }) {\n    this.name = name;\n    this.inputTypes = inputs.map(({ type }) => type);\n    this.inputs = inputs;\n    this.outputTypes = outputs.map(({ type }) => type);\n    this.outputs = outputs;\n    this.constant = constant;\n    this.methodAbiHash = toHex(methodID(name, this.inputTypes));\n  }\n\n  /**\n   * @description Returns encoded methodId and inputs\n   * @param inputs Object, examples {owner:'0x000...}\n   * @returns {string}\n   */\n  encodeInputs(inputs) {\n    const abiInputs = this.parseInputs(inputs);\n    return (\n      this.methodAbiHash +\n      clearHexPrefix(toHex(rawEncode(this.inputTypes, abiInputs)))\n    );\n  }\n\n  /**\n   * @description decode ethereum jsonrpc response result\n   * @param outputs\n   * @returns {*}\n   */\n  decodeOutputs(outputs) {\n    return this.parseOutputs(rawDecode(this.outputTypes, toBuffer(outputs)));\n  }\n\n  /**\n   * @description decode encoded inputs\n   * @param encoded\n   * @returns {*}\n   */\n  decodeEncodedInputs(encoded) {\n    return this.parseOutputs(\n      rawDecode(this.inputTypes, toBuffer(addHexPrefix(encoded)))\n    );\n  }\n\n  parseInputs(inputs = {}) {\n    return this.inputs.map(({ name, type }) => {\n      if (inputs[name] === undefined) {\n        throw new Error(`Parameter ${name} of type ${type} is required!`);\n      }\n      return inputs[name];\n    });\n  }\n\n  parseOutputs(outputs) {\n    return outputs.map((output) => {\n      if (output instanceof BN) {\n        return toHex(output);\n      }\n      return output;\n    });\n  }\n}\n","import { methodID } from \"ethereumjs-abi\";\nimport { toHex } from \"../../../utils/formatter\";\nimport AbiFunction from \"./AbiFunction\";\n\nexport default class Contract {\n  constructor(abi) {\n    const funAbi = abi.filter(({ type }) => type === \"function\");\n    this.abiFunctions = funAbi.reduce((acc, item) => {\n      const inputTypes = item.inputs.map(({ type }) => type);\n      const key = `${item.name}(${inputTypes.toString()})`;\n      const methodHash = methodID(item.name, inputTypes);\n      return {\n        ...acc,\n        [item.name]: new AbiFunction(item),\n        [key]: new AbiFunction(item),\n        [methodHash]: new AbiFunction(item),\n      };\n    }, {});\n  }\n\n  /**\n   * @description Encodes inputs data according to  ethereum abi\n   * @param method string can be full method or just method name, examples: 'balanceOf' or balanceOf(address)\n   * @param inputs array\n   * @returns {*|string}\n   */\n  encodeInputs(method, inputs) {\n    const abiFunction = this.abiFunctions[method];\n    if (abiFunction) {\n      return abiFunction.encodeInputs(inputs);\n    } else {\n      throw new Error(`No  ${method} method according to abi `);\n    }\n  }\n\n  /**\n   * @description Decodes outputs\n   * @param method string can be full method or just method name, examples: 'balanceOf' or balanceOf(address)\n   * @param outputs string\n   * @returns {*}\n   */\n  decodeOutputs(method, outputs) {\n    const abiFunction = this.abiFunctions[method];\n    if (abiFunction) {\n      return abiFunction.decodeOutputs(outputs);\n    } else {\n      throw new Error(`No  ${method} method according to abi `);\n    }\n  }\n\n  /**\n   * @description Decode encoded method and inputs\n   * @param encode string | Buffer\n   * @returns {*}\n   */\n  decodeEncodeInputs(encode) {\n    encode = toHex(encode);\n    const methodId = encode.slice(0, 10);\n    const abiFunction = this.abiFunctions[methodId];\n    if (abiFunction) {\n      return abiFunction.decodeEncodedInputs(encode.slice(10));\n    } else {\n      throw new Error(`No corresponding method according to abi `);\n    }\n  }\n}\n","/* eslint-disable */\nimport Contract from \"./Contract\";\n\nconst erc20Abi = require(\"../../config/abis/erc20.json\");\nconst exchange36Abi = require(\"../../config/abis/exchange_3_6.json\");\nconst contractWalletAbi = require(\"../../config/abis/contractWallet.json\");\nconst erc721Abi = require(\"../../config/abis/erc721.json\");\nconst erc1155Abi = require(\"../../config/abis/erc1155.json\");\nconst hebao = require(\"../../config/abis/hebao.json\");\nconst ERC20Token = new Contract(erc20Abi);\nconst ExchangeContract = new Contract(exchange36Abi);\nconst ContractWallet = new Contract(contractWalletAbi);\nconst ERC1155 = new Contract(erc1155Abi);\nconst ERC721 = new Contract(erc721Abi);\nconst HeBao = new Contract(hebao);\n\nexport default {\n  ERC20Token,\n  ERC1155,\n  ERC721,\n  ExchangeContract,\n  ContractWallet,\n  erc721Abi: erc721Abi,\n  erc1155Abi: erc1155Abi,\n  HeBao,\n};\n","import AbiFunction from \"./AbiFunction\";\nimport Contract from \"./Contract\";\nimport Contracts from \"./Contracts\";\n\nexport default {\n  AbiFunction,\n  Contract,\n  Contracts,\n};\n","import {\n  ChainId,\n  ConnectorError,\n  ConnectorNames,\n  CounterFactualInfo,\n  GetAvailableBrokerRequest,\n  GetCounterFactualInfoRequest,\n  LOOPRING_URLs,\n  LoopringErrorCode,\n  ReqMethod,\n  ReqParams,\n  RESULT_INFO,\n  SIG_FLAG,\n  TX_HASH_API,\n} from \"../defs\";\nimport { Request } from \"./request\";\nimport {\n  ecrecover,\n  fromRpcSig,\n  hashPersonalMessage,\n  keccak,\n  keccak256,\n  pubToAddress,\n  toRpcSig,\n} from \"ethereumjs-util\";\nimport { addHexPrefix, toBuffer, toHex } from \"../utils\";\nimport Web3 from \"web3\";\nimport { myLog } from \"../utils/log_tools\";\nimport ABI from \"./ethereum/contracts\";\nimport { AxiosResponse } from \"axios\";\n\nexport const KEY_MESSAGE =\n  \"Sign this message to access Loopring Exchange: \" +\n  \"${exchangeAddress}\" +\n  \" with key nonce: \" +\n  \"${nonce}\";\nexport class BaseAPI {\n  static KEY_MESSAGE: string = KEY_MESSAGE;\n  protected baseUrl = \"\";\n  protected chainId: ChainId = ChainId.MAINNET;\n  public genErr(err: Error | (AxiosResponse & Error)): RESULT_INFO {\n    if (err.hasOwnProperty(\"request\")) {\n      // const axiosError = errorInfo as AxiosResponse;\n      return {\n        // @ts-ignore;\n        message: ConnectorError.HTTP_ERROR,\n        ...err,\n        msg: ConnectorError.HTTP_ERROR,\n        code: LoopringErrorCode.HTTP_ERROR,\n      };\n      err?.message;\n    } else if (!err || !err?.message) {\n      return {\n        message: \"unKnown\",\n        code: LoopringErrorCode.SKD_UNKNOW,\n      };\n    } else {\n      const key = Reflect.ownKeys(ConnectorError).find(\n        (key) =>\n          err?.message.search(\n            ConnectorError[key as keyof typeof ConnectorError]\n          ) !== -1\n      );\n      if (key) {\n        return {\n          ...err,\n          message: key as keyof typeof ConnectorError,\n          code: LoopringErrorCode[key as keyof typeof ConnectorError],\n        };\n      }\n      return {\n        ...(err instanceof Error\n          ? Reflect.ownKeys(err).reduce((prev, item) => {\n              // @ts-ignore\n              return { ...prev, [item]: err[item.toString()] };\n            }, {})\n          : err),\n        code: LoopringErrorCode.SKD_UNKNOW,\n      };\n    }\n  }\n  protected returnTxHash<T extends TX_HASH_API>(\n    raw_data: T\n  ):\n    | (Omit<T, \"resultInfo\"> & { raw_data: Omit<T, \"resultInfo\"> })\n    | RESULT_INFO {\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data.resultInfo,\n        message: raw_data.resultInfo?.msg\n          ? raw_data.resultInfo?.msg\n          : raw_data?.resultInfo.message,\n      };\n    }\n    return {\n      ...raw_data,\n      raw_data,\n    };\n  }\n\n  private timeout: number;\n  private baseUrlMap: { [key: number]: string } | undefined;\n\n  public constructor(\n    param: InitParam,\n    timeout: number = 6000,\n    baseUrlMap = {\n      [ChainId.MAINNET]: \"https://api3.loopring.io\",\n      [ChainId.GOERLI]: \"https://uat2.loopring.io\",\n    }\n  ) {\n    if (param.baseUrl) {\n      this.baseUrl = param.baseUrl;\n    } else if (param.chainId !== undefined) {\n      this.setChainId(param.chainId);\n    } else {\n      this.setChainId(ChainId.GOERLI);\n    }\n    this.baseUrlMap = baseUrlMap;\n    this.timeout = timeout;\n  }\n\n  public async getAvailableBroker(\n    request: GetAvailableBrokerRequest\n  ): Promise<{ broker: string }> {\n    const reqParams: ReqParams = {\n      sigFlag: SIG_FLAG.NO_SIG,\n      queryParams: request,\n      url: LOOPRING_URLs.GET_AVAILABLE_BROKER,\n      method: ReqMethod.GET,\n    };\n    const result = (await this.makeReq().request(reqParams)).data;\n    return result;\n  }\n\n  public async getCounterFactualInfo<T extends any>(\n    request: GetCounterFactualInfoRequest\n  ): Promise<{\n    raw_data: T;\n    counterFactualInfo: CounterFactualInfo | undefined;\n    error?: RESULT_INFO;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.COUNTER_FACTUAL_INFO,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    let counterFactualInfo: CounterFactualInfo | undefined;\n    let error: RESULT_INFO | undefined = undefined;\n\n    if (raw_data && raw_data?.resultInfo) {\n      error = raw_data?.resultInfo;\n    } else {\n      counterFactualInfo = {\n        ...raw_data,\n      } as CounterFactualInfo;\n    }\n\n    return {\n      counterFactualInfo,\n      error,\n      raw_data,\n    };\n  }\n\n  public setChainId(chainId: ChainId) {\n    this.baseUrl =\n      this.baseUrlMap && this.baseUrlMap[0]\n        ? getBaseUrlByChainId(chainId, this.baseUrlMap as any)\n        : getBaseUrlByChainId(chainId);\n    this.chainId = chainId;\n  }\n\n  public setBaseUrl(baseUrl: string) {\n    this.baseUrl = baseUrl;\n  }\n\n  protected makeReq(): Request {\n    return new Request(this.baseUrl, this.timeout);\n  }\n}\n\nexport async function ecRecover(\n  web3: Web3,\n  account: string,\n  msg: string,\n  sig: any\n) {\n  return new Promise((resolve) => {\n    try {\n      web3.eth.personal.ecRecover(\n        msg,\n        sig,\n        function (err: any, address: string) {\n          if (!err && address) {\n            resolve({\n              result: address.toLowerCase() === account.toLowerCase(),\n            });\n          } else {\n            resolve({\n              error: \"ecRecover 1:\" + err + \"or no address:\" + address,\n            });\n            myLog(\"ecRecover error\", err);\n          }\n        }\n      );\n    } catch (err) {\n      myLog(\"ecRecover error\", err);\n      resolve({ error: (\"ecRecover 2:\" + err) as any });\n    }\n  });\n}\n\nexport async function contractWalletValidate32(\n  web3: any,\n  account: string,\n  msg: string,\n  sig: any\n) {\n  return new Promise((resolve) => {\n    const hash = hashPersonalMessage(toBuffer(msg));\n    const data = ABI.Contracts.ContractWallet.encodeInputs(\n      \"isValidSignature(bytes32,bytes)\",\n      {\n        _data: hash,\n        _signature: toBuffer(sig),\n      }\n    );\n\n    web3.eth.call(\n      {\n        to: account, // contract addr\n        data: data,\n      },\n      function (err: any, result: any) {\n        if (!err) {\n          const valid = ABI.Contracts.ContractWallet.decodeOutputs(\n            \"isValidSignature(bytes32,bytes)\",\n            result\n          );\n          resolve({\n            result: toHex(toBuffer(valid[0])) === data.slice(0, 10),\n          });\n        } else resolve({ error: err });\n      }\n    );\n  });\n}\n\nexport async function mykeyWalletValid(\n  web3: any,\n  account: string,\n  msg: string,\n  sig: any\n) {\n  const myKeyContract = \"0xADc92d1fD878580579716d944eF3460E241604b7\";\n  return new Promise((resolve) => {\n    web3.eth.call(\n      {\n        to: myKeyContract,\n        data: ABI.Contracts.ContractWallet.encodeInputs(\"getKeyData\", {\n          _account: account,\n          _index: 3,\n        }),\n      },\n      function (err: any, res: any) {\n        if (!err) {\n          const signature = fromRpcSig(sig);\n          const hash = hashPersonalMessage(keccak256(toBuffer(msg)));\n          const address = addHexPrefix(\n            ABI.Contracts.ContractWallet.decodeOutputs(\"getKeyData\", res)[0]\n          );\n          const recAddress = toHex(\n            pubToAddress(ecrecover(hash, signature.v, signature.r, signature.s))\n          );\n          resolve({\n            result: recAddress.toLowerCase() === address.toLowerCase(),\n          });\n        } else {\n          resolve({ error: err });\n        }\n      }\n    );\n  });\n}\n\nexport async function ecRecover2(\n  account: string,\n  message: string,\n  signature: any\n) {\n  const messageBuffer = Buffer.from(message, \"utf8\");\n\n  // myLog('message:', message)\n  // myLog('signature raw:', signature)\n\n  signature = signature.split(\"x\")[1];\n\n  const parts = [\n    Buffer.from(\n      `\\x19Ethereum Signed Message:\\n${messageBuffer.length}`,\n      \"utf8\"\n    ),\n    messageBuffer,\n  ];\n\n  const totalHash = keccak(Buffer.concat(parts));\n\n  const r = Buffer.from(signature.substring(0, 64), \"hex\");\n  const s = Buffer.from(signature.substring(64, 128), \"hex\");\n\n  const old_v = Number(addHexPrefix(signature.substring(128, 130)));\n\n  let v = old_v;\n\n  if (v <= 1) v += 27;\n\n  const pub = ecrecover(totalHash, v, r, s);\n\n  const recoveredAddress = \"0x\" + pubToAddress(pub).toString(\"hex\");\n\n  if (account.toLowerCase() !== recoveredAddress.toLowerCase()) {\n    myLog(\"v:\", v, \"old_v:\", old_v, \" recoveredAddress:\", recoveredAddress);\n  }\n\n  return new Promise((resolve) =>\n    resolve({\n      result: account.toLowerCase() === recoveredAddress.toLowerCase(),\n    })\n  );\n}\n\nconst getBaseUrlByChainId = (\n  id: ChainId,\n  baseUrlMap = {\n    [ChainId.MAINNET]: \"https://api3.loopring.io\",\n    [ChainId.GOERLI]: \"https://uat2.loopring.io\",\n  }\n) => {\n  let baseUrl = \"\";\n  switch (id) {\n    case ChainId.MAINNET:\n      baseUrl = baseUrlMap[ChainId.MAINNET];\n      break;\n    default:\n      baseUrl = baseUrlMap[ChainId.GOERLI];\n      break;\n  }\n  return baseUrl;\n};\n/**\n * @default chainId 1\n * @default keySeed `Sign this message to access Loopring exchange: ${exchangeAddress} with key nonce: ${nonce}`\n */\nexport interface InitParam {\n  chainId?: ChainId;\n  baseUrl?: string;\n}\n\nexport function formatSig(rpcSig: string) {\n  const sig = fromRpcSig(rpcSig);\n  return toRpcSig(sig.v, sig.r, sig.s);\n}\nexport function recoverSignType(\n  web3: any,\n  account: string,\n  msg: string,\n  sig: string\n) {\n  const ethRecover: any = ecRecover(web3, account, msg, sig);\n\n  if (ethRecover.result) {\n    return \"03\";\n  } else {\n    return \"\";\n  }\n}\n\nexport async function personalSign(\n  web3: any,\n  account: string | undefined,\n  pwd: string,\n  msg: string,\n  walletType: ConnectorNames,\n  chainId: ChainId,\n  accountId?: number,\n  counterFactualInfo?: CounterFactualInfo,\n  isMobile?: boolean\n) {\n  if (!account) {\n    return { error: \"personalSign got no account\" };\n  }\n  return new Promise((resolve) => {\n    try {\n      web3.eth.personal.sign(\n        msg,\n        account,\n        pwd,\n        async function (err: any, result: any) {\n          if (!err) {\n            // LOG: for signature\n            myLog(\n              \"ecRecover before\",\n              \"msg\",\n              msg,\n              \"result\",\n              result,\n              counterFactualInfo\n            );\n            // Valid:1. counter Factual signature Valid\n            if (counterFactualInfo && accountId) {\n              myLog(\"fcWalletValid counterFactualInfo accountId:\");\n              const fcValid = await fcWalletValid(\n                web3,\n                account,\n                msg,\n                result,\n                accountId,\n                chainId,\n                counterFactualInfo\n              );\n              if (fcValid.result) {\n                resolve({\n                  sig: result,\n                  counterFactualInfo: fcValid.counterFactualInfo,\n                });\n                return;\n              }\n            }\n\n            // Valid: 2. webview directory signature Valid\n            if (\n              typeof window !== \"undefined\" &&\n              (window?.ethereum?.isImToken || window?.ethereum?.isMetaMask) &&\n              isMobile &&\n              // Mobile directory connect will sign ConnectorNames as MetaMask only\n              walletType === ConnectorNames.MetaMask\n            ) {\n              const address: string[] = await window.ethereum?.request({\n                method: \"eth_requestAccounts\",\n              });\n              if (\n                address?.find(\n                  (item) => item.toLowerCase() === account.toLowerCase()\n                )\n              ) {\n                return resolve({ sig: result });\n              }\n            }\n\n            // Valid: 3. EOA signature Valid by ecRecover\n            if (\n              web3?.currentProvider?.isWalletLink &&\n              web3?.currentProvider?.isConnected\n            ) {\n              account === web3.currentProvider?.selectedAddress;\n              return resolve({ sig: result });\n            } else {\n              const valid: any = await ecRecover(web3, account, msg, result);\n              myLog(\"ecRecover after\", valid.result);\n              if (valid.result) {\n                return resolve({ sig: result });\n              }\n            }\n\n            // Valid: 5. contractWallet signature Valid `isValidSignature(bytes32,bytes)`\n            const walletValid2: any = await contractWalletValidate32(\n              web3,\n              account,\n              msg,\n              result\n            );\n\n            if (walletValid2.result) {\n              return resolve({ sig: result });\n            }\n\n            // Valid: 6. counter Factual signature Valid when no counterFactualInfo\n            if (accountId) {\n              const fcValid = await fcWalletValid(\n                web3,\n                account,\n                msg,\n                result,\n                accountId,\n                chainId\n              );\n              if (fcValid.result) {\n                return resolve({\n                  sig: result,\n                  counterFactualInfo: fcValid.counterFactualInfo,\n                });\n              }\n            }\n\n            // Valid: 7. myKeyValid Valid again\n            const myKeyValid: any = await mykeyWalletValid(\n              web3,\n              account,\n              msg,\n              result\n            );\n\n            if (myKeyValid.result) {\n              return resolve({ sig: result });\n            }\n\n            // Valid: Error cannot pass personalSign Valid\n            // eslint-disable-next-line no-console\n            console.log(\n              \"web3.eth.personal.sign Valid, valid 5 ways, all failed!\"\n            );\n            return resolve({\n              error: \"web3.eth.personal.sign Valid, valid 5 ways, all failed!\",\n            });\n          } else {\n            return resolve({\n              error: \"personalSign err before Validate:\" + err,\n            });\n          }\n        }\n      );\n    } catch (err) {\n      resolve({ error: err as any });\n    }\n  });\n}\n\nexport async function fcWalletValid(\n  web3: any,\n  account: string,\n  msg: string,\n  result: any,\n  accountId: number,\n  chainId: ChainId,\n  counterFactualInfo?: CounterFactualInfo\n): Promise<{\n  counterFactualInfo?: CounterFactualInfo;\n  error?: any;\n  result?: boolean;\n}> {\n  const api = new BaseAPI({ chainId });\n  if (counterFactualInfo === undefined || !counterFactualInfo.walletOwner) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    counterFactualInfo = (await api.getCounterFactualInfo({ accountId }))\n      .counterFactualInfo;\n  }\n\n  if (counterFactualInfo && counterFactualInfo.walletOwner) {\n    let _result: string;\n    if (result.startsWith(\"0x\")) {\n      _result = result.slice(0, 132);\n    } else {\n      _result = result;\n    }\n    const valid: any = await ecRecover(\n      web3,\n      counterFactualInfo.walletOwner,\n      msg,\n      _result\n    );\n    if (valid.result) {\n      myLog(\"fcWalletValid e:\", result, counterFactualInfo);\n      return { result, counterFactualInfo };\n    } else {\n      return { error: \"valid walletOwner failed\" };\n    }\n  } else {\n    return { error: \"valid walletOwner failed\" };\n  }\n}\n","import { BaseAPI } from \"./base_api\";\n\nimport { ReqParams } from \"../defs/loopring_defs\";\n\nimport { SIG_FLAG, ReqMethod } from \"../defs/loopring_enums\";\n\nimport { LOOPRING_URLs } from \"../defs/url_defs\";\n\nexport class WsAPI extends BaseAPI {\n  /*\n   * Get wsApiKey by access REST path \"/v3/ws/key\"\n   */\n  public async getWsKey() {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_WS_KEY,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const wsKey = raw_data.key;\n    return {\n      wsKey,\n      raw_data,\n    };\n  }\n}\n","/* eslint-disable camelcase  */\n\nimport { BaseAPI } from \"./base_api\";\n\nimport {\n  LOOPRING_URLs,\n  SIG_FLAG,\n  ReqMethod,\n  Side,\n  MarketStatus,\n  VipCatergory,\n  TradingInterval,\n  ReqParams,\n  TokenInfo,\n  MarketTradeInfo,\n  FiatPriceInfo,\n  LoopringMap,\n  GetAccountRequest,\n  GetCandlestickRequest,\n  GetDepthRequest,\n  GetTickerRequest,\n  GetMarketTradesRequest,\n  GetFiatPriceRequest,\n  GetTokenBalancesRequest,\n  GetAllowancesRequest,\n  MarketInfo,\n  ExchangeInfo,\n  TickerData,\n  DepthData,\n  Candlestick,\n  TokenRelatedInfo,\n  ABInfo,\n  GetEthBalancesRequest,\n  GetEthNonceRequest,\n  GetWithdrawalAgentsRequest,\n  GetAccountServicesRequest,\n  VipFeeRateInfoMap,\n  AccountInfo,\n  TokenAddress,\n  SoursURL,\n  SEP,\n  GetALLTokenBalancesRequest,\n  TOKENMAPLIST,\n} from \"../defs\";\n\nimport BigNumber from \"bignumber.js\";\nimport { getBaseQuote, makeMarket, makeMarkets } from \"../utils\";\n\nconst checkAmt = (rawStr: string) => {\n  if (rawStr.trim() === \"\") {\n    return \"0\";\n  }\n  return rawStr;\n};\n\nfunction getFeeMap(feeArr: any[], type = 0) {\n  const feesMap: any = {};\n\n  if (feeArr instanceof Array) {\n    feeArr.forEach((item: any, index: number, array: any) => {\n      let key = \"\";\n      switch (type) {\n        case 1:\n          key = item.type;\n          break;\n        default:\n          key = item.token;\n      }\n      // feesMap[key] = new BigNumber(item.fee)\n      feesMap[key] = item.fee;\n    });\n  }\n\n  return feesMap;\n}\n\nfunction genAB(data: any[], isReverse = false) {\n  const ab_arr: ABInfo[] = [];\n  let amtTotal: BigNumber = new BigNumber(0);\n  let volTotal: BigNumber = new BigNumber(0);\n\n  const ab_prices: number[] = [];\n  const ab_amtTotals: string[] = [];\n  const ab_volTotals: string[] = [];\n\n  const best = 0;\n\n  if (data instanceof Array) {\n    data.forEach((item: any) => {\n      const price = parseFloat(item[0]);\n      const amt = new BigNumber(item[1]); // base amt\n      const vol = new BigNumber(item[2]); // quote vol\n      amtTotal = amtTotal.plus(amt);\n      volTotal = volTotal.plus(vol);\n      ab_arr.push({\n        price: price,\n        amt: amt.toString(),\n        vol: vol.toString(),\n        amtTotal: amtTotal.toString(),\n        volTotal: volTotal.toString(),\n      });\n      ab_prices.push(price);\n      ab_amtTotals.push(amtTotal.toString());\n      ab_volTotals.push(volTotal.toString());\n    });\n  }\n\n  if (isReverse) {\n    ab_arr.reverse();\n    ab_prices.reverse();\n    ab_amtTotals.reverse();\n    ab_volTotals.reverse();\n  }\n\n  return {\n    ab_arr,\n    ab_prices,\n    amtTotal,\n    volTotal,\n    ab_amtTotals,\n    ab_volTotals,\n    best,\n  };\n}\n\nexport function getMidPrice({\n  _asks,\n  askReverse,\n  _bids,\n  bidReverse,\n}: {\n  _asks: any;\n  askReverse?: boolean;\n  _bids: any;\n  bidReverse?: boolean;\n}) {\n  if (askReverse === undefined) {\n    askReverse = false;\n  }\n\n  if (bidReverse === undefined) {\n    bidReverse = true;\n  }\n\n  const bids = genAB(_bids, bidReverse);\n  const asks = genAB(_asks, askReverse);\n\n  const mid_price =\n    (bids.ab_prices[bids.ab_prices.length - 1] + asks.ab_prices[0]) / 2;\n\n  return {\n    bids,\n    asks,\n    mid_price,\n  };\n}\n\nexport class ExchangeAPI extends BaseAPI {\n  /*\n   * Returns the relayer's current time in millisecond\n   */\n  public async getRelayerCurrentTime<R>(): Promise<\n    {\n      raw_data: R;\n    } & R\n  > {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_RELAYER_CURRENT_TIME,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      ...raw_data,\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns Protocol Portrait\n   */\n  public async getProtocolPortrait<R>(): Promise<\n    {\n      raw_data: R;\n    } & R\n  > {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_PROTOCOL_PORTRAIT,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      ...raw_data,\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns exchange fee info\n   */\n  public async getExchangeFeeInfo<R>(): Promise<{\n    raw_data: R;\n    orderbookTradingFeesStablecoin: VipFeeRateInfoMap;\n    orderbookTradingFees: VipFeeRateInfoMap;\n    ammTradingFees: VipFeeRateInfoMap;\n    otherFees: { [key: string]: string };\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_EXCHANGE_FEEINFO,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      orderbookTradingFeesStablecoin: raw_data[\n        VipCatergory.ORDERBOOK_TRADING_FEES_STABLECOIN\n      ] as VipFeeRateInfoMap,\n      orderbookTradingFees: raw_data[\n        VipCatergory.ORDERBOOK_TRADING_FEES\n      ] as VipFeeRateInfoMap,\n      ammTradingFees: raw_data[\n        VipCatergory.AMM_TRADING_FEES\n      ] as VipFeeRateInfoMap,\n      otherFees: raw_data[VipCatergory.OTHER_FEES] as { [key: string]: string },\n      raw_data,\n    };\n  }\n\n  public async getWithdrawalAgents<R>(\n    request: GetWithdrawalAgentsRequest\n  ): Promise<{\n    raw_data: R;\n    supportTokenMap: { [key: string]: any };\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      url: LOOPRING_URLs.GET_WITHDRAWAL_AGENTS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const supportTokenMap: { [key: string]: any } = {};\n\n    if (raw_data && raw_data.length > 0) {\n      raw_data.forEach((item: any) => {\n        if (item.symbol) {\n          supportTokenMap[item.symbol] = item;\n        }\n      });\n    }\n\n    return {\n      supportTokenMap,\n      raw_data,\n    };\n  }\n\n  public async getRecommendedMarkets<R>(): Promise<{\n    raw_data: R;\n    recommended: string[];\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_RECOMENDED_MARKETS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    let recommended = [];\n\n    if (raw_data?.recommended) {\n      if (typeof raw_data.recommended === \"string\") {\n        recommended = raw_data.recommended.split(\",\");\n      } else {\n        recommended = raw_data.recommended;\n      }\n    }\n\n    return {\n      recommended,\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns the configurations of all supported markets (trading pairs)\n   */\n  public async getMarkets<R>(url: string = LOOPRING_URLs.GET_MARKETS): Promise<{\n    markets: LoopringMap<MarketInfo>;\n    pairs: LoopringMap<TokenRelatedInfo>;\n    tokenArr: string[];\n    tokenArrStr: string;\n    marketArr: string[];\n    marketArrStr: string;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const { markets, pairs, tokenArr, tokenArrStr, marketArr, marketArrStr } =\n      makeMarkets(raw_data, url);\n\n    return {\n      markets,\n      pairs,\n      tokenArr,\n      tokenArrStr,\n      // tokenArrStr: tokenArr.join(SEP),\n      marketArr,\n      marketArrStr,\n      // marketArrStr: marketArr.join(SEP),\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns the configurations of all supported markets (trading pairs)\n   */\n  public async getMixMarkets<R>(): Promise<{\n    markets: LoopringMap<MarketInfo>;\n    pairs: LoopringMap<TokenRelatedInfo>;\n    tokenArr: string[];\n    tokenArrStr: string;\n    marketArr: string[];\n    marketArrStr: string;\n    raw_data: R;\n  }> {\n    return await this.getMarkets(LOOPRING_URLs.GET_MIX_MARKETS);\n  }\n\n  /*\n   * Returns the configurations of all supported tokens, including Ether.\n   */\n  public async getTokens<R>(): Promise<\n    TOKENMAPLIST & {\n      raw_data: R;\n    }\n  > {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_TOKENS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    // raw_data\n    // const coinMap: LoopringMap<{\n    //   icon?: string;\n    //   name: string;                   makeMarket\n    //   simpleName: string;\n    //   description?: string;\n    //   company: string;\n    // }> = {};\n    // const totalCoinMap: LoopringMap<{\n    //   icon?: string;\n    //   name: string;\n    //   simpleName: string;\n    //   description?: string;\n    //   company: string;\n    // }> = {};\n    // const addressIndex: LoopringMap<TokenAddress> = {};\n    // const idIndex: LoopringMap<string> = {};\n    // const tokensMap: LoopringMap<TokenInfo> = {};\n    // if (raw_data instanceof Array) {\n    //   raw_data.forEach((item: TokenInfo) => {\n    //     if (item.symbol.startsWith(\"LP-\")) {\n    //       item.isLpToken = true;\n    //     } else {\n    //       item.isLpToken = false;\n    //     }\n    //     tokensMap[item.symbol] = item;\n    //\n    //     const coinInfo = {\n    //       icon: SoursURL + `ethereum/assets/${item.address}/logo.png`,\n    //       name: item.symbol,\n    //       simpleName: item.symbol,\n    //       description: item.type,\n    //       company: \"\",\n    //     };\n    //     if (!item.symbol.startsWith(\"LP-\")) {\n    //       coinMap[item.symbol] = coinInfo;\n    //     }\n    //     totalCoinMap[item.symbol] = coinInfo;\n    //     addressIndex[item.address.toLowerCase()] = item.symbol;\n    //     idIndex[item.tokenId] = item.symbol;\n    //   });\n    // }\n    // raw_data: R;\n    return {\n      ...makeMarket(raw_data),\n      // tokensMap,\n      // coinMap,\n      // totalCoinMap,\n      // idIndex,\n      // addressIndex,\n      raw_data,\n    };\n  }\n\n  // private splitTokens(token: string, tokens: LoopringMap<TokenInfo>) {\n  //   let tokenArray: any = [];\n  //   const tokenAddrArr: string[] = [];\n  //\n  //   if (tokens) {\n  //     if (token) {\n  //       tokenArray = token.split(SEP);\n  //     }\n  //\n  //     if (\n  //       tokenArray.length <= 0 ||\n  //       (tokenArray.length === 1 && tokenArray[0] === \"\")\n  //     ) {\n  //       tokenArray = Reflect.ownKeys(tokens);\n  //     }\n  //\n  //     tokenArray.forEach((item: string) => {\n  //       tokenAddrArr.push(tokens[item].address);\n  //     });\n  //\n  //     token = tokenAddrArr.join(SEP);\n  //   }\n  //\n  //   return {\n  //     tokenArray,\n  //     token,\n  //   };\n  // }\n\n  /*\n   * Returns the balances of all supported tokens, including Ether.\n   */\n  public async getEthBalances<R>(request: GetEthBalancesRequest): Promise<{\n    raw_data: R;\n    ethBalance: string;\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      url: LOOPRING_URLs.GET_ETH_BALANCES,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const ethBalance = raw_data.amount;\n\n    return {\n      ethBalance,\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns the balances of all supported tokens, including Ether.\n   */\n  public async getTokenBalances<R, T = TokenAddress>(\n    request: GetTokenBalancesRequest\n  ): Promise<{\n    tokenBalances: Map<T, string>;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: { ...request, token: request.token.join(SEP) },\n      url: LOOPRING_URLs.GET_TOKEN_BALANCES,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const tokenBalances: Map<T, string> = new Map<T, string>();\n\n    if (raw_data?.amount instanceof Array) {\n      raw_data.amount.forEach((value: any, index: number) => {\n        // tokenBalances[tokenArray[index]] = raw_data.amount[index];\n        tokenBalances.set(request.token[index] as unknown as T, value);\n      });\n    }\n\n    return {\n      tokenBalances,\n      raw_data,\n    };\n  }\n  public async getAllTokenBalances<R, T = TokenAddress>(\n    request: GetALLTokenBalancesRequest\n  ): Promise<{\n    tokenBalances: LoopringMap<string>;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: { ...request },\n      url: LOOPRING_URLs.GET_AKK_TOKEN_BALANCES,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      tokenBalances: raw_data,\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns the allowances of all supported tokens\n   */\n  public async getAllowances<R, T = TokenAddress>(\n    request: GetAllowancesRequest\n    // tokens: any\n  ): Promise<{\n    raw_data: R;\n    tokenAllowances: Map<T, string>;\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: {\n        ...request,\n        token: request.token.join(SEP),\n      },\n      url: LOOPRING_URLs.GET_ALLOWANCES,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const tokenAllowances: Map<T, string> = new Map<T, string>();\n\n    if (raw_data?.allowances instanceof Array) {\n      raw_data.allowances.forEach((value: any, index: number) => {\n        tokenAllowances.set(request.token[index] as unknown as T, value);\n      });\n    }\n\n    return {\n      tokenAllowances,\n      raw_data,\n    };\n  }\n\n  /*\n   * Return various configurations of Loopring.io\n   */\n  public async getExchangeInfo<R>(): Promise<{\n    exchangeInfo: ExchangeInfo;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_EXCHANGE_INFO,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const exchangeInfo: ExchangeInfo = {\n      ammExitFees: getFeeMap(raw_data.ammExitFees),\n      chainId: raw_data.chainId,\n      depositAddress: raw_data.depositAddress,\n      exchangeAddress: raw_data.exchangeAddress,\n      fastWithdrawalFees: getFeeMap(raw_data.fastWithdrawalFees),\n      onchainFees: getFeeMap(raw_data.onchainFees, 1),\n      openAccountFees: getFeeMap(raw_data.openAccountFees),\n      transferFees: getFeeMap(raw_data.transferFees),\n      updateFees: getFeeMap(raw_data.updateFees),\n      withdrawalFees: getFeeMap(raw_data.withdrawalFees),\n    };\n\n    return {\n      exchangeInfo,\n      raw_data,\n    };\n  }\n\n  public async getMixDepth<R>(request: GetDepthRequest) {\n    return await this.getDepth<R>(request, LOOPRING_URLs.GET_MIX_DEPTH);\n  }\n\n  /*\n   * Returns the order book of a given trading pair.\n   */\n  public async getDepth<R>(\n    request: GetDepthRequest,\n    url: string = LOOPRING_URLs.GET_DEPTH\n  ): Promise<{\n    depth: DepthData;\n    raw_data: R;\n  }> {\n    if (request?.level === undefined) {\n      request.level = 0;\n    }\n\n    if (request?.limit === undefined) {\n      request.limit = 50;\n    }\n\n    const reqParams: ReqParams = {\n      queryParams: request,\n      url,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const timestamp = raw_data[\"timestamp\"];\n\n    const { asks, bids, mid_price } = getMidPrice({\n      _asks: raw_data[\"asks\"],\n      _bids: raw_data[\"bids\"],\n    });\n\n    const depth: DepthData = {\n      symbol: raw_data.market,\n      version: parseInt(raw_data.version),\n      timestamp,\n      mid_price,\n      bids: bids.ab_arr,\n      bids_prices: bids.ab_prices,\n      bids_amtTotals: bids.ab_amtTotals,\n      bids_volTotals: bids.ab_volTotals,\n      bids_amtTotal: bids.amtTotal.toString(),\n      bids_volTotal: bids.volTotal.toString(),\n      asks: asks.ab_arr,\n      asks_prices: asks.ab_prices,\n      asks_amtTotals: asks.ab_amtTotals,\n      asks_volTotals: asks.ab_volTotals,\n      asks_amtTotal: asks.amtTotal.toString(),\n      asks_volTotal: asks.volTotal.toString(),\n    };\n\n    return {\n      depth,\n      raw_data,\n    };\n  }\n\n  public async getMixTicker<R>(request: GetTickerRequest): Promise<{\n    tickMap: LoopringMap<TickerData>;\n    tickList: TickerData[];\n    raw_data: R;\n  }> {\n    return await this.getTicker<R>(request, LOOPRING_URLs.GET_MIX_TICKER);\n  }\n\n  /*\n   * Gets a markets ticker.\n   * Generally speaking, a ticker in Loopring consists in data from the market taken last 24Hours.\n   */\n  public async getTicker<R>(\n    request: GetTickerRequest,\n    url: string = LOOPRING_URLs.GET_TICKER\n  ): Promise<{\n    tickMap: LoopringMap<TickerData>;\n    tickList: TickerData[];\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const tickers = raw_data.tickers;\n    const tickMap: LoopringMap<TickerData> = {};\n    const tickList: TickerData[] = [];\n\n    if (tickers && tickers.length) {\n      tickers.forEach((item: any, ind: number, arr: any) => {\n        const open = parseFloat(item[4]);\n        const close = parseFloat(item[7]);\n\n        const symbol = item[0].replace(\"COMBINE-\", \"\");\n\n        const { base, quote } = getBaseQuote(symbol);\n\n        let change = 0;\n        if (!isNaN(open) && !isNaN(close)) {\n          change = (close - open) / open;\n        }\n\n        const timestamp = parseInt(item[1]);\n\n        const tick: TickerData = {\n          symbol,\n          base,\n          quote,\n          timestamp,\n          base_token_volume: item[2],\n          quote_token_volume: item[3],\n          open,\n          high: parseFloat(item[5]),\n          low: parseFloat(item[6]),\n          close,\n          count: parseInt(item[8]),\n          bid: parseFloat(item[9]),\n          ask: parseFloat(item[10]),\n          base_fee_amt: checkAmt(item[11]),\n          quote_fee_amt: checkAmt(item[12]),\n          change,\n        };\n\n        tickMap[symbol] = tick;\n        tickList.push(tick);\n      });\n    }\n\n    return {\n      tickMap,\n      tickList,\n      raw_data,\n    };\n  }\n\n  public async getAllMixTickers(markets: string | undefined = undefined) {\n    let request: GetTickerRequest;\n    if (!markets) {\n      const result = await this.getMixMarkets();\n      if (result.marketArrStr) {\n        request = {\n          market: result.marketArrStr,\n        };\n      } else {\n        return result;\n      }\n    } else {\n      request = {\n        market: markets,\n      };\n    }\n\n    return await this.getMixTicker(request);\n  }\n\n  public async getAllTickers(markets: string | undefined = undefined) {\n    let request: GetTickerRequest;\n    if (!markets) {\n      const result = await this.getMarkets();\n      if (result.marketArrStr) {\n        request = {\n          market: result.marketArrStr,\n        };\n      } else {\n        return result;\n      }\n    } else {\n      request = {\n        market: markets,\n      };\n    }\n\n    return await this.getTicker(request);\n  }\n\n  public async getMixCandlestick<R>(request: GetCandlestickRequest) {\n    return await this.getCandlestick<R>(\n      request,\n      LOOPRING_URLs.GET_MIX_CANDLESTICK\n    );\n  }\n\n  /*\n   * Gets candlesticks.\n   */\n  public async getCandlestick<R>(\n    request: GetCandlestickRequest,\n    url: string = LOOPRING_URLs.GET_CANDLESTICK\n  ): Promise<{\n    candlesticks: Candlestick[];\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    let tsStep = 60000;\n\n    switch (request.interval) {\n      case TradingInterval.min1:\n        break;\n      case TradingInterval.min5:\n        tsStep = 300000;\n        break;\n      case TradingInterval.min15:\n        tsStep = 900000;\n        break;\n      case TradingInterval.min30:\n        tsStep = 1800000;\n        break;\n      case TradingInterval.hr1:\n        tsStep = 3600000;\n        break;\n      case TradingInterval.hr2:\n        tsStep = 7200000;\n        break;\n      case TradingInterval.hr4:\n        tsStep = 14400000;\n        break;\n      case TradingInterval.hr12:\n        tsStep = 43200000;\n        break;\n      case TradingInterval.d1:\n        tsStep = 86400000;\n        break;\n      case TradingInterval.w1:\n        tsStep = 604800000;\n        break;\n      default:\n        break;\n    }\n\n    let candlesticks: Candlestick[] = [];\n\n    if (raw_data?.candlesticks instanceof Array) {\n      const rawCandlesticks = raw_data.candlesticks.reverse();\n\n      let lastCandlestick: Candlestick | undefined = undefined;\n      let lastTs = -1;\n\n      rawCandlesticks.forEach((item: any) => {\n        const curTs = parseInt(item[0]);\n\n        if (lastCandlestick === undefined) {\n          lastTs = curTs;\n\n          const candlestick: Candlestick = {\n            timestamp: curTs,\n            txs: parseInt(item[1]),\n            open: parseFloat(item[2]),\n            close: parseFloat(item[3]),\n            high: parseFloat(item[4]),\n            low: parseFloat(item[5]),\n            baseVol: item[6],\n            quoteVol: item[7],\n          };\n\n          lastCandlestick = candlestick;\n\n          candlesticks.push(candlestick);\n        } else {\n          const counter = (curTs - lastTs) / tsStep;\n\n          // myLog('counter:', curTs, lastTs, counter)\n\n          for (let i = 1; i <= counter; i++) {\n            let candlestick: Candlestick;\n\n            if (i === counter) {\n              candlestick = {\n                timestamp: lastTs + i * tsStep,\n                txs: parseInt(item[1]),\n                open: parseFloat(item[2]),\n                close: parseFloat(item[3]),\n                high: parseFloat(item[4]),\n                low: parseFloat(item[5]),\n                baseVol: item[6],\n                quoteVol: item[7],\n              };\n\n              lastTs = curTs;\n              lastCandlestick = candlestick;\n            } else {\n              candlestick = {\n                timestamp: lastTs + i * tsStep,\n                txs: 0,\n                open: lastCandlestick.close,\n                close: lastCandlestick.close,\n                high: lastCandlestick.close,\n                low: lastCandlestick.close,\n                baseVol: \"0\",\n                quoteVol: \"0\",\n              };\n            }\n\n            candlesticks.push(candlestick);\n          }\n        }\n      });\n    }\n\n    candlesticks = candlesticks.reverse();\n\n    return {\n      candlesticks,\n      raw_data,\n    };\n  }\n\n  /*\n   * Fetches, for all the tokens supported by Loopring, their fiat price.\n   */\n  public async getFiatPrice<R>(request: GetFiatPriceRequest) {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_FIAT_PRICE,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const fiatPrices: LoopringMap<FiatPriceInfo> = {};\n\n    if (raw_data?.prices instanceof Array) {\n      raw_data.prices.forEach((item: FiatPriceInfo) => {\n        fiatPrices[item.symbol] = item;\n      });\n    }\n\n    return {\n      fiatPrices,\n      raw_data,\n    };\n  }\n\n  /*\n   * Fetches, for all the tokens supported by Loopring, their fiat price.\n   */\n  public async disableWithdrawTokenList<R>(): Promise<{\n    raw_data: R;\n    disableWithdrawTokenList: any[];\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_IGNORE_WITHDRAW,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const disableWithdrawTokenList = [...raw_data];\n    return {\n      disableWithdrawTokenList,\n      raw_data,\n    };\n  }\n\n  /*\n   * Query trades with specified market\n   */\n  public async getMarketTrades<R>(request: GetMarketTradesRequest): Promise<{\n    totalNum: number;\n    marketTrades: MarketTradeInfo[];\n    raw_data: R;\n  }> {\n    if (request.limit === undefined) {\n      request.limit = 20;\n    }\n\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_TRADES,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const marketTrades: MarketTradeInfo[] = [];\n\n    if (raw_data?.trades instanceof Array) {\n      raw_data.trades.forEach((item: any) => {\n        marketTrades.push({\n          tradeTime: parseInt(item[0]),\n          tradeId: item[1],\n          side: item[2] as Side,\n          volume: item[3],\n          price: item[4],\n          market: item[5],\n          fee: item[6],\n          type: item[13],\n        });\n      });\n    }\n\n    return {\n      totalNum: raw_data.totalNum,\n      marketTrades,\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns data associated with the user's exchange account.\n   */\n  public async getAccount<R>(request: GetAccountRequest): Promise<{\n    accInfo: AccountInfo;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.ACCOUNT_ACTION,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const accInfo: AccountInfo = raw_data as AccountInfo;\n    return {\n      accInfo,\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getEthNonce<R>(\n    request: GetEthNonceRequest\n  ): Promise<{ nonce: number; raw_data: R }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      url: LOOPRING_URLs.GET_ETH_NONCE,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      nonce: raw_data?.nonce,\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getGasPrice<R>(): Promise<{\n    gasPrice: number;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_GAS_PRICE,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    const gasPrice = raw_data?.price;\n\n    return {\n      gasPrice,\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getGasPriceRange<R>(): Promise<{\n    gasPriceRanges: any;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_GAS_PRICE_RANGE,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const gasPriceRanges = raw_data?.ranges;\n\n    return {\n      gasPriceRanges,\n      raw_data,\n    };\n  }\n\n  public async getAccountServices<R>(\n    request: GetAccountServicesRequest\n  ): Promise<{\n    register: any;\n    order: any;\n    joinAmm: any;\n    dAppTrade: any;\n    legal: any;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      url: LOOPRING_URLs.GET_ACCOUNT_SERVICES,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      ...raw_data,\n      register: raw_data?.register,\n      order: raw_data?.order,\n      joinAmm: raw_data?.joinAmm,\n      dAppTrade: raw_data?.dAppTrade,\n      legal: raw_data?.dAppTrade,\n      raw_data,\n    };\n  }\n}\n","import Web3 from \"web3\";\nimport { Transaction } from \"@ethereumjs/tx\";\n\nimport { ChainId } from \"../defs/web3_defs\";\n\nimport { TokenInfo } from \"../defs/loopring_defs\";\n\nimport * as fm from \"../utils/formatter\";\n\nimport Contracts from \"./ethereum/contracts/Contracts\";\n\nimport { addHexPrefix, toHex, toNumber } from \"../utils/formatter\";\n\nexport enum ERC20Method {\n  Approve = \"approve\",\n  Deposit = \"deposit\",\n  ForceWithdraw = \"forceWithdraw\",\n}\n\nexport const ApproveVal = {\n  Zero: \"0x0\",\n  Max: \"0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\",\n};\n\nfunction checkWeb3(web3: any) {\n  if (!web3) throw new Error(\"got undefined web3\");\n}\n\n/**\n * @description sign hash\n * @param web3\n * @param account\n * @param hash\n * @returns {Promise.<*>}\n */\nexport async function sign(\n  web3: any,\n  account: string,\n  pwd: string,\n  hash: string\n) {\n  checkWeb3(web3);\n  return new Promise((resolve) => {\n    web3.eth.sign(hash, account, pwd, function (err: any, result: any) {\n      if (!err) {\n        const r = result.slice(0, 66);\n        const s = addHexPrefix(result.slice(66, 130));\n        let v = toNumber(addHexPrefix(result.slice(130, 132)));\n        if (v === 0 || v === 1) v = v + 27; // 修复ledger的签名\n        resolve({ result: { r, s, v } });\n      } else {\n        const errorMsg = err.message.substring(0, err.message.indexOf(\" at \"));\n        resolve({ error: { message: errorMsg } });\n      }\n    });\n  });\n}\n\n/**\n * @description Signs ethereum tx\n * @param web3\n * @param account\n * @param rawTx\n * @returns {Promise.<*>}\n */\nexport async function signEthereumTx(\n  web3: any,\n  account: string,\n  rawTx: any,\n  chainId: ChainId\n) {\n  const ethTx = Transaction.fromSerializedTx(rawTx);\n  const hash = toHex(ethTx.hash());\n  try {\n    const response: any = await sign(web3, account, \"\", hash);\n    if (!response.error) {\n      const signature = response[\"result\"];\n      signature.v += chainId * 2 + 8;\n\n      const jsonTx = Object.assign(ethTx.toJSON(), signature);\n\n      jsonTx.from = rawTx.from;\n\n      return { result: fm.toHex(JSON.stringify(jsonTx)), rawTx: jsonTx };\n    } else {\n      return { error: response.error };\n      // throw new Error(response[\"error\"][\"message\"]);\n    }\n  } catch (err) {\n    return { error: err };\n  }\n}\n\nexport async function getNonce(web3: Web3, addr: string) {\n  if (web3) return await web3.eth.getTransactionCount(addr);\n  return -1;\n}\n\nexport async function sendRawTx(\n  web3: any,\n  from: string,\n  to: string,\n  value: any,\n  data: any,\n  chainId: ChainId,\n  nonce: number | undefined | null,\n  gasPrice: any,\n  gasLimit: number | undefined,\n  sendByMetaMask = true\n) {\n  checkWeb3(web3);\n\n  gasPrice = fm.fromGWEI(gasPrice).toNumber();\n  const rawTx = {\n    from,\n    to,\n    value,\n    data,\n    chainId,\n    nonce,\n    gasPrice,\n    gasLimit,\n  };\n\n  if (sendByMetaMask) {\n    return await sendTransaction(web3, rawTx);\n  }\n\n  const res = await signEthereumTx(web3, from, rawTx, chainId);\n\n  if (res?.rawTx) {\n    return await sendTransaction(web3, res.rawTx);\n  }\n\n  return res;\n}\n\nfunction _genContractData(Contract: any, method: string, data: any) {\n  return Contract.encodeInputs(method, data);\n}\n\nfunction genERC20Data(method: string, data: any) {\n  return _genContractData(Contracts.ERC20Token, method, data);\n}\n\nexport function genExchangeData(method: string, data: any) {\n  return _genContractData(Contracts.ExchangeContract, method, data);\n}\n\nexport async function approve(\n  web3: Web3,\n  from: string,\n  to: string,\n  depositAddress: string,\n  _value: string,\n  chainId: ChainId,\n  nonce: number,\n  gasPrice: number,\n  gasLimit: number,\n  sendByMetaMask: boolean\n) {\n  const data = genERC20Data(ERC20Method.Approve, {\n    _spender: depositAddress,\n    _value,\n  });\n\n  return await sendRawTx(\n    web3,\n    from,\n    to,\n    \"0\",\n    data,\n    chainId,\n    nonce,\n    gasPrice,\n    gasLimit,\n    sendByMetaMask\n  );\n}\n\n// 3.6\n/**\n * Approve Zero\n * @param tokenAddress: approve token symbol to zero\n * @param nonce: Ethereum nonce of this address\n * @param gasPrice: gas price in gwei\n * @param sendByMetaMask\n */\nexport async function approveZero(\n  web3: any,\n  owner: string,\n  tokenAddress: string,\n  depositAddress: string,\n  gasPrice: number,\n  gasLimit: number,\n  chainId: ChainId = ChainId.GOERLI,\n  nonce: number,\n  sendByMetaMask = false\n) {\n  return await approve(\n    web3,\n    owner,\n    tokenAddress,\n    depositAddress,\n    ApproveVal.Zero,\n    chainId,\n    nonce,\n    gasPrice,\n    gasLimit,\n    sendByMetaMask\n  );\n}\n\n// 3.6\n/**\n * Approve Max\n * @param tokenAddress: approve token symbol to max\n * @param nonce: Ethereum nonce of this address\n * @param gasPrice: gas price in gwei\n * @param sendByMetaMask\n */\nexport async function approveMax(\n  web3: any,\n  owner: string,\n  tokenAddress: string,\n  depositAddress: string,\n  gasPrice: number,\n  gasLimit: number,\n  chainId: ChainId = ChainId.GOERLI,\n  nonce: number,\n  sendByMetaMask = false\n) {\n  return await approve(\n    web3,\n    owner,\n    tokenAddress,\n    depositAddress,\n    ApproveVal.Max,\n    chainId,\n    nonce,\n    gasPrice,\n    gasLimit,\n    sendByMetaMask\n  );\n}\n\n// 3.6\n/**\n * deposit\n */\nexport async function deposit(\n  web3: any,\n  from: string,\n  exchangeAddress: string,\n  token: TokenInfo,\n  value: number,\n  fee: number,\n  gasPrice: number,\n  gasLimit: number,\n  chainId: ChainId = ChainId.GOERLI,\n  nonce: number,\n  sendByMetaMask = true,\n  to?: string\n) {\n  let valueC = fm.toBig(value).times(\"1e\" + token.decimals);\n\n  const amount = fm.toHex(valueC);\n\n  const data = genExchangeData(ERC20Method.Deposit, {\n    tokenAddress: token.address,\n    amount,\n    from,\n    to: to ? to : from,\n    extraData: \"\",\n  });\n\n  if (token.type === \"ETH\") {\n    valueC = valueC.plus(fee);\n  } else {\n    valueC = fm.toBig(fee);\n  }\n\n  return await sendRawTx(\n    web3,\n    from,\n    exchangeAddress,\n    valueC.toFixed(),\n    data,\n    chainId,\n    nonce,\n    gasPrice,\n    gasLimit,\n    sendByMetaMask\n  );\n}\n\n/**\n * forceWithdrawal\n */\nexport async function forceWithdrawal(\n  web3: any,\n  from: string,\n  accountID: number,\n  exchangeAddress: string,\n  token: TokenInfo,\n  fee: number,\n  gasPrice: number,\n  gasLimit: number,\n  chainId: ChainId = ChainId.GOERLI,\n  nonce: number,\n  sendByMetaMask = false\n) {\n  const valueC = fm.toBig(fee);\n  const data = genExchangeData(ERC20Method.ForceWithdraw, {\n    owner: from,\n    tokenAddress: token.address,\n    accountID,\n  });\n  return await sendRawTx(\n    web3,\n    from,\n    exchangeAddress,\n    valueC.toFixed(),\n    data,\n    chainId,\n    nonce,\n    gasPrice,\n    gasLimit,\n    sendByMetaMask\n  );\n}\n\n/**\n * @description Sends ethereum tx through MetaMask\n * @param web3\n * @param tx\n * @returns {*}\n */\nexport async function sendTransaction(web3: any, tx: any) {\n  delete tx.gasPrice;\n  // delete tx.gas;\n  const response: any = await new Promise((resolve) => {\n    web3.eth.sendTransaction(tx, function (err: any, transactionHash: string) {\n      if (!err) {\n        resolve({ result: transactionHash });\n      } else {\n        resolve({ error: { message: err.message } });\n      }\n    });\n  });\n\n  if (response[\"result\"]) {\n    return response;\n  } else {\n    throw new Error(response[\"error\"][\"message\"]);\n  }\n}\n\nexport async function isContract(web3: any, address: string) {\n  const code = await web3.eth.getCode(address);\n  return code && code.length > 2;\n}\n","/* eslint-disable camelcase  */\nimport { BaseAPI } from \"./base_api\";\nimport {\n  AmmPoolActivityRule,\n  AmmPoolBalance,\n  AmmPoolInfoV3,\n  AmmPoolInProgressActivityRule,\n  AmmPoolRequestPatch,\n  AmmPoolSnapshot,\n  AmmPoolStat,\n  AmmPoolTrade,\n  AmmPoolTx,\n  AmmUserReward,\n  AmmUserRewardMap,\n  ExitAmmPoolRequest,\n  ExitAmmPoolResult,\n  GameRankInfo,\n  GetAmmAssetRequest,\n  GetAmmPoolGameRankRequest,\n  GetAmmPoolGameUserRankRequest,\n  GetAmmPoolSnapshotRequest,\n  GetAmmPoolTradesRequest,\n  GetAmmPoolTxsRequest,\n  GetAmmUserRewardsRequest,\n  GetLiquidityMiningRequest,\n  GetLiquidityMiningUserHistoryRequest,\n  GetUserAmmPoolTxsRequest,\n  JoinAmmPoolRequest,\n  JoinAmmPoolResult,\n  LoopringMap,\n  ReqParams,\n  RewardItem,\n  TokenRelatedInfo,\n  TokenVolumeV3,\n  UserAmmPoolTx,\n  UserMiningInfo,\n} from \"../defs\";\n\nimport { AmmPoolActivityStatus, ReqMethod, SIG_FLAG, SortOrder } from \"../defs\";\n\nimport { LOOPRING_URLs } from \"../defs\";\n\nimport * as sign_tools from \"./sign/sign_tools\";\nimport { makeAmmPool } from \"../utils\";\n\nexport class AmmpoolAPI extends BaseAPI {\n  /*\n   * Returns the fee rate of users placing orders in specific markets\n   */\n  public async getAmmPoolConf<R>(): Promise<{\n    raw_data: R;\n    ammpools: LoopringMap<AmmPoolInfoV3>;\n    pairs: LoopringMap<TokenRelatedInfo>;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_AMM_POOLS_CONF,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    const { ammpools, pairs } = makeAmmPool(raw_data);\n    // if (raw_data.code) {\n    //   return {\n    //     ...raw_data,\n    //   };\n    // }\n\n    return {\n      ammpools,\n      pairs,\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getAmmPoolUserRewards<R>(\n    request: GetAmmUserRewardsRequest\n  ): Promise<{\n    raw_data: R;\n    ammUserRewardMap: AmmUserRewardMap;\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      url: LOOPRING_URLs.GET_AMMPOOL_REWARDS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    const ammUserRewardMap: AmmUserRewardMap = {};\n\n    if (raw_data?.current) {\n      raw_data?.current.forEach((item: AmmUserReward) => {\n        ammUserRewardMap[item.market] = {\n          current: item,\n          lastDay: undefined,\n        };\n      });\n    }\n    if (raw_data?.lastDay) {\n      raw_data?.lastDay.forEach((item: AmmUserReward) => {\n        ammUserRewardMap[item.market] = {\n          ...ammUserRewardMap[item.market],\n          lastDay: item,\n        };\n      });\n    }\n\n    return {\n      ammUserRewardMap,\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getAmmPoolGameRank<R>(\n    request: GetAmmPoolGameRankRequest\n  ): Promise<{\n    raw_data: R;\n    totalRewards: TokenVolumeV3[];\n    userRankList: GameRankInfo[];\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      url: LOOPRING_URLs.GET_AMMPOOL_GAME_RANK,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const totalRewards: TokenVolumeV3[] = raw_data?.totalRewards\n      ? raw_data.totalRewards\n      : [];\n\n    const userRankList: GameRankInfo[] = raw_data?.userRankList\n      ? raw_data.userRankList\n      : [];\n\n    return {\n      totalRewards,\n      userRankList,\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getAmmPoolGameUserRank<R>(\n    request: GetAmmPoolGameUserRankRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    userRank: GameRankInfo;\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      apiKey,\n      url: LOOPRING_URLs.GET_AMMPOOL_GAME_USER_RANK,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n    const userRank: GameRankInfo = raw_data.data;\n\n    return {\n      userRank,\n      raw_data: raw_data.data,\n    };\n  }\n\n  private getOrderList(lst: AmmPoolActivityRule[], order: SortOrder) {\n    return lst.sort((a: AmmPoolActivityRule, b: AmmPoolActivityRule) => {\n      if (order === SortOrder.ASC) {\n        return a.rangeFrom < b.rangeFrom ? 1 : 0;\n      }\n\n      return a.rangeFrom > b.rangeFrom ? 1 : 0;\n    });\n  }\n\n  /*\n   */\n  public async getAmmPoolActivityRules<R>(): Promise<{\n    raw_data: R;\n    activityInProgressRules: LoopringMap<AmmPoolInProgressActivityRule>;\n    activityDateMap: LoopringMap<{\n      AMM_MINING?: LoopringMap<AmmPoolActivityRule>;\n      ORDERBOOK_MINING?: LoopringMap<AmmPoolActivityRule>;\n      SWAP_VOLUME_RANKING?: LoopringMap<AmmPoolActivityRule>;\n    }>;\n    groupByRuleType: LoopringMap<AmmPoolActivityRule[]>;\n    groupByActivityStatus: LoopringMap<AmmPoolActivityRule[]>;\n    groupByRuleTypeAndStatus: LoopringMap<LoopringMap<AmmPoolActivityRule[]>>;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_AMM_ACTIVITY_RULES,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    let activityInProgressRules: LoopringMap<AmmPoolInProgressActivityRule> =\n      {};\n    const activityDateMap: LoopringMap<{\n      AMM_MINING?: LoopringMap<AmmPoolActivityRule>;\n      ORDERBOOK_MINING?: LoopringMap<AmmPoolActivityRule>;\n      SWAP_VOLUME_RANKING?: LoopringMap<AmmPoolActivityRule>;\n    }> = {};\n    //{AMM_MINING:{},ORDERBOOK_MINING:{},SWAP_VOLUME_RANKING:{}}\n\n    const groupByRuleType: LoopringMap<AmmPoolActivityRule[]> = {};\n\n    let groupByRuleTypeAndStatus: LoopringMap<\n      LoopringMap<AmmPoolActivityRule[]>\n    > = {};\n\n    const groupByActivityStatus: LoopringMap<AmmPoolActivityRule[]> = {};\n\n    const currentTs = new Date().getTime();\n\n    if (raw_data instanceof Array) {\n      raw_data.forEach((item: AmmPoolActivityRule) => {\n        const status =\n          currentTs < item.rangeFrom\n            ? AmmPoolActivityStatus.NotStarted\n            : currentTs >= item.rangeFrom && currentTs <= item.rangeTo\n            ? AmmPoolActivityStatus.InProgress\n            : AmmPoolActivityStatus.EndOfGame;\n\n        item.status = status;\n        if (status === AmmPoolActivityStatus.InProgress) {\n          const ruleType = activityInProgressRules[item.market]\n            ? [...activityInProgressRules[item.market].ruleType, item.ruleType]\n            : [item.ruleType];\n          activityInProgressRules = {\n            ...activityInProgressRules,\n            [item.market]: { ...item, ruleType },\n          };\n        }\n        groupByRuleType[item.ruleType] = [\n          ...(groupByRuleType[item.ruleType]\n            ? groupByRuleType[item.ruleType]\n            : []),\n          item,\n        ];\n        groupByActivityStatus[status] = [\n          ...(groupByActivityStatus[status]\n            ? groupByActivityStatus[status]\n            : []),\n          item,\n        ];\n        activityDateMap[item.rangeFrom] = {\n          ...(activityDateMap[item.rangeFrom]\n            ? activityDateMap[item.rangeFrom]\n            : {}),\n          [item.ruleType]: {\n            ...(activityDateMap[item.rangeFrom]\n              ? activityDateMap[item.rangeFrom][item.ruleType]\n                ? activityDateMap[item.rangeFrom][item.ruleType]\n                : {}\n              : {}),\n            [item.market]: item,\n          },\n        };\n        groupByRuleTypeAndStatus = {\n          ...groupByRuleTypeAndStatus,\n          [item.ruleType]: {\n            ...(groupByRuleTypeAndStatus[item.ruleType]\n              ? groupByRuleTypeAndStatus[item.ruleType]\n              : {}),\n            [status]: [\n              ...(groupByRuleTypeAndStatus[item.ruleType]\n                ? groupByRuleTypeAndStatus[item.ruleType][status]\n                  ? groupByRuleTypeAndStatus[item.ruleType][status]\n                  : []\n                : []),\n              item,\n            ],\n          },\n        };\n      });\n    }\n\n    return {\n      activityInProgressRules,\n      activityDateMap,\n      groupByRuleType,\n      groupByActivityStatus,\n      groupByRuleTypeAndStatus,\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getAmmAssetHistory<R>(request: GetAmmAssetRequest): Promise<{\n    raw_data: R;\n    poolAddress: string;\n    market: string;\n    dataSeries: any;\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      url: LOOPRING_URLs.GET_AMM_ASSET_HISTORY,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const poolAddress = raw_data.poolAddress;\n    const market = raw_data.market;\n    const dataSeries = raw_data.data;\n\n    return {\n      poolAddress,\n      market,\n      dataSeries,\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getAmmPoolStats<R>(): Promise<{\n    raw_data: R;\n    ammPoolStats: LoopringMap<AmmPoolStat>;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_AMM_POOL_STATS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n    const ammPoolStats: LoopringMap<AmmPoolStat> = {};\n\n    if (raw_data instanceof Array) {\n      raw_data.forEach((item: AmmPoolStat) => {\n        ammPoolStats[item.market] = item;\n      });\n    }\n\n    return {\n      ammPoolStats,\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getAmmPoolSnapshot<R>(\n    request: GetAmmPoolSnapshotRequest\n  ): Promise<{\n    raw_data: R;\n    ammPoolSnapshot: AmmPoolSnapshot;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_AMM_POOLS_SNAPSHOT,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const ammPoolSnapshot: AmmPoolSnapshot = raw_data;\n\n    return {\n      ammPoolSnapshot,\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getAmmPoolBalances<R>(): Promise<{\n    raw_data: R;\n    ammpoolsbalances: LoopringMap<AmmPoolBalance>;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_AMM_POOLS_BALANCES,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const ammpoolsbalances: LoopringMap<AmmPoolBalance> = {};\n\n    if (raw_data instanceof Array) {\n      raw_data.forEach((item: any) => {\n        const tempPooled: any = {};\n\n        if (item?.pooled instanceof Array) {\n          item.pooled.forEach((item2: any) => {\n            tempPooled[item2.tokenId] = item2;\n          });\n        }\n\n        item.pooledMap = tempPooled;\n\n        let poolName = item.poolName;\n        if (poolName.indexOf(\"LRCETH\") >= 0) {\n          poolName = \"AMM-LRC-ETH\";\n        }\n\n        ammpoolsbalances[poolName] = item;\n      });\n    }\n\n    return {\n      ammpoolsbalances,\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getLiquidityMining<R>(\n    request: GetLiquidityMiningRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    rewards: RewardItem[];\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      apiKey,\n      url: LOOPRING_URLs.GET_LIQUIDITY_MINING,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      rewards: raw_data?.data ? (raw_data.data as RewardItem[]) : [],\n\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getLiquidityMiningUserHistory<R>(\n    request: GetLiquidityMiningUserHistoryRequest\n  ): Promise<{\n    raw_data: R;\n    userMiningInfos: UserMiningInfo[];\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n\n      url: LOOPRING_URLs.GET_LIQUIDITY_MINING_USER_HISTORY,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    return {\n      userMiningInfos: raw_data.data as UserMiningInfo[],\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getUserAmmPoolTxs<R>(\n    request: GetUserAmmPoolTxsRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userAmmPoolTxs: UserAmmPoolTx[];\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      apiKey,\n      url: LOOPRING_URLs.GET_USER_AMM_POOL_TXS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    return {\n      totalNum: raw_data.totalNum,\n      userAmmPoolTxs: raw_data.transactions as UserAmmPoolTx[],\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getAmmPoolTxs<R>(request: GetAmmPoolTxsRequest): Promise<{\n    raw_data: R;\n    totalNum: number;\n    transactions: AmmPoolTx[];\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      url: LOOPRING_URLs.GET_AMM_POOL_TXS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    let transactions = undefined;\n\n    if (raw_data?.transactions) {\n      transactions = raw_data?.transactions;\n    }\n\n    return {\n      totalNum: raw_data.totalNum,\n      transactions: transactions as AmmPoolTx[],\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async getAmmPoolTrades<R>(request: GetAmmPoolTradesRequest): Promise<{\n    raw_data: R;\n    totalNum: number;\n    ammPoolTrades: AmmPoolTrade[];\n  }> {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      url: LOOPRING_URLs.GET_AMM_POOL_TRADE_TXS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      totalNum: raw_data.totalNum,\n      ammPoolTrades: raw_data.transactions as AmmPoolTrade[],\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async joinAmmPool<R>(\n    request: JoinAmmPoolRequest,\n    patch: AmmPoolRequestPatch,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    joinAmmPoolResult: JoinAmmPoolResult;\n  }> {\n    if (!request?.validUntil) request.validUntil = Date.now();\n\n    const reqParams: ReqParams = {\n      bodyParams: request,\n      apiKey,\n      url: LOOPRING_URLs.POST_JOIN_AMM_POOL,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const { eddsaSig } = sign_tools.get_EddsaSig_JoinAmmPool(request, patch);\n\n    request.eddsaSignature = eddsaSig;\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      joinAmmPoolResult: raw_data as JoinAmmPoolResult,\n      raw_data,\n    };\n  }\n\n  /*\n   */\n  public async exitAmmPool<R>(\n    request: ExitAmmPoolRequest,\n    patch: AmmPoolRequestPatch,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    exitAmmPoolResult: ExitAmmPoolResult;\n  }> {\n    if (!request?.validUntil) request.validUntil = Date.now();\n\n    const reqParams: ReqParams = {\n      bodyParams: request,\n      apiKey,\n      url: LOOPRING_URLs.POST_EXIT_AMM_POOL,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const { eddsaSig } = sign_tools.get_EddsaSig_ExitAmmPool(request, patch);\n\n    request.eddsaSignature = eddsaSig;\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      exitAmmPoolResult: raw_data as ExitAmmPoolResult,\n      raw_data,\n    };\n  }\n}\n","/* eslint-disable @typescript-eslint/no-var-requires */\nimport { BaseAPI } from \"./base_api\";\nimport { CollectionMeta, LOOPRING_URLs, RESULT_INFO } from \"../defs\";\nimport {\n  ChainId,\n  ConnectorError,\n  LoopringErrorCode,\n  NftData,\n  NFTFactory,\n  NFTTokenInfo,\n  ReqMethod,\n  ReqParams,\n  SIG_FLAG,\n} from \"../defs\";\nimport { myLog } from \"../utils/log_tools\";\nimport * as ethUtil from \"ethereumjs-util\";\nimport { genExchangeData, sendRawTx } from \"./contract_api\";\nimport contracts from \"./ethereum/contracts\";\nimport {\n  ApproveParam,\n  CallRefreshNFT,\n  ContractNFTMetaParam,\n  DepositNFTParam,\n  IsApproveParam,\n  UserNFTBalanceParam,\n} from \"../defs/nft_defs\";\nimport BN from \"bn.js\";\nimport * as loopring_defs from \"../defs/loopring_defs\";\n\nconst CREATION_CODE = {\n  [ChainId.GOERLI]:\n    \"3d602d80600a3d3981f3363d3d373d3d3d363d735854e62554ce1c146a375c370bc0d323368b372d5af43d82803e903d91602b57fd5bf3\",\n  [ChainId.MAINNET]:\n    \"3d602d80600a3d3981f3363d3d373d3d3d363d73b25f6d711aebf954fb0265a3b29f7b9beba7e55d5af43d82803e903d91602b57fd5bf3\",\n};\n\nexport enum NFTType {\n  ERC1155 = 0,\n  ERC721,\n}\n\nexport enum NFT_TYPE_STRING {\n  ERC1155 = \"ERC1155\",\n  ERC721 = \"ERC721\",\n}\n\nexport enum NFTMethod {\n  setApprovalForAll = \"setApprovalForAll\",\n  isApprovedForAll = \"isApprovedForAll\",\n  uri = \"uri\",\n  tokenURI = \"tokenURI\",\n  depositNFT = \"depositNFT\",\n  balanceOf = \"balanceOf\",\n  ownerOf = \"ownerOf\",\n  // Deposit = 'deposit',\n  // ForceWithdraw = 'forceWithdraw'\n}\n\nexport class NFTAPI extends BaseAPI {\n  private async callContractMethod(\n    web3: any,\n    method: string,\n    data: any[],\n    contractAddress: string,\n    type: NFTType = NFTType.ERC1155\n  ) {\n    // return _genContractData(Contracts.ERC20Token, method, data)\n    const contract = this._genContract(web3, contractAddress, type);\n    return contract.methods[method](...data).call();\n  }\n\n  private _genContractData(Contract: any, method: string, data: any) {\n    return Contract.encodeInputs(method, data);\n  }\n\n  private _genERC1155Data(method: string, data: any) {\n    return this._genContractData(contracts.Contracts.ERC1155, method, data);\n  }\n\n  private _genERC721Data(method: string, data: any) {\n    return this._genContractData(contracts.Contracts.ERC721, method, data);\n  }\n\n  private _genContract(\n    web3: any,\n    contractAddress: string,\n    type: NFTType = NFTType.ERC1155\n  ) {\n    return new web3.eth.Contract(\n      type === NFTType.ERC1155\n        ? contracts.Contracts.erc1155Abi\n        : contracts.Contracts.erc721Abi,\n      contractAddress\n    );\n  }\n\n  /**\n   * getNFTBalance\n   * @param web3\n   * @param tokenAddress\n   * @param account\n   * @param nftId\n   * @param nftType\n   */\n  public async getNFTBalance({\n    web3,\n    tokenAddress,\n    account,\n    nftId,\n    nftType = NFTType.ERC1155,\n  }: UserNFTBalanceParam): Promise<{\n    count?: string;\n  }> {\n    try {\n      if (nftType === NFTType.ERC721) {\n        const result: string = await this.callContractMethod(\n          web3,\n          NFTMethod.ownerOf,\n          [nftId],\n          tokenAddress,\n          nftType\n        );\n        if (result.toLowerCase() === account.toLowerCase()) {\n          return {\n            count: \"1\",\n          };\n        } else {\n          return {\n            count: \"0\",\n          };\n        }\n      } else {\n        const result: string = await this.callContractMethod(\n          web3,\n          NFTMethod.balanceOf,\n          [account, web3.utils.hexToNumberString(nftId)],\n          tokenAddress,\n          nftType\n        );\n        return {\n          count: result.toString(),\n        };\n      }\n    } catch (err) {\n      return {\n        ...(err as any),\n        code: LoopringErrorCode.CONTRACTNFT_BALANCE,\n        message: ConnectorError.CONTRACTNFT_BALANCE,\n      };\n    }\n  }\n\n  /**\n   * getInfoForNFTTokens\n   * @param nftDatas NftData[]\n   */\n  public async getInfoForNFTTokens({\n    nftDatas,\n  }: {\n    nftDatas: NftData[];\n  }): Promise<{ [key: string]: NFTTokenInfo } | undefined> {\n    try {\n      const reqParams: ReqParams = {\n        sigFlag: SIG_FLAG.NO_SIG,\n        url: LOOPRING_URLs.GET_NFTs_INFO,\n        method: ReqMethod.GET,\n        queryParams: { nftDatas: nftDatas.join(\",\") },\n      };\n      const raw_data = (await this.makeReq().request(reqParams)).data;\n      if (raw_data?.resultInfo) {\n        return {\n          ...raw_data?.resultInfo,\n        };\n      }\n      const result = raw_data.reduce(\n        (prev: { [key: string]: NFTTokenInfo }, item: NFTTokenInfo) => {\n          if (item.nftId && item.nftId.startsWith(\"0x\")) {\n            const hashBN = new BN(item.nftId.replace(\"0x\", \"\"), 16);\n            item.nftId = \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n          }\n          prev[item.nftData] = item;\n          return prev;\n        },\n        {}\n      );\n      return {\n        ...result,\n        raw_data,\n      };\n    } catch (err) {\n      return undefined;\n    }\n  }\n\n  public async callRefreshNFT(\n    request: CallRefreshNFT\n  ): Promise<\n    { status: string; createdAt: number; updatedAt: number } | undefined\n  > {\n    try {\n      const reqParams: ReqParams = {\n        sigFlag: SIG_FLAG.NO_SIG,\n        bodyParams: request,\n        url: LOOPRING_URLs.POST_NFT_VALIDATE_REFRESH_NFT,\n        method: ReqMethod.POST,\n      };\n      const raw_data = (await this.makeReq().request(reqParams)).data;\n      if (raw_data?.resultInfo) {\n        return {\n          ...raw_data?.resultInfo,\n        };\n      }\n      const result = raw_data.reduce(\n        (prev: { [key: string]: NFTTokenInfo }, item: NFTTokenInfo) => {\n          if (item.nftId && item.nftId.startsWith(\"0x\")) {\n            const hashBN = new BN(item.nftId.replace(\"0x\", \"\"), 16);\n            item.nftId = \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n          }\n          prev[item.nftData] = item;\n          return prev;\n        },\n        {}\n      );\n      return {\n        ...result,\n        raw_data,\n      };\n    } catch (err) {\n      return undefined;\n    }\n  }\n\n  /**\n   * getContractNFTMeta\n   * @param web3\n   * @param tokenAddress\n   * @param _id\n   * @param nftType\n   */\n  public async getContractNFTMeta(\n    {\n      web3,\n      tokenAddress,\n      nftId,\n      nftType = NFTType.ERC1155,\n    }: ContractNFTMetaParam,\n    _IPFS_META_URL: string = LOOPRING_URLs.IPFS_META_URL\n  ) {\n    try {\n      myLog(tokenAddress, \"nftid\", nftId, web3.utils.hexToNumberString(nftId));\n      let result: string;\n      result = await this.callContractMethod(\n        web3,\n        nftType === NFTType.ERC1155 ? NFTMethod.uri : NFTMethod.tokenURI,\n        [web3.utils.hexToNumberString(nftId)],\n        tokenAddress,\n        nftType\n      );\n      result = result.replace(\n        /^ipfs:\\/\\/(ipfs\\/)?/,\n        LOOPRING_URLs.IPFS_META_URL\n      );\n      result = result.replace(\"{id}\", web3.utils.hexToNumberString(nftId));\n      return await fetch(result).then((response) => response.json());\n    } catch (err) {\n      return {\n        code: LoopringErrorCode.CONTRACTNFT_URI,\n        message: ConnectorError.CONTRACTNFT_URI,\n        ...(err as any),\n      };\n    }\n  }\n\n  /**\n   * approveNFT\n   * @param web3\n   * @param from  The address that deposits the funds to the exchange\n   * @param to  The address deposits to\n   * @param nftId the nftId\n   * @param chainId\n   * @param nftType The type of NFTAction contract address (ERC721/ERC1155/...)\n   * @param nonce\n   * @param gasPrice\n   * @param gasLimit\n   * @param sendByMetaMask\n   */\n  public async approveNFT({\n    web3,\n    from,\n    depositAddress,\n    tokenAddress,\n    nftId,\n    nftType = NFTType.ERC1155,\n    gasPrice,\n    gasLimit,\n    chainId,\n    nonce,\n    approved = true,\n    sendByMetaMask = true,\n  }: ApproveParam) {\n    let data: any;\n\n    if (nftType === NFTType.ERC1155) {\n      data = this._genERC1155Data(NFTMethod.setApprovalForAll, {\n        operator: depositAddress,\n        approved,\n      });\n    } else if (nftType === NFTType.ERC721) {\n      data = this._genERC721Data(NFTMethod.setApprovalForAll, {\n        operator: depositAddress,\n        approved,\n      });\n    }\n    try {\n      return await sendRawTx(\n        web3,\n        from,\n        tokenAddress,\n        \"0\",\n        data,\n        chainId,\n        nonce,\n        gasPrice,\n        gasLimit,\n        sendByMetaMask\n      );\n    } catch (err) {\n      return {\n        ...(err as any),\n        code: LoopringErrorCode.CONTRACTNFT_SET_APPROVE,\n        message: ConnectorError.CONTRACTNFT_SET_APPROVE,\n      };\n    }\n  }\n  public ipfsCid0ToNftID(cidV0Str: string): string {\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    const CID = require(\"cids\");\n    const cid = new CID(cidV0Str);\n    const hashHex = Buffer.from(cid.multihash.slice(2)).toString(\"hex\");\n    const hashBN = new BN(hashHex, 16);\n    return \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n  }\n\n  /**\n   *\n   * @param nftId  16\n   */\n  public ipfsNftIDToCid(nftId: string) {\n    const CID = require(\"cids\");\n    const hashBN = new BN(nftId.replace(\"0x\", \"\"), 16);\n    const hex = hashBN.toString(16, 64);\n    const buf = Buffer.from(\"1220\" + hex, \"hex\");\n    const cid = new CID(buf);\n    return cid.toString();\n  }\n  /**\n   * isApprovedForAll\n   * @param web3\n   * @param from The address that deposits the funds to the exchange\n   * @param exchangeAddress loopring exchange address\n   * @param nftType  NFTType\n   * @param tokenAddress  The address of NFT token\n   */\n  public async isApprovedForAll({\n    web3,\n    from,\n    exchangeAddress,\n    nftType = NFTType.ERC1155,\n    tokenAddress,\n  }: IsApproveParam) {\n    try {\n      const result = await this.callContractMethod(\n        web3,\n        NFTMethod.isApprovedForAll,\n        [from, exchangeAddress],\n        tokenAddress,\n        nftType\n      );\n      return result;\n    } catch (err) {\n      return {\n        ...(err as any),\n        code: LoopringErrorCode.CONTRACTNFT_IS_APPROVE,\n        message: ConnectorError.CONTRACTNFT_IS_APPROVE,\n      };\n    }\n  }\n\n  /**\n   * @DepositParam  an NFTAction to the specified account.\n   * @param web3\n   * @param from The address that deposits the funds to the exchange\n   * @param to The account owner's address receiving the funds\n   * @param nftType The type of NFTAction contract address (ERC721/ERC1155/...)\n   * @param tokenAddress The address of NFTAction token\n   * @param nftId The token type 'id`.\n   * @param amount The amount of tokens to deposit.\n   * @param nonce: number,\n   * @param gasPrice: number,\n   * @param gasLimit: number,\n   * @param extraData Optional extra data used by the deposit contract.\n   * @param chainId  0|5\n   * @param sendByMetaMask boolean\n   */\n  public async depositNFT({\n    web3,\n    from,\n    exchangeAddress,\n    nftType = NFTType.ERC1155,\n    tokenAddress,\n    nftId,\n    amount,\n    gasPrice,\n    gasLimit,\n    chainId = ChainId.MAINNET,\n    nonce,\n    extraData,\n    sendByMetaMask = true,\n  }: DepositNFTParam) {\n    const data = genExchangeData(NFTMethod.depositNFT, {\n      from,\n      to: from,\n      nftType,\n      tokenAddress,\n      nftId,\n      amount,\n      extraData: extraData ? extraData : \"\",\n    });\n    // myLog('depositNFT data',data)\n    return await sendRawTx(\n      web3,\n      from,\n      exchangeAddress,\n      \"0\",\n      data,\n      chainId,\n      nonce,\n      gasPrice,\n      gasLimit,\n      sendByMetaMask\n    );\n  }\n\n  /**\n   *\n   * @function computeNFTAddress\n   * @param owner {string} nftOwner address\n   * @param nftFactory {string} Hash address\n   * @return tokenAddress\n   * @throws Error\n   */\n  public computeNFTAddress({\n    nftOwner,\n    nftFactory = \"0xDB42E6F6cB2A2eFcF4c638cb7A61AdE5beD82609\",\n    nftBaseUri = \"\",\n  }: {\n    nftOwner: string;\n    nftFactory?: string;\n    nftBaseUri?: string;\n  }): { tokenAddress: string } {\n    try {\n      if (!nftFactory) {\n        nftFactory = NFTFactory[this.chainId];\n      }\n      if (nftOwner.startsWith(\"0x\")) {\n        nftOwner = nftOwner.slice(2);\n      }\n\n      const saltBuf = Buffer.concat([\n        Buffer.from(\"NFT_CONTRACT_CREATION\", \"utf8\"),\n        Buffer.from(nftOwner, \"hex\"),\n        Buffer.from(nftBaseUri, \"utf8\"),\n      ]);\n\n      const codeHash = ethUtil.keccak(\n        Buffer.from(CREATION_CODE[this.chainId], \"hex\")\n      );\n\n      const saltHash = ethUtil.keccak(saltBuf);\n\n      const rawBuf = Buffer.concat([\n        Buffer.from(\"ff\", \"hex\"),\n        Buffer.from(nftFactory.slice(2), \"hex\"),\n        saltHash,\n        codeHash,\n      ]);\n\n      const addr = ethUtil.keccak(rawBuf).slice(12).toString(\"hex\");\n      return {\n        tokenAddress: ethUtil.toChecksumAddress(\"0x\" + addr),\n      };\n    } catch (err) {\n      return err as any;\n    }\n  }\n\n  public async getPublicCollectionById<R extends CollectionMeta>(request: {\n    id: string;\n  }): Promise<({ raw_data: R } & CollectionMeta) | RESULT_INFO> {\n    try {\n      const reqParams: ReqParams = {\n        sigFlag: SIG_FLAG.NO_SIG,\n        queryParams: request,\n        url: LOOPRING_URLs.GET_NFT_COLLECTION_PUBLISH,\n        method: ReqMethod.GET,\n      };\n      const raw_data = (await this.makeReq().request(reqParams)).data;\n      if (raw_data?.resultInfo) {\n        return {\n          ...raw_data?.resultInfo,\n        };\n      }\n      const result = raw_data as CollectionMeta;\n      return {\n        ...result,\n        raw_data,\n      };\n    } catch (err) {\n      return {\n        ...(err as any),\n        code: exports.LoopringErrorCode.SKD_UNKNOW,\n      };\n    }\n  }\n\n  async getCollectionWholeNFTs<R>(\n    request: loopring_defs.GetCollectionWholeNFTsRequest\n  ) {\n    const reqParams = {\n      url: LOOPRING_URLs.GET_COLLECTION_WHOLE_NFTS,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    if (raw_data.nftTokenInfos.length) {\n      raw_data.nftTokenInfos = raw_data.nftTokenInfos.reduce(\n        (\n          prev: loopring_defs.UserNFTBalanceInfo[],\n          item: loopring_defs.UserNFTBalanceInfo\n        ) => {\n          if (item.nftId && item.nftId.startsWith(\"0x\")) {\n            const hashBN = new BN(item.nftId.replace(\"0x\", \"\"), 16);\n            item.nftId = \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n            if (\n              request.metadata === true &&\n              item.metadata &&\n              item.metadata.nftId &&\n              item.metadata.nftId.startsWith(\"0x\")\n            ) {\n              // const hashBN = new BN(item.metadata.nftId.replace(\"0x\", \"\"), 16);\n              item.metadata.nftId =\n                \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n            }\n          }\n          return [...prev, item];\n        },\n        []\n      );\n      // const hashBN = new BN(raw_data.transactions.metadata.nftId.replace(\"0x\", \"\"), 16);\n      // raw_data.transactions.metadata.nftId= \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n    }\n    return {\n      totalNum: raw_data?.totalNum,\n      userNFTBalances:\n        raw_data.nftTokenInfos as loopring_defs.UserNFTBalanceInfo[],\n      raw_data,\n    };\n  }\n}\n","/* eslint-disable camelcase  */\n\nimport { BaseAPI } from \"./base_api\";\n\nimport {\n  RESULT_INFO,\n  ReqMethod,\n  SIG_FLAG,\n  SigPatchField,\n  TradeChannel,\n  LOOPRING_URLs,\n  ConnectorNames,\n  SigSuffix,\n  NFTFactory,\n  ChainId,\n  NFTFactory_Collection,\n  LoopringErrorCode,\n  ConnectorError,\n  CounterFactualInfo,\n} from \"../defs\";\n\nimport * as loopring_defs from \"../defs/loopring_defs\";\n\nimport * as sign_tools from \"./sign/sign_tools\";\nimport { isContract } from \"./contract_api\";\nimport BN from \"bn.js\";\nimport { sortObjDictionary } from \"../utils\";\nimport { generateKeyPair, KeyPairParams } from \"./sign/sign_tools\";\nimport { AxiosResponse } from \"axios\";\n\nexport class UserAPI extends BaseAPI {\n  /*\n   * Change the ApiKey associated with the user's account.\n   * The current ApiKey must be provided as the value of the X-API-KEY HTTP header.\n   */\n  public async updateUserApiKey<R>(\n    request: loopring_defs.UpdateUserApiKeyRequest,\n    apiKey: string,\n    eddsaKey: string\n  ): Promise<{ raw_data: R }> {\n    const dataToSig: Map<string, any> = new Map();\n\n    dataToSig.set(\"accountId\", request.accountId);\n\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.API_KEY_ACTION,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n    };\n  }\n\n  /*\n   * Fetches the next order id for a given sold token.\n   * If the need arises to repeatedly place orders in a short span of time,\n   * the order id can be initially fetched through the API and then managed locally.\n   * Each new order id can be derived from adding 2 to the last one\n   */\n  public async getNextStorageId<R>(\n    request: loopring_defs.GetNextStorageIdRequest,\n    apiKey: string\n  ): Promise<{ raw_data: R; orderId: number; offchainId: number }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_NEXT_STORAGE_ID,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const { orderId, offchainId } = raw_data;\n    return {\n      orderId,\n      offchainId,\n      raw_data,\n    };\n  }\n\n  /*\n   * Get the details of an order based on order hash.\n   */\n  public async getOrderDetails<R>(\n    request: loopring_defs.GetOrderDetailsRequest,\n    apiKey: string\n  ): Promise<{ raw_data: R; orderDetail: loopring_defs.OrderDetail }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.ORDER_ACTION,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      orderDetail: raw_data,\n      raw_data,\n    };\n  }\n\n  public async getOrders<R>(\n    request: loopring_defs.GetOrdersRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    orders: loopring_defs.OrderDetail[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_MULTI_ORDERS,\n      queryParams: {\n        ...request,\n        status: request.status ? request.status.join(\",\") : \"\",\n      },\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const totalNum: number = raw_data.totalNum;\n    const orders: loopring_defs.OrderDetail[] = raw_data.orders;\n\n    return {\n      totalNum,\n      orders,\n      raw_data,\n    };\n  }\n\n  /*\n   * Submit an order\n   */\n  public async submitOrder(\n    orderRequest: loopring_defs.SubmitOrderRequestV3,\n    privateKey: string,\n    apiKey: string\n  ) {\n    if (!orderRequest.tradeChannel) {\n      orderRequest.tradeChannel = TradeChannel.MIXED;\n    }\n\n    const dataToSig = [\n      orderRequest.exchange,\n      orderRequest.storageId,\n      orderRequest.accountId,\n      orderRequest.sellToken.tokenId,\n      orderRequest.buyToken.tokenId,\n      orderRequest.sellToken.volume,\n      orderRequest.buyToken.volume,\n      orderRequest.validUntil,\n      orderRequest.maxFeeBips,\n      orderRequest.fillAmountBOrS ? 1 : 0,\n      0,\n    ];\n\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.ORDER_ACTION,\n      bodyParams: orderRequest,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG_POSEIDON,\n      sigObj: {\n        dataToSig,\n        sigPatch: SigPatchField.EddsaSignature,\n        PrivateKey: privateKey,\n      },\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    return this.returnTxHash(raw_data);\n  }\n\n  /*\n   * Cancel order using order hash or client-side ID.\n   */\n  public async cancelOrder<R>(\n    request: loopring_defs.CancelOrderRequest,\n    PrivateKey: string,\n    apiKey: string\n  ): Promise<{ raw_data: R }> {\n    const dataToSig: Map<string, any> = new Map();\n\n    dataToSig.set(\"accountId\", request.accountId);\n    if (request.orderHash) dataToSig.set(\"orderHash\", request.orderHash);\n    if (request.clientOrderId)\n      dataToSig.set(\"clientOrderId\", request.clientOrderId);\n\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.ORDER_ACTION,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.DELETE,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey,\n      },\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n    };\n  }\n\n  /*\n   * Cancel multiple orders using order hashes\n   */\n  public async cancelMultiOrdersByHash<R>(\n    request: loopring_defs.CancelMultiOrdersByHashRequest,\n    PrivateKey: string,\n    apiKey: string\n  ): Promise<{ raw_data: R }> {\n    const dataToSig: Map<string, any> = new Map();\n    dataToSig.set(\"accountId\", request.accountId);\n    dataToSig.set(\"orderHash\", request.orderHash);\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.ORDER_CANCEL_HASH_LIST,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.DELETE,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey,\n      },\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n    };\n  }\n\n  /*\n   * Cancel multiple orders using clientOrderIds\n   */\n  public async cancelMultiOrdersByCreditOrderId<R>(\n    request: loopring_defs.CancelMultiOrdersByClientOrderIdRequest,\n    PrivateKey: string,\n    apiKey: string\n  ): Promise<{ raw_data: R }> {\n    const dataToSig: Map<string, any> = new Map();\n    dataToSig.set(\"accountId\", request.accountId);\n    dataToSig.set(\"clientOrderId\", request.clientOrderId);\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.ORDER_CANCEL_CLIENT_ORDER_ID_LIST,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.DELETE,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey,\n      },\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns a list Ethereum transactions from users for exchange account registration.\n   */\n  public async getUserRegTxs<R>(\n    request: loopring_defs.GetUserRegTxsRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userRegTxs: loopring_defs.UserRegTx[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_REG_TXS,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const userRegTxs: loopring_defs.UserRegTx[] = raw_data.transactions;\n    return {\n      totalNum: raw_data.totalNum,\n      userRegTxs,\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns a list Ethereum transactions from users for resetting exchange passwords.\n   */\n  public async getUserPwdResetTxs<R>(\n    request: loopring_defs.GetUserPwdResetTxsRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userPwdResetTxs: loopring_defs.UserPwdResetTx[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_PWD_RESET_TXS,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const userPwdResetTxs: loopring_defs.UserPwdResetTx[] =\n      raw_data.transactions;\n    return {\n      totalNum: raw_data.totalNum,\n      userPwdResetTxs,\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns user's Ether and token balances on exchange.\n   */\n  public async getUserBalances<R>(\n    request: loopring_defs.GetUserBalancesRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    userBalances: loopring_defs.LoopringMap<loopring_defs.UserBalanceInfo>;\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_EXCHANGE_BALANCES,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const userBalances: loopring_defs.LoopringMap<loopring_defs.UserBalanceInfo> =\n      {};\n\n    if (raw_data instanceof Array) {\n      raw_data.forEach((item: loopring_defs.UserBalanceInfo) => {\n        userBalances[item.tokenId] = item;\n      });\n    }\n\n    return {\n      userBalances,\n      raw_data,\n    };\n  }\n\n  public async getAssetLookRecords<R>(\n    request: loopring_defs.GetUserBalancesRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    userBalances: loopring_defs.LoopringMap<loopring_defs.UserBalanceInfo>;\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_ASSET_LOCK_RECORDS,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const userBalances: loopring_defs.LoopringMap<loopring_defs.UserBalanceInfo> =\n      {};\n\n    if (raw_data instanceof Array) {\n      raw_data.forEach((item: loopring_defs.UserBalanceInfo) => {\n        userBalances[item.tokenId] = item;\n      });\n    }\n\n    return {\n      userBalances,\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns user's deposit records.\n   */\n  public async getUserDepositHistory<R>(\n    request: loopring_defs.GetUserDepositHistoryRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userDepositHistory: loopring_defs.UserDepositHistoryTx[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_DEPOSITS_HISTORY,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      totalNum: raw_data?.totalNum,\n      userDepositHistory:\n        raw_data.transactions as loopring_defs.UserDepositHistoryTx[],\n      raw_data,\n    };\n  }\n\n  /*\n   * Get user onchain withdrawal history.\n   */\n  public async getUserOnchainWithdrawalHistory<R>(\n    request: loopring_defs.GetUserOnchainWithdrawalHistoryRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userOnchainWithdrawalHistory: loopring_defs.UserOnchainWithdrawalHistoryTx[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.WITHDRAWALS_ACTION,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      totalNum: raw_data?.totalNum,\n      userOnchainWithdrawalHistory:\n        raw_data.transactions as loopring_defs.UserOnchainWithdrawalHistoryTx[],\n      raw_data,\n    };\n  }\n\n  /*\n   * Get user transfer list.\n   */\n  public async getUserTransferList<R>(\n    request: loopring_defs.GetUserTransferListRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userTransfers: loopring_defs.UserTransferRecord[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_TRANSFERS_LIST,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      totalNum: raw_data?.totalNum,\n      userTransfers:\n        raw_data.transactions as loopring_defs.UserTransferRecord[],\n      raw_data,\n    };\n  }\n\n  /*\n   * Get user txs\n   */\n  public async getUserTxs<R>(\n    request: loopring_defs.GetUserTxsRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userTxs: loopring_defs.UserTx[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_TXS,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const userTxs: loopring_defs.UserTx[] = [];\n\n    if (raw_data?.transactions instanceof Array) {\n      raw_data.transactions.forEach((item: loopring_defs.UserTx) => {\n        userTxs.push(item);\n      });\n    }\n\n    return {\n      totalNum: raw_data?.totalNum,\n      userTxs,\n      raw_data,\n    };\n  }\n\n  /*\n   * Get user trade history\n   */\n  public async getUserTrades<R>(\n    request: loopring_defs.GetUserTradesRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userTrades: loopring_defs.UserTrade[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_TRADE_HISTORY,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const userTrades: loopring_defs.UserTrade[] = [];\n\n    if (raw_data?.trades instanceof Array) {\n      raw_data.trades.forEach((item: any[]) => {\n        userTrades.push({\n          tradeTime: item[0],\n          tradeId: item[1],\n          side: item[2],\n          volume: item[3],\n          price: item[4],\n          market: item[5],\n          fee: item[6],\n          type: item[13],\n        });\n      });\n    }\n\n    return {\n      totalNum: raw_data.totalNum,\n      userTrades,\n      raw_data,\n    };\n  }\n\n  /*\n   * deprecated\n   * Returns the fee rate of users placing orders in specific markets\n   */\n  public async getUserFeeRate<R>(\n    request: loopring_defs.GetUserFeeRateRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    userFreeRateMap: loopring_defs.LoopringMap<loopring_defs.UserFeeRateInfo>;\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_FEE_RATE,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    const userFreeRateMap: loopring_defs.LoopringMap<loopring_defs.UserFeeRateInfo> =\n      {};\n\n    if (raw_data instanceof Array) {\n      raw_data.forEach((item: loopring_defs.UserFeeRateInfo) => {\n        userFreeRateMap[item.symbol] = item;\n      });\n    }\n\n    return {\n      userFreeRateMap,\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns the user order fee rate of users placing orders in specific markets\n   */\n  public async getUserOrderFeeRate<R>(\n    request: loopring_defs.GetUserOrderFeeRateRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    feeRate: loopring_defs.FeeRateInfo;\n    gasPrice: number;\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_ORDER_FEE_RATE,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const gasPrice = parseInt(raw_data.gasPrice);\n\n    return {\n      feeRate: raw_data.feeRate as loopring_defs.FeeRateInfo,\n      gasPrice,\n      raw_data,\n    };\n  }\n\n  /*\n   * Query current token minimum amount to place order based on users VIP level and max fee bips\n   */\n  public async getMinimumTokenAmt<R>(\n    request: loopring_defs.GetMinimumTokenAmtRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    amounts: [loopring_defs.TokenAmount, loopring_defs.TokenAmount];\n    amountMap: loopring_defs.LoopringMap<loopring_defs.TokenAmount>;\n    gasPrice: number;\n    cacheOverdueAt: any;\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_MINIMUM_TOKEN_AMT,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const gasPrice = parseInt(raw_data.gasPrice);\n\n    const amounts: [loopring_defs.TokenAmount, loopring_defs.TokenAmount] =\n      raw_data?.amounts;\n\n    const amountMap: loopring_defs.LoopringMap<loopring_defs.TokenAmount> = {};\n\n    if (amounts instanceof Array) {\n      amounts.forEach((item: loopring_defs.TokenAmount) => {\n        amountMap[item.tokenSymbol] = item;\n      });\n    }\n\n    return {\n      amounts,\n      amountMap,\n      gasPrice,\n      cacheOverdueAt: raw_data.cacheOverdueAt,\n      raw_data,\n    };\n  }\n\n  /*\n   * Query current fee amount\n   */\n  public async getOffchainFeeAmt<R>(\n    request: loopring_defs.GetOffchainFeeAmtRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    fees: loopring_defs.LoopringMap<loopring_defs.OffchainFeeInfo>;\n    gasPrice: number;\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_OFFCHAIN_FEE_AMT,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const gasPrice = parseInt(raw_data.gasPrice);\n\n    const fees: loopring_defs.LoopringMap<loopring_defs.OffchainFeeInfo> = {};\n\n    if (raw_data?.fees instanceof Array) {\n      raw_data.fees.forEach((item: loopring_defs.OffchainFeeInfo) => {\n        fees[item.token] = item;\n      });\n    }\n\n    return {\n      fees,\n      gasPrice,\n      raw_data,\n    };\n  }\n\n  /*\n   * Query current NFTAction fee amount\n   */\n  public async getNFTOffchainFeeAmt<R>(\n    request: loopring_defs.GetNFTOffchainFeeAmtRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    fees: loopring_defs.LoopringMap<loopring_defs.OffchainFeeInfo>;\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_NFT_OFFCHAIN_FEE_AMT,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    const fees: loopring_defs.LoopringMap<loopring_defs.OffchainFeeInfo> = {};\n    if (raw_data?.fees instanceof Array) {\n      raw_data.fees.forEach((item: loopring_defs.OffchainFeeInfo) => {\n        fees[item.token] = item;\n      });\n    }\n\n    return {\n      fees,\n      raw_data,\n    };\n  }\n\n  /*\n   * Submit NFTAction Validate Order request\n   */\n  public async submitNFTValidateOrder<T extends loopring_defs.TX_HASH_API>(\n    req: loopring_defs.OriginNFTValidateOrderRequestV3WithPatch\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | RESULT_INFO> {\n    const { request, eddsaKey, apiKey } = req;\n\n    request.eddsaSignature = sign_tools.get_EddsaSig_NFT_Order(\n      request,\n      eddsaKey\n    ).result;\n\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_NFT_VALIDATE_ORDER,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    // myLog(\"NFTAction Validate Order request\", request);\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    return this.returnTxHash(raw_data);\n  }\n\n  /*\n   * Submit NFTAction Trade request\n   */\n  public async submitNFTTrade<T extends loopring_defs.TX_HASH_API>(\n    req: loopring_defs.OriginNFTTradeRequestV3WithPatch\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | RESULT_INFO> {\n    const { request, apiKey, eddsaKey } = req;\n\n    const dataToSig: Map<string, any> = new Map();\n    dataToSig.set(\"maker\", request.maker);\n    dataToSig.set(\"makerFeeBips\", request.makerFeeBips);\n    dataToSig.set(\"taker\", request.taker);\n    dataToSig.set(\"takerFeeBips\", request.takerFeeBips);\n    // request.eddsaSignature = sign_tools.get_EddsaSig_Transfer(\n    //   request,\n    //   eddsaKey\n    // );\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_NFT_TRADE,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        // sigPatch: SigPatchField.EddsaSignature,\n        PrivateKey: eddsaKey,\n      },\n    };\n    // myLog(\"NFTAction Trade request\", request);\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    return this.returnTxHash(raw_data);\n  }\n\n  async getUserOwenCollection<R>(\n    request: loopring_defs.GetUserOwnerCollectionRequest,\n    apiKey: string\n  ) {\n    const reqParams = {\n      url: LOOPRING_URLs.GET_NFT_COLLECTION,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (\n      raw_data != null &&\n      raw_data.resultInfo &&\n      raw_data != null &&\n      raw_data.resultInfo.code\n    ) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n\n    return {\n      totalNum: raw_data == null ? void 0 : raw_data.totalNum,\n      collections: raw_data.collections.map(({ collection, ...rest }: any) => {\n        return {\n          ...collection,\n          extends: {\n            ...rest,\n          },\n        };\n      }) as loopring_defs.CollectionMeta & { extends: { [a: string]: any } }[],\n      raw_data,\n    };\n  }\n\n  async getUserLegacyCollection<R>(\n    request: loopring_defs.GetUserLegacyCollectionRequest,\n    apiKey: string\n  ) {\n    const reqParams = {\n      url: LOOPRING_URLs.GET_NFT_LEGACY_COLLECTION,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (\n      raw_data != null &&\n      raw_data.resultInfo &&\n      raw_data != null &&\n      raw_data.resultInfo.code\n    ) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n\n    return {\n      totalNum: raw_data == null ? void 0 : raw_data.totalNum,\n      collections: raw_data.collections.map(({ collection, ...rest }: any) => {\n        return {\n          ...collection,\n          extends: {\n            ...rest,\n          },\n        };\n      }) as loopring_defs.CollectionMeta & { extends: { [a: string]: any } }[],\n      raw_data,\n    };\n  }\n\n  async getUserNFTCollection(\n    request: loopring_defs.GetUserNFTCollectionRequest,\n    apiKey: string\n  ) {\n    const reqParams = {\n      url: LOOPRING_URLs.GET_NFT_COLLECTION_HASNFT,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (\n      raw_data != null &&\n      raw_data.resultInfo &&\n      raw_data != null &&\n      raw_data.resultInfo.code\n    ) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n\n    return {\n      totalNum: raw_data == null ? void 0 : raw_data.totalNum,\n      collections: raw_data.collections.map(({ collection, ...rest }: any) => {\n        return {\n          ...collection,\n          extends: {\n            ...rest,\n          },\n        };\n      }) as loopring_defs.CollectionMeta & { extends: { [a: string]: any } }[],\n      raw_data,\n    };\n  }\n\n  async getUserNFTLegacyTokenAddress(\n    request: { accountId: number },\n    apiKey: string\n  ) {\n    const reqParams = {\n      url: LOOPRING_URLs.GET_NFT_LEGACY_TOKENADDRESS,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (\n      raw_data != null &&\n      raw_data.resultInfo &&\n      raw_data != null &&\n      raw_data.resultInfo.code\n    ) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n\n    return {\n      result: raw_data.addresses,\n      raw_data,\n    };\n  }\n\n  /*\n   * Returns User NFTAction deposit records.\n   */\n  public async getUserNFTDepositHistory<R>(\n    request: loopring_defs.GetUserNFTDepositHistoryRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userNFTDepositHistory: loopring_defs.UserNFTDepositHistoryTx[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_NFT_DEPOSIT_HISTORY,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      totalNum: raw_data?.totalNum,\n      userNFTDepositHistory:\n        raw_data.deposits as loopring_defs.UserNFTDepositHistoryTx[],\n      raw_data,\n    };\n  }\n\n  /*\n   * Get User NFTAction Withdrawal History.\n   */\n  public async getUserNFTWithdrawalHistory<R>(\n    request: loopring_defs.GetUserNFTWithdrawalHistoryRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userNFTWithdrawalHistory: loopring_defs.UserNFTWithdrawalHistoryTx[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_NFT_WITHDRAW_HISTORY,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      totalNum: raw_data?.totalNum,\n      userNFTWithdrawalHistory:\n        raw_data.withdrawals as loopring_defs.UserNFTWithdrawalHistoryTx[],\n      raw_data,\n    };\n  }\n\n  /*\n   * Get user NFTAction transfer list.\n   */\n  public async getUserNFTTransferHistory<R>(\n    request: loopring_defs.GetUserNFTTransferHistoryRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userNFTTransfers: loopring_defs.UserNFTTransferHistoryTx[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_NFT_TRANSFER_HISTORY,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      totalNum: raw_data?.totalNum,\n      userNFTTransfers:\n        raw_data.transfers as loopring_defs.UserNFTTransferHistoryTx[],\n      raw_data,\n    };\n  }\n\n  /**\n   * Get user NFTAction Mint list.\n   * @param request\n   * @param apiKey\n   */\n  public async getUserNFTMintHistory<R>(\n    request: loopring_defs.GetUserNFTMintHistoryRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userNFTMints: loopring_defs.UserNFTMintHistoryTx[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_NFT_MINT_HISTORY,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      totalNum: raw_data?.totalNum,\n      userNFTMints: raw_data.transfers as loopring_defs.UserNFTMintHistoryTx[],\n      raw_data,\n    };\n  }\n\n  /*\n   * Get user All NFTAction Transaction list.\n   *\n   */\n  public async getUserNFTTransactionHistory<R>(\n    request: loopring_defs.GetUserNFTTxsRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userNFTTxs: loopring_defs.UserNFTTxsHistory[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_NFT_TRANSACTION_HISTORY,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    if (\n      request.metadata === true &&\n      raw_data.transactions.length\n      // raw_data.transactions.metadata &&\n      // raw_data.transactions.metadata.nftId &&\n      // raw_data.transactions.metadata.nftId.startsWith(\"0x\")\n    ) {\n      raw_data.transactions = raw_data.transactions.reduce(\n        (\n          prev: loopring_defs.UserNFTTxsHistory[],\n          item: loopring_defs.UserNFTTxsHistory\n        ) => {\n          if (\n            item.metadata &&\n            item.metadata.nftId &&\n            item.metadata.nftId.startsWith(\"0x\")\n          ) {\n            const hashBN = new BN(item.metadata.nftId.replace(\"0x\", \"\"), 16);\n            item.metadata.nftId =\n              \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n          }\n\n          return [...prev, item];\n        },\n        []\n      );\n      // const hashBN = new BN(raw_data.transactions.metadata.nftId.replace(\"0x\", \"\"), 16);\n      // raw_data.transactions.metadata.nftId= \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n    }\n    return {\n      totalNum: raw_data?.totalNum,\n      userNFTTxs: raw_data.transactions as loopring_defs.UserNFTTxsHistory[],\n      raw_data,\n    };\n  }\n  public async getUserNFTTradeHistory<R>(\n    request: loopring_defs.GetUserNFTTradeRequest,\n    apiKey: string\n  ): Promise<\n    | {\n        raw_data: R;\n        totalNum: number;\n        trades: loopring_defs.UserNFTTradeHistory[];\n      }\n    | RESULT_INFO\n  > {\n    const reqParams = {\n      url: LOOPRING_URLs.GET_USER_NFT_TRADE_HISTORY,\n      queryParams: { ...request },\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (raw_data != null && raw_data.resultInfo) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n\n    let trades = raw_data.trades;\n    return {\n      totalNum: raw_data?.totalNum,\n      trades,\n      raw_data,\n    };\n  }\n\n  public async SetReferrer<R>(\n    request: loopring_defs.SetReferrerRequest,\n    eddsaKey: string\n  ): Promise<{ raw_data: R; result: any }> {\n    const dataToSig: Map<string, any> = new Map();\n\n    dataToSig.set(\"address\", request.address);\n    dataToSig.set(\"promotionCode\", request.promotionCode);\n    dataToSig.set(\"publicKeyX\", request.publicKeyX);\n    dataToSig.set(\"publicKeyY\", request.publicKeyY);\n    dataToSig.set(\"referrer\", request.referrer);\n\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.SET_REFERRER,\n      bodyParams: request,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      result: raw_data?.result,\n      raw_data,\n    };\n  }\n\n  // Get users NFTAction balance, besides amount, it also includes tokenId and nftData\n\n  public async getUserNFTBalances<R>(\n    request: loopring_defs.GetUserNFTBalancesRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userNFTBalances: loopring_defs.UserNFTBalanceInfo[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_NFT_BALANCES,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    if (raw_data.data.length) {\n      raw_data.data = raw_data.data.reduce(\n        (\n          prev: loopring_defs.UserNFTBalanceInfo[],\n          item: loopring_defs.UserNFTBalanceInfo\n        ) => {\n          if (item.nftId && item.nftId.startsWith(\"0x\")) {\n            const hashBN = new BN(item.nftId.replace(\"0x\", \"\"), 16);\n            item.nftId = \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n            if (\n              request.metadata === true &&\n              item.metadata &&\n              item.metadata.nftId &&\n              item.metadata.nftId.startsWith(\"0x\")\n            ) {\n              // const hashBN = new BN(item.metadata.nftId.replace(\"0x\", \"\"), 16);\n              item.metadata.nftId =\n                \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n            }\n          }\n          return [...prev, item];\n        },\n        []\n      );\n      // const hashBN = new BN(raw_data.transactions.metadata.nftId.replace(\"0x\", \"\"), 16);\n      // raw_data.transactions.metadata.nftId= \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n    }\n    // if (raw_data.data.nftId && raw_data.data.nftId.startsWith(\"0x\")) {\n    //   const hashBN = new BN(raw_data.data.nftId.replace(\"0x\", \"\"), 16);\n    //   raw_data.data.nftId = \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n    // }\n    return {\n      totalNum: raw_data?.totalNum,\n      userNFTBalances: raw_data.data as loopring_defs.UserNFTBalanceInfo[],\n      raw_data,\n    };\n  }\n\n  public async getUserNFTBalancesByCollection<R>(\n    request: loopring_defs.GetUserNFTBalancesByCollectionRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userNFTBalances: loopring_defs.UserNFTBalanceInfo[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_NFT_BALANCES_BY_COLLECTION,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    if (raw_data.data.length) {\n      raw_data.data = raw_data.data.reduce(\n        (\n          prev: loopring_defs.UserNFTBalanceInfo[],\n          item: loopring_defs.UserNFTBalanceInfo\n        ) => {\n          if (item.nftId && item.nftId.startsWith(\"0x\")) {\n            const hashBN = new BN(item.nftId.replace(\"0x\", \"\"), 16);\n            item.nftId = \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n            if (\n              request.metadata === true &&\n              item.metadata &&\n              item.metadata.nftId &&\n              item.metadata.nftId.startsWith(\"0x\")\n            ) {\n              // const hashBN = new BN(item.metadata.nftId.replace(\"0x\", \"\"), 16);\n              item.metadata.nftId =\n                \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n            }\n          }\n          return [...prev, item];\n        },\n        []\n      );\n      // const hashBN = new BN(raw_data.transactions.metadata.nftId.replace(\"0x\", \"\"), 16);\n      // raw_data.transactions.metadata.nftId= \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n    }\n    // if (raw_data.data.nftId && raw_data.data.nftId.startsWith(\"0x\")) {\n    //   const hashBN = new BN(raw_data.data.nftId.replace(\"0x\", \"\"), 16);\n    //   raw_data.data.nftId = \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n    // }\n    return {\n      totalNum: raw_data?.totalNum,\n      userNFTBalances: raw_data.data as loopring_defs.UserNFTBalanceInfo[],\n      raw_data,\n    };\n  }\n\n  public async getUserNFTLegacyBalance<R>(\n    request: loopring_defs.GetUserNFTLegacyBalanceRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userNFTBalances: loopring_defs.UserNFTBalanceInfo[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_NFT_LEGACY_BALANCE,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    if (raw_data.data.length) {\n      raw_data.data = raw_data.data.reduce(\n        (\n          prev: loopring_defs.UserNFTBalanceInfo[],\n          item: loopring_defs.UserNFTBalanceInfo\n        ) => {\n          if (item.nftId && item.nftId.startsWith(\"0x\")) {\n            const hashBN = new BN(item.nftId.replace(\"0x\", \"\"), 16);\n            item.nftId = \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n            if (\n              request.metadata === true &&\n              item.metadata &&\n              item.metadata.nftId &&\n              item.metadata.nftId.startsWith(\"0x\")\n            ) {\n              // const hashBN = new BN(item.metadata.nftId.replace(\"0x\", \"\"), 16);\n              item.metadata.nftId =\n                \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n            }\n          }\n          return [...prev, item];\n        },\n        []\n      );\n      // const hashBN = new BN(raw_data.transactions.metadata.nftId.replace(\"0x\", \"\"), 16);\n      // raw_data.transactions.metadata.nftId= \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n    }\n    // if (raw_data.data.nftId && raw_data.data.nftId.startsWith(\"0x\")) {\n    //   const hashBN = new BN(raw_data.data.nftId.replace(\"0x\", \"\"), 16);\n    //   raw_data.data.nftId = \"0x\" + hashBN.toString(\"hex\").padStart(64, \"0\");\n    // }\n    return {\n      totalNum: raw_data?.totalNum,\n      userNFTBalances: raw_data.data as loopring_defs.UserNFTBalanceInfo[],\n      raw_data,\n    };\n  }\n  public async getUserVIPAssets<R>(\n    request: loopring_defs.getUserVIPAssetsRequest\n  ): Promise<{ raw_data: { data: R }; vipAsset: R }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_VIP_ASSETS,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      vipAsset: raw_data.data ? raw_data.data : raw_data,\n      raw_data,\n    };\n  }\n\n  public async getUserVIPInfo<R>(\n    request: loopring_defs.GetUserVIPInfoRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    vipInfo: {\n      createdAt: number;\n      validTo: string;\n      org: any;\n      vipTag: any;\n    };\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_VIP_INFO,\n      queryParams: request,\n      method: ReqMethod.GET,\n      apiKey: apiKey,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const vipInfo = {\n      createdAt: raw_data.created_at,\n      validTo: raw_data.valid_to,\n      org: raw_data.org,\n      vipTag: raw_data.vip_tag,\n    };\n\n    return {\n      vipInfo,\n      raw_data,\n    };\n  }\n\n  public async unLockAccount<R>(\n    {\n      keyPair,\n      request,\n    }: {\n      keyPair: KeyPairParams;\n      request: loopring_defs.GetUserApiKeyRequest;\n    },\n    publicKey: { x: string; y: string } | undefined = undefined\n  ): Promise<\n    | AxiosResponse\n    | RESULT_INFO\n    | {\n        raw_data: R;\n        eddsaKey: {\n          keyPair: object;\n          formatedPx: string;\n          formatedPy: string;\n          sk: string;\n          counterFactualInfo: CounterFactualInfo;\n        };\n        apiKey: string;\n      }\n  > {\n    let eddsaKey;\n    try {\n      eddsaKey = await generateKeyPair(keyPair, publicKey);\n    } catch (error) {\n      throw error;\n    }\n    if (eddsaKey) {\n      const dataToSig: Map<string, any> = sortObjDictionary(request);\n      const reqParams: loopring_defs.ReqParams = {\n        url: LOOPRING_URLs.API_KEY_ACTION,\n        queryParams: request,\n        bodyParams: request,\n        method: ReqMethod.GET,\n        sigFlag: SIG_FLAG.EDDSA_SIG,\n        sigObj: {\n          dataToSig,\n          PrivateKey: eddsaKey.sk,\n        },\n      };\n      let raw_data;\n      try {\n        raw_data = (await this.makeReq().request(reqParams)).data;\n      } catch (error) {\n        throw error as AxiosResponse;\n      }\n      if (raw_data?.resultInfo) {\n        throw {\n          ...raw_data?.resultInfo,\n        };\n      } else {\n        return {\n          apiKey: raw_data.apiKey,\n          raw_data,\n          eddsaKey,\n        };\n      }\n    } else {\n      throw {\n        code: LoopringErrorCode.NO_EDDSA_KEY,\n        message: ConnectorError.NO_EDDSA_KEY,\n      };\n    }\n  }\n\n  /*\n   * Submit offchain withdraw request\n   */\n  public async submitOffchainWithdraw<T extends loopring_defs.TX_HASH_API>(\n    req: loopring_defs.OffChainWithdrawalRequestV3WithPatch,\n    options?: { accountId?: number; counterFactualInfo?: any }\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | AxiosResponse | RESULT_INFO> {\n    const {\n      request,\n      web3,\n      chainId,\n      walletType,\n      eddsaKey,\n      apiKey,\n      isHWAddr: isHWAddrOld,\n    } = req;\n    const { accountId, counterFactualInfo }: any = options\n      ? options\n      : { accountId: 0 };\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n\n    const sigHW = async () => {\n      const result = await sign_tools.signOffchainWithdrawWithoutDataStructure(\n        web3,\n        request.owner,\n        request,\n        chainId,\n        walletType,\n        accountId,\n        counterFactualInfo\n      );\n      ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n    };\n\n    // metamask not import hw appWallet.\n    if (\n      walletType === ConnectorNames.MetaMask ||\n      walletType === ConnectorNames.Gamestop ||\n      walletType === ConnectorNames.OtherExtension\n    ) {\n      try {\n        if (isHWAddr) {\n          await sigHW();\n        } else {\n          const result = await sign_tools.signOffchainWithdrawWithDataStructure(\n            web3,\n            request.owner,\n            request,\n            chainId,\n            accountId,\n            counterFactualInfo\n          );\n          ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    } else {\n      const isContractCheck = await isContract(web3, request.owner);\n      try {\n        if (isContractCheck) {\n          const result =\n            await sign_tools.signOffchainWithdrawWithDataStructureForContract(\n              web3,\n              request.owner,\n              request,\n              chainId,\n              accountId\n            );\n          ecdsaSignature = result.ecdsaSig;\n        } else if (counterFactualInfo) {\n          const result =\n            await sign_tools.signOffchainWithdrawWithDataStructureForContract(\n              web3,\n              request.owner,\n              request,\n              chainId,\n              accountId,\n              counterFactualInfo\n            );\n          ecdsaSignature = result.ecdsaSig;\n          // myLog(\"OffchainWithdraw ecdsaSignature:\", ecdsaSignature);\n        } else {\n          await sigHW();\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    }\n\n    request.eddsaSignature = sign_tools.get_EddsaSig_OffChainWithdraw(\n      request,\n      eddsaKey\n    ).result;\n\n    if (counterFactualInfo) {\n      request.counterFactualInfo = counterFactualInfo;\n    }\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.WITHDRAWALS_ACTION,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n      ecdsaSignature,\n    };\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    return this.returnTxHash(raw_data);\n  }\n\n  /*\n   * Submit Internal Transfer request\n   */\n  public async submitInternalTransfer<T extends loopring_defs.TX_HASH_API>(\n    req: loopring_defs.OriginTransferRequestV3WithPatch,\n    options?: { accountId?: number; counterFactualInfo?: any }\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | AxiosResponse | RESULT_INFO> {\n    const {\n      request,\n      web3,\n      chainId,\n      walletType,\n      eddsaKey,\n      apiKey,\n      isHWAddr: isHWAddrOld,\n    } = req;\n    const { accountId, counterFactualInfo }: any = options\n      ? options\n      : { accountId: 0 };\n\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n\n    const sigHW = async () => {\n      const result = await sign_tools.signTransferWithoutDataStructure(\n        web3,\n        request.payerAddr,\n        request,\n        chainId,\n        walletType,\n        accountId,\n        counterFactualInfo\n      );\n      ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n    };\n    if (\n      walletType === ConnectorNames.MetaMask ||\n      walletType === ConnectorNames.Gamestop ||\n      walletType === ConnectorNames.OtherExtension\n    ) {\n      // myLog(\"submitInternalTransfer iConnectorNames.MetaMask:\", walletType);\n      try {\n        if (isHWAddr) {\n          await sigHW();\n        } else {\n          // myLog(\"submitInternalTransfer notHWAddr:\", isHWAddr);\n          const result = await sign_tools.signTransferWithDataStructure(\n            web3,\n            request.payerAddr,\n            request,\n            chainId,\n            walletType,\n            accountId,\n            counterFactualInfo\n          );\n          ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    } else {\n      const isContractCheck = await isContract(web3, request.payerAddr);\n      try {\n        if (isContractCheck) {\n          const result =\n            await sign_tools.signTransferWithDataStructureForContract(\n              web3,\n              request.payerAddr,\n              request,\n              chainId,\n              accountId\n            );\n          ecdsaSignature = result.ecdsaSig;\n        } else if (counterFactualInfo) {\n          const result =\n            await sign_tools.signTransferWithDataStructureForContract(\n              web3,\n              request.payerAddr,\n              request,\n              chainId,\n              accountId,\n              counterFactualInfo\n            );\n          ecdsaSignature = result.ecdsaSig;\n          // myLog(\"Transfer ecdsaSignature:\", ecdsaSignature);\n        } else {\n          await sigHW();\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    }\n\n    request.eddsaSignature = sign_tools.get_EddsaSig_Transfer(\n      request,\n      eddsaKey\n    ).result;\n    if (counterFactualInfo) {\n      request.counterFactualInfo = counterFactualInfo;\n    }\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_INTERNAL_TRANSFER,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n      ecdsaSignature,\n    };\n\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    return this.returnTxHash(raw_data);\n  }\n\n  /*\n   * Submit NFTAction Deploy request\n   */\n  public async submitForceWithdrawals<T extends loopring_defs.TX_HASH_API>(\n    req: loopring_defs.OriginForcesWithdrawalsRequestV3WithPatch,\n    options?: { accountId?: number; counterFactualInfo?: any }\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | RESULT_INFO> {\n    const {\n      request,\n      web3,\n      chainId,\n      walletType,\n      eddsaKey,\n      apiKey,\n      isHWAddr: isHWAddrOld,\n    } = req;\n    const { accountId, counterFactualInfo }: any = options\n      ? options\n      : { accountId: 0 };\n    const { transfer } = request;\n\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n    transfer.payeeId = 0;\n    transfer.memo = `ForceWithdrawalBy${request.requesterAddress}`;\n    transfer.maxFee = {\n      volume: \"0\",\n      tokenId: transfer.token.tokenId,\n    };\n\n    const sigHW = async () => {\n      const result = await sign_tools.signTransferWithoutDataStructure(\n        web3,\n        transfer.payerAddr,\n        transfer as loopring_defs.OriginTransferRequestV3,\n        chainId,\n        walletType,\n        accountId,\n        counterFactualInfo\n      );\n      ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n    };\n    if (\n      walletType === ConnectorNames.MetaMask ||\n      walletType === ConnectorNames.Gamestop ||\n      walletType === ConnectorNames.OtherExtension\n    ) {\n      // myLog(\"submitDeployNFT iConnectorNames.MetaMask:\", walletType);\n      try {\n        if (isHWAddr) {\n          await sigHW();\n        } else {\n          // myLog(\"submitDeployNFT notHWAddr:\", isHWAddr);\n          const result = await sign_tools.signTransferWithDataStructure(\n            web3,\n            transfer.payerAddr,\n            transfer as loopring_defs.OriginTransferRequestV3,\n            chainId,\n            walletType,\n            accountId,\n            counterFactualInfo\n          );\n          ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    } else {\n      const isContractCheck = await isContract(web3, transfer.payerAddr);\n      try {\n        if (isContractCheck) {\n          const result =\n            await sign_tools.signTransferWithDataStructureForContract(\n              web3,\n              transfer.payerAddr,\n              transfer as loopring_defs.OriginTransferRequestV3,\n              chainId,\n              accountId\n            );\n          ecdsaSignature = result.ecdsaSig;\n        } else if (counterFactualInfo) {\n          const result =\n            await sign_tools.signTransferWithDataStructureForContract(\n              web3,\n              transfer.payerAddr,\n              transfer as loopring_defs.OriginTransferRequestV3,\n              chainId,\n              accountId,\n              counterFactualInfo\n            );\n          ecdsaSignature = result.ecdsaSig;\n          // myLog(\"Transfer ecdsaSignature:\", ecdsaSignature);\n        } else {\n          await sigHW();\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    }\n\n    if (counterFactualInfo) {\n      transfer.counterFactualInfo = counterFactualInfo;\n    }\n    transfer.eddsaSignature = sign_tools.get_EddsaSig_Transfer(\n      transfer as loopring_defs.OriginTransferRequestV3,\n      eddsaKey\n    ).result;\n    transfer.ecdsaSignature = ecdsaSignature;\n    const dataToSig: Map<string, any> = new Map();\n    dataToSig.set(\"requesterAddress\", request.requesterAddress);\n    dataToSig.set(\"tokenId\", request.tokenId);\n    dataToSig.set(\"transfer\", request.transfer);\n    dataToSig.set(\"withdrawAddress\", request.withdrawAddress);\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_FORCE_WITHDRAWALS,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    return this.returnTxHash(raw_data);\n  }\n\n  /*\n   * Submit NFTAction Deploy request\n   */\n  public async submitDeployNFT<T extends loopring_defs.TX_HASH_API>(\n    req: loopring_defs.OriginDeployNFTRequestV3WithPatch,\n    options?: { accountId?: number; counterFactualInfo?: any }\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | RESULT_INFO> {\n    const {\n      request,\n      web3,\n      chainId,\n      walletType,\n      eddsaKey,\n      apiKey,\n      isHWAddr: isHWAddrOld,\n    } = req;\n    const { accountId, counterFactualInfo }: any = options\n      ? options\n      : { accountId: 0 };\n    const { transfer } = request;\n\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n    transfer.payeeId = 0;\n    transfer.memo = `NFT-DEPLOY-CONTRACT->${request.tokenAddress}`;\n    transfer.maxFee = {\n      volume: \"0\",\n      tokenId: transfer.token.tokenId,\n    };\n\n    const sigHW = async () => {\n      const result = await sign_tools.signTransferWithoutDataStructure(\n        web3,\n        transfer.payerAddr,\n        transfer as loopring_defs.OriginTransferRequestV3,\n        chainId,\n        walletType,\n        accountId,\n        counterFactualInfo\n      );\n      ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n    };\n    if (\n      walletType === ConnectorNames.MetaMask ||\n      walletType === ConnectorNames.Gamestop ||\n      walletType === ConnectorNames.OtherExtension\n    ) {\n      // myLog(\"submitDeployNFT iConnectorNames.MetaMask:\", walletType);\n      try {\n        if (isHWAddr) {\n          await sigHW();\n        } else {\n          // myLog(\"submitDeployNFT notHWAddr:\", isHWAddr);\n          const result = await sign_tools.signTransferWithDataStructure(\n            web3,\n            transfer.payerAddr,\n            transfer as loopring_defs.OriginTransferRequestV3,\n            chainId,\n            walletType,\n            accountId,\n            counterFactualInfo\n          );\n          ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    } else {\n      const isContractCheck = await isContract(web3, transfer.payerAddr);\n      try {\n        if (isContractCheck) {\n          const result =\n            await sign_tools.signTransferWithDataStructureForContract(\n              web3,\n              transfer.payerAddr,\n              transfer as loopring_defs.OriginTransferRequestV3,\n              chainId,\n              accountId\n            );\n          ecdsaSignature = result.ecdsaSig;\n        } else if (counterFactualInfo) {\n          const result =\n            await sign_tools.signTransferWithDataStructureForContract(\n              web3,\n              transfer.payerAddr,\n              transfer as loopring_defs.OriginTransferRequestV3,\n              chainId,\n              accountId,\n              counterFactualInfo\n            );\n          ecdsaSignature = result.ecdsaSig;\n          // myLog(\"Transfer ecdsaSignature:\", ecdsaSignature);\n        } else {\n          await sigHW();\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    }\n\n    if (counterFactualInfo) {\n      transfer.counterFactualInfo = counterFactualInfo;\n    }\n    transfer.eddsaSignature = sign_tools.get_EddsaSig_Transfer(\n      transfer as loopring_defs.OriginTransferRequestV3,\n      eddsaKey\n    ).result;\n    transfer.ecdsaSignature = ecdsaSignature;\n    const dataToSig: Map<string, any> = new Map();\n    dataToSig.set(\"nftData\", request.nftData);\n    dataToSig.set(\"tokenAddress\", request.tokenAddress);\n    dataToSig.set(\"transfer\", request.transfer);\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_DEPLOY_TOKEN_ADDRESS,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    return this.returnTxHash(raw_data);\n  }\n  /*\n   * Submit NFTAction Transfer request\n   */\n  public async submitNFTInTransfer<T extends loopring_defs.TX_HASH_API>(\n    req: loopring_defs.OriginNFTTransferRequestV3WithPatch,\n    options?: { accountId?: number; counterFactualInfo?: any }\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | RESULT_INFO> {\n    const {\n      request,\n      web3,\n      chainId,\n      walletType,\n      eddsaKey,\n      apiKey,\n      isHWAddr: isHWAddrOld,\n    } = req;\n    const { accountId, counterFactualInfo }: any = options\n      ? options\n      : { accountId: 0 };\n\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n\n    const sigHW = async () => {\n      const result = await sign_tools.signNFTTransferWithoutDataStructure(\n        web3,\n        request.fromAddress,\n        request,\n        chainId,\n        walletType,\n        accountId,\n        counterFactualInfo\n      );\n      ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n    };\n\n    if (\n      walletType === ConnectorNames.MetaMask ||\n      walletType === ConnectorNames.Gamestop ||\n      walletType === ConnectorNames.OtherExtension\n    ) {\n      try {\n        if (isHWAddr) {\n          await sigHW();\n        } else {\n          const result = await sign_tools.signTNFTransferWithDataStructure(\n            web3,\n            request.fromAddress,\n            request,\n            chainId,\n            walletType,\n            accountId,\n            counterFactualInfo\n          );\n          ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    } else {\n      const isContractCheck = await isContract(web3, request.fromAddress);\n      try {\n        if (isContractCheck) {\n          // signOffchainWithdrawWithDataStructureForContract\n          const result =\n            await sign_tools.signNFTTransferWithDataStructureForContract(\n              web3,\n              request.fromAddress,\n              request,\n              chainId,\n              accountId\n            );\n          ecdsaSignature = result.ecdsaSig;\n        } else if (counterFactualInfo) {\n          const result =\n            await sign_tools.signNFTTransferWithDataStructureForContract(\n              web3,\n              request.fromAddress,\n              request,\n              chainId,\n              accountId,\n              counterFactualInfo\n            );\n          ecdsaSignature = result.ecdsaSig;\n          // myLog(\"NFTransfer ecdsaSignature:\", ecdsaSignature);\n        } else {\n          await sigHW();\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    }\n\n    request.eddsaSignature = sign_tools.get_EddsaSig_NFT_Transfer(\n      request,\n      eddsaKey\n    ).result;\n    if (counterFactualInfo) {\n      request.counterFactualInfo = counterFactualInfo;\n    }\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_NFT_INTERNAL_TRANSFER,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n      ecdsaSignature,\n    };\n\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    return this.returnTxHash(raw_data);\n  }\n\n  /*\n   * Submit NFTAction Withdraw request\n   */\n  public async submitNFTWithdraw<T extends loopring_defs.TX_HASH_API>(\n    req: loopring_defs.OriginNFTWithdrawRequestV3WithPatch,\n    options?: { accountId?: number; counterFactualInfo?: any }\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | RESULT_INFO> {\n    const {\n      request,\n      web3,\n      chainId,\n      walletType,\n      eddsaKey,\n      apiKey,\n      isHWAddr: isHWAddrOld,\n    } = req;\n    const { accountId, counterFactualInfo }: any = options\n      ? options\n      : { accountId: 0 };\n\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n\n    const sigHW = async () => {\n      const result = await sign_tools.signNFTWithdrawWithoutDataStructure(\n        web3,\n        request.owner,\n        request,\n        chainId,\n        walletType,\n        accountId,\n        counterFactualInfo\n      );\n      ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n    };\n\n    // metamask not import hw appWallet.\n    if (\n      walletType === ConnectorNames.MetaMask ||\n      walletType === ConnectorNames.Gamestop ||\n      walletType === ConnectorNames.OtherExtension\n    ) {\n      try {\n        if (isHWAddr) {\n          await sigHW();\n        } else {\n          const result = await sign_tools.signNFTWithdrawWithDataStructure(\n            web3,\n            request.owner,\n            request,\n            chainId,\n            walletType,\n            accountId,\n            counterFactualInfo\n          );\n          ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    } else {\n      const isContractCheck = await isContract(web3, request.owner);\n\n      try {\n        if (isContractCheck) {\n          // signNFTWithdrawWithDataStructureForContract\n          // myLog('signNFTWithdrawWithDataStructureForContract')\n          const result =\n            await sign_tools.signNFTWithdrawWithDataStructureForContract(\n              web3,\n              request.owner,\n              request,\n              chainId,\n              accountId\n            );\n          ecdsaSignature = result.ecdsaSig;\n        } else if (counterFactualInfo) {\n          const result =\n            await sign_tools.signNFTWithdrawWithDataStructureForContract(\n              web3,\n              request.owner,\n              request,\n              chainId,\n              accountId,\n              counterFactualInfo\n            );\n          ecdsaSignature = result.ecdsaSig;\n          // myLog(\"NFTWithdraw ecdsaSignature:\", ecdsaSignature);\n        } else {\n          await sigHW();\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    }\n\n    request.eddsaSignature = sign_tools.get_EddsaSig_NFT_Withdraw(\n      request,\n      eddsaKey\n    ).result;\n    if (counterFactualInfo) {\n      request.counterFactualInfo = counterFactualInfo;\n    }\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_NFT_WITHDRAWALS,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n      ecdsaSignature,\n    };\n\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    return this.returnTxHash(raw_data);\n  }\n  /*\n   * Submit NFTAction\n   */\n  public async submitNFTMint<T extends loopring_defs.TX_HASH_API>(\n    req: loopring_defs.OriginNFTMINTRequestV3WithPatch,\n    options?: {\n      accountId?: number;\n      counterFactualInfo?: any;\n      _noEcdsa?: boolean;\n    }\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | RESULT_INFO> {\n    const {\n      request,\n      web3,\n      chainId,\n      walletType,\n      eddsaKey,\n      apiKey,\n      isHWAddr: isHWAddrOld,\n    } = req;\n    const { accountId, counterFactualInfo, _noEcdsa }: any = options\n      ? options\n      : { accountId: 0 };\n    if (request.counterFactualNftInfo === undefined) {\n      request.counterFactualNftInfo = {\n        nftFactory: NFTFactory[chainId],\n        nftOwner: request.minterAddress,\n        nftBaseUri: \"\",\n      };\n    }\n\n    request.royaltyPercentage = request.royaltyPercentage\n      ? request.royaltyPercentage\n      : 0;\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n\n    const sigHW = async () => {\n      const result = await sign_tools.signNFTMintWithoutDataStructure(\n        web3,\n        request.minterAddress,\n        request,\n        chainId,\n        walletType,\n        accountId,\n        counterFactualInfo\n      );\n      ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n    };\n\n    // metamask not import hw appWallet.\n    if (!_noEcdsa) {\n      if (\n        walletType === ConnectorNames.MetaMask ||\n        walletType === ConnectorNames.Gamestop ||\n        walletType === ConnectorNames.OtherExtension\n      ) {\n        try {\n          if (isHWAddr) {\n            await sigHW();\n          } else {\n            const result = await sign_tools.signNFTMintWithDataStructure(\n              web3,\n              request.minterAddress,\n              request,\n              chainId,\n              walletType,\n              accountId,\n              counterFactualInfo\n            );\n            ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n          }\n        } catch (err) {\n          throw {\n            ...this.genErr(err as any),\n          };\n        }\n      } else {\n        try {\n          const isContractCheck = await isContract(web3, request.minterAddress);\n\n          if (isContractCheck) {\n            // signNFTMintWithDataStructureForContract\n            // myLog('signNFTMintWithDataStructureForContract')\n            const result =\n              await sign_tools.signNFTMintWithDataStructureForContract(\n                web3,\n                request.minterAddress,\n                request,\n                chainId,\n                accountId\n              );\n            ecdsaSignature = result.ecdsaSig;\n          } else if (counterFactualInfo) {\n            const result =\n              await sign_tools.signNFTMintWithDataStructureForContract(\n                web3,\n                request.minterAddress,\n                request,\n                chainId,\n                accountId,\n                counterFactualInfo\n              );\n            ecdsaSignature = result.ecdsaSig;\n            // myLog(\"NFTMintWithData ecdsaSignature:\", ecdsaSignature);\n          } else {\n            await sigHW();\n          }\n        } catch (err) {\n          throw {\n            ...this.genErr(err as any),\n          };\n        }\n      }\n    }\n\n    request.eddsaSignature = sign_tools.get_EddsaSig_NFT_Mint(\n      request,\n      eddsaKey\n    ).result;\n    if (counterFactualInfo) {\n      request.counterFactualInfo = counterFactualInfo;\n    }\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_NFT_MINT,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n      ecdsaSignature,\n    };\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    return this.returnTxHash(raw_data);\n  }\n\n  async submitNFTCollection<R>(\n    req: loopring_defs.CollectionBasicMeta,\n    chainId: ChainId,\n    apiKey: string,\n    eddsaKey: string\n  ): Promise<RESULT_INFO | { raw_data: R; contractAddress: string }> {\n    const _req = req.nftFactory\n      ? req\n      : { ...req, nftFactory: NFTFactory_Collection[chainId] };\n    const dataToSig: Map<string, any> = sortObjDictionary(_req);\n    const reqParams = {\n      url: LOOPRING_URLs.POST_NFT_CREATE_COLLECTION,\n      bodyParams: Object.fromEntries(dataToSig),\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (\n      raw_data != null &&\n      raw_data.resultInfo &&\n      raw_data != null &&\n      raw_data.resultInfo.code\n    ) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n\n    return {\n      raw_data,\n      contractAddress: raw_data == null ? void 0 : raw_data.contractAddress,\n    };\n  }\n\n  async deleteNFTCollection<R>(\n    req: loopring_defs.CollectionDelete,\n    chainId: ChainId,\n    apiKey: string,\n    eddsaKey: string\n  ): Promise<{ raw_data: R }> {\n    const dataToSig: Map<string, any> = sortObjDictionary(req);\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.DELETE_NFT_CREATE_COLLECTION,\n      queryParams: req,\n      apiKey,\n      method: ReqMethod.DELETE,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n    };\n  }\n\n  async submitNFTLegacyCollection<R>(\n    req: loopring_defs.CollectionLegacyMeta,\n    chainId: ChainId,\n    apiKey: string,\n    eddsaKey: string\n  ): Promise<RESULT_INFO | { raw_data: R; result: boolean }> {\n    // const _req = req.nftFactory\n    //   ? req\n    //   : { ...req, nftFactory: NFTFactory_Collection[chainId] };\n    const dataToSig: Map<string, any> = sortObjDictionary(req);\n    const reqParams = {\n      url: LOOPRING_URLs.POST_NFT_CREATE_LEGACY_COLLECTION,\n      bodyParams: Object.fromEntries(dataToSig),\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (\n      raw_data != null &&\n      raw_data.resultInfo &&\n      raw_data != null &&\n      raw_data.resultInfo.code\n    ) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n\n    return {\n      raw_data,\n      result: raw_data.result,\n    };\n  }\n\n  async submitEditNFTCollection<R>(\n    req: Omit<loopring_defs.CollectionBasicMeta, \"nftFactory\" | \"owner\"> & {\n      collectionId: string;\n      accountId: number;\n    },\n    chainId: ChainId,\n    apiKey: string,\n    eddsaKey: string\n  ): Promise<RESULT_INFO | { raw_data: R; contractAddress: string }> {\n    // const _req = req.nftFactory ? req : {...req, nftFactory: NFTFactory_Collection[ chainId ]}\n    const dataToSig: Map<string, any> = sortObjDictionary(req);\n    const reqParams = {\n      url: LOOPRING_URLs.POST_NFT_EDIT_COLLECTION,\n      bodyParams: Object.fromEntries(dataToSig),\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (\n      raw_data != null &&\n      raw_data.resultInfo &&\n      raw_data != null &&\n      raw_data.resultInfo.code\n    ) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n\n    return {\n      raw_data,\n      contractAddress: raw_data == null ? void 0 : raw_data.contractAddress,\n    };\n  }\n\n  async submitUpdateNFTLegacyCollection<R>(\n    req: loopring_defs.UpdateNFTLegacyCollectionRequest,\n    chainId: ChainId,\n    apiKey: string,\n    eddsaKey: string\n  ): Promise<RESULT_INFO | { raw_data: R; result: boolean }> {\n    const _req = { ...req, nftHashes: req.nftHashes.join(\",\") };\n    const dataToSig: Map<string, any> = sortObjDictionary(_req);\n    const reqParams = {\n      url: LOOPRING_URLs.POST_NFT_LEGACY_UPDATE_COLLECTION,\n      bodyParams: Object.fromEntries(dataToSig),\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (\n      raw_data != null &&\n      raw_data.resultInfo &&\n      raw_data != null &&\n      raw_data.resultInfo.code\n    ) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n\n    return {\n      raw_data,\n      result: raw_data.result,\n    };\n  }\n\n  async submitUpdateNFTGroup<R>(\n    req: loopring_defs.UpdateNFTGroupRequest,\n    chainId: ChainId,\n    apiKey: string,\n    eddsaKey: string\n  ): Promise<RESULT_INFO | { raw_data: R; result: boolean }> {\n    const _req = { ...req, nftHashes: req.nftHashes.join(\",\") };\n    const dataToSig: Map<string, any> = sortObjDictionary(_req);\n    const reqParams = {\n      url: LOOPRING_URLs.POST_NFT_UPDATE_NFT_GROUP,\n      bodyParams: Object.fromEntries(dataToSig),\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (\n      raw_data != null &&\n      raw_data.resultInfo &&\n      raw_data != null &&\n      raw_data.resultInfo.code\n    ) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n\n    return {\n      raw_data,\n      result: raw_data.result,\n    };\n  }\n\n  /*\n   * Submit NFTAction Deploy request\n   */\n  public async submitDeployCollection<T extends loopring_defs.TX_HASH_API>(\n    req: loopring_defs.OriginDeployCollectionRequestV3WithPatch,\n    options?: { accountId?: number; counterFactualInfo?: any }\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | RESULT_INFO> {\n    const {\n      request,\n      web3,\n      chainId,\n      walletType,\n      eddsaKey,\n      apiKey,\n      isHWAddr: isHWAddrOld,\n    } = req;\n    const { accountId, counterFactualInfo }: any = options\n      ? options\n      : { accountId: 0 };\n    const { transfer } = request;\n\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n    transfer.payeeId = 0;\n    transfer.memo = `NFT-DEPLOY-CONTRACT->${request.tokenAddress}`;\n    transfer.maxFee = {\n      volume: \"0\",\n      tokenId: transfer.token.tokenId,\n    };\n\n    const sigHW = async () => {\n      const result = await sign_tools.signTransferWithoutDataStructure(\n        web3,\n        transfer.payerAddr,\n        transfer as loopring_defs.OriginTransferRequestV3,\n        chainId,\n        walletType,\n        accountId,\n        counterFactualInfo\n      );\n      ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n    };\n    if (\n      walletType === ConnectorNames.MetaMask ||\n      walletType === ConnectorNames.Gamestop ||\n      walletType === ConnectorNames.OtherExtension\n    ) {\n      // myLog(\"submitDeployNFT iConnectorNames.MetaMask:\", walletType);\n      try {\n        if (isHWAddr) {\n          await sigHW();\n        } else {\n          // myLog(\"submitDeployNFT notHWAddr:\", isHWAddr);\n          const result = await sign_tools.signTransferWithDataStructure(\n            web3,\n            transfer.payerAddr,\n            transfer as loopring_defs.OriginTransferRequestV3,\n            chainId,\n            walletType,\n            accountId,\n            counterFactualInfo\n          );\n          ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    } else {\n      const isContractCheck = await isContract(web3, transfer.payerAddr);\n      try {\n        if (isContractCheck) {\n          const result =\n            await sign_tools.signTransferWithDataStructureForContract(\n              web3,\n              transfer.payerAddr,\n              transfer as loopring_defs.OriginTransferRequestV3,\n              chainId,\n              accountId\n            );\n          ecdsaSignature = result.ecdsaSig;\n        } else if (counterFactualInfo) {\n          const result =\n            await sign_tools.signTransferWithDataStructureForContract(\n              web3,\n              transfer.payerAddr,\n              transfer as loopring_defs.OriginTransferRequestV3,\n              chainId,\n              accountId,\n              counterFactualInfo\n            );\n          ecdsaSignature = result.ecdsaSig;\n          // myLog(\"Transfer ecdsaSignature:\", ecdsaSignature);\n        } else {\n          await sigHW();\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    }\n\n    if (counterFactualInfo) {\n      transfer.counterFactualInfo = counterFactualInfo;\n    }\n    transfer.eddsaSignature = sign_tools.get_EddsaSig_Transfer(\n      transfer as loopring_defs.OriginTransferRequestV3,\n      eddsaKey\n    ).result;\n    transfer.ecdsaSignature = ecdsaSignature;\n    const dataToSig: Map<string, any> = sortObjDictionary(request);\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_DEPLOY_COLLECTION,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    return this.returnTxHash(raw_data);\n  }\n\n  /*\n   * Updates the EDDSA key associated with the specified account, making the previous one invalid in the process.\n   */\n  public async updateAccount<T extends loopring_defs.TX_HASH_API>(\n    req: loopring_defs.UpdateAccountRequestV3WithPatch,\n    options?: { accountId?: number; counterFactualInfo?: any }\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | RESULT_INFO> {\n    const { request, web3, chainId, walletType, isHWAddr: isHWAddrOld } = req;\n    const { accountId, counterFactualInfo }: any = options\n      ? options\n      : { accountId: 0 };\n\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n\n    const sigHW = async () => {\n      const result = await sign_tools.signUpdateAccountWithoutDataStructure(\n        web3,\n        request,\n        chainId,\n        walletType,\n        accountId,\n        counterFactualInfo\n      );\n      ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n    };\n\n    if (\n      walletType === ConnectorNames.MetaMask ||\n      walletType === ConnectorNames.Gamestop ||\n      walletType === ConnectorNames.OtherExtension\n    ) {\n      try {\n        if (isHWAddr) {\n          await sigHW();\n        } else {\n          const result = await sign_tools.signUpdateAccountWithDataStructure(\n            web3,\n            request,\n            chainId,\n            walletType,\n            accountId,\n            counterFactualInfo\n          );\n          ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    } else {\n      const isContractCheck = await isContract(web3, request.owner);\n      try {\n        if (isContractCheck) {\n          // myLog('signUpdateAccountWithDataStructureForContract')\n          const result =\n            await sign_tools.signUpdateAccountWithDataStructureForContract(\n              web3,\n              request,\n              chainId,\n              accountId\n            );\n          ecdsaSignature = result.ecdsaSig;\n          // myLog('ecdsaSignature:', ecdsaSignature)\n        } else if (counterFactualInfo) {\n          const result =\n            await sign_tools.signUpdateAccountWithDataStructureForContract(\n              web3,\n              request,\n              chainId,\n              accountId,\n              counterFactualInfo\n            );\n          ecdsaSignature = result.ecdsaSig;\n          // myLog(\"UpdateAccount ecdsaSignature:\", ecdsaSignature);\n        } else {\n          await sigHW();\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    }\n    if (counterFactualInfo) {\n      request.counterFactualInfo = counterFactualInfo;\n    }\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.ACCOUNT_ACTION,\n      bodyParams: request,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n      ecdsaSignature,\n    };\n\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    return this.returnTxHash(raw_data);\n  }\n  /*\n   * Get the ApiKey associated with the user's account.\n   */\n  public async getUserApiKey<R>(\n    request: loopring_defs.GetUserApiKeyRequest,\n    eddsaKey: string\n  ): Promise<{ raw_data: R; apiKey: string }> {\n    const dataToSig: Map<string, any> = new Map();\n\n    dataToSig.set(\"accountId\", request.accountId);\n\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.API_KEY_ACTION,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    if (raw_data?.resultInfo) {\n      throw {\n        ...raw_data?.resultInfo,\n      };\n    } else {\n      return {\n        apiKey: raw_data.apiKey,\n        raw_data,\n      };\n    }\n  }\n\n  /*\n   * Get user txs\n   */\n  public async getUserBills<R>(\n    request: loopring_defs.GetUserBillsRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    userTxs: loopring_defs.UserTx[];\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_BILLS,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const userTxs: loopring_defs.UserTx[] = [];\n\n    if (raw_data?.transactions instanceof Array) {\n      raw_data.transactions.forEach((item: loopring_defs.UserTx) => {\n        userTxs.push(item);\n      });\n    }\n\n    return {\n      totalNum: raw_data?.totalNum,\n      userTxs,\n      raw_data,\n    };\n  }\n}\n","import { BaseAPI, personalSign } from \"./base_api\";\nimport { isContract } from \"./contract_api\";\nimport * as loopring_defs from \"../defs/loopring_defs\";\nimport {\n  ContractType,\n  GetUserTradesRequest,\n  Guardian,\n  HebaoOperationLog,\n  LockHebaoHebaoParam,\n  ModuleType,\n  NetworkWallet,\n  Protector,\n  ReqParams,\n  WalletType,\n} from \"../defs/loopring_defs\";\n\nimport { ReqMethod, SIG_FLAG } from \"../defs/loopring_enums\";\nimport api from \"./ethereum/contracts\";\n\nimport { LOOPRING_URLs } from \"../defs/url_defs\";\nimport {\n  ChainId,\n  ConnectorNames,\n  HEBAO_META_TYPE,\n  RESULT_INFO,\n  SigSuffix,\n} from \"../defs\";\nimport { getEcDSASig, GetEcDSASigType } from \"./sign/sign_tools\";\nimport { sha256 } from \"ethereumjs-util\";\nimport { toHex } from \"../utils\";\nimport { sendRawTx } from \"./contract_api\";\nimport Web3 from \"web3\";\nimport { myLog } from \"../utils/log_tools\";\nimport * as ethUtil from \"ethereumjs-util\";\nimport { LoopringAPI } from \"../tests/MockData\";\nimport { AxiosResponse } from \"axios\";\n\nexport class WalletAPI extends BaseAPI {\n  /*\n   * Get user assets\n   */\n  public async getUserAssets(request: loopring_defs.GetUserAssetsRequest) {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_USER_ASSETS,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    const assetSeries: string[] = [];\n    const timestampSeries: number[] = [];\n    const dateSeries: string[] = [];\n\n    if (raw_data?.data instanceof Array) {\n      raw_data.data.forEach((item: loopring_defs.UserAssetInfo) => {\n        assetSeries.push(item.amount);\n        timestampSeries.push(item.createdAt);\n        dateSeries.push(item.createdAtStr);\n      });\n    }\n\n    return {\n      assetSeries,\n      timestampSeries,\n      dateSeries,\n      userAssets: raw_data.data as loopring_defs.UserAssetInfo[],\n      raw_data,\n    };\n  }\n\n  // 1.x\n\n  // 2.0\n  // const TYPE_STR =\n  //   \"recover(address wallet,uint256 validUntil,address newOwner,address[] newGuardians)\";\n  // const RECOVER_TYPEHASH = ethUtil.keccak(Buffer.from(TYPE_STR));\n  //\n  // const guardiansBs = encodeAddressesPacked(guardians);\n  // const guardiansHash = ethUtil.keccak(guardiansBs);\n  //\n  // const encodedRequest = ethAbi.encodeParameters(\n  //   [\"bytes32\", \"address\", \"uint256\", \"address\", \"bytes32\"],\n  //   [RECOVER_TYPEHASH, walletAddress, validUntil, newOwner, guardiansHash]\n  // );\n  //\n  //   const encodedRequest = web3.eth.abi.encodeParameters(\n  //     [\"bytes32\", \"address\", \"uint256\", \"address\"],\n  //     [RECOVER_TYPEHASH, request.wallet, request.validUntil, newOwner]\n  //   );\n  private getApproveRecoverTypedData(\n    chainId: ChainId,\n    guardiaContractAddress: any,\n    wallet: any,\n    validUntil: any,\n    newOwner: any\n  ) {\n    const typedData = {\n      types: {\n        EIP712Domain: [\n          { name: \"name\", type: \"string\" },\n          { name: \"version\", type: \"string\" },\n          { name: \"chainId\", type: \"uint256\" },\n          { name: \"verifyingContract\", type: \"address\" },\n        ],\n        recover: [\n          { name: \"wallet\", type: \"address\" },\n          { name: \"validUntil\", type: \"uint256\" },\n          { name: \"newOwner\", type: \"address\" },\n        ],\n      },\n      domain: {\n        name: \"GuardianModule\",\n        version: \"1.2.0\",\n        chainId: chainId,\n        verifyingContract: guardiaContractAddress,\n      },\n      primaryType: \"recover\",\n      message: {\n        wallet: wallet,\n        validUntil: validUntil,\n        newOwner: newOwner,\n      },\n    };\n    return typedData;\n  }\n  public getApproveRecoverV2TypedData(\n    chainId: ChainId,\n    guardiaContractAddress: any,\n    wallet: any,\n    validUntil: any,\n    newOwner: any,\n    newGuardians: Buffer | any\n  ) {\n    const typedData = {\n      types: {\n        EIP712Domain: [\n          { name: \"name\", type: \"string\" },\n          { name: \"version\", type: \"string\" },\n          { name: \"chainId\", type: \"uint256\" },\n          { name: \"verifyingContract\", type: \"address\" },\n        ],\n        recover: [\n          { name: \"wallet\", type: \"address\" },\n          { name: \"validUntil\", type: \"uint256\" },\n          { name: \"newOwner\", type: \"address\" },\n          { name: \"newGuardians\", type: \"string\" },\n        ],\n      },\n      domain: {\n        name: \"GuardianModule\",\n        version: \"1.2.0\",\n        chainId: chainId,\n        verifyingContract: guardiaContractAddress,\n      },\n      primaryType: \"recover\",\n      message: {\n        wallet: wallet,\n        validUntil: validUntil,\n        newOwner: newOwner,\n        newGuardians: newGuardians,\n      },\n    };\n    return typedData;\n  }\n\n  public rejectApproveHash(request: { approveRecordId: any; signer: any }) {\n    const uri = encodeURIComponent(\n      `${this.baseUrl + LOOPRING_URLs.REJECT_APPROVE_SIGNATURE}`\n    );\n    const params = encodeURIComponent(\n      JSON.stringify({\n        approveRecordId: request.approveRecordId,\n        signer: request.signer,\n      })\n    );\n    const message = `${ReqMethod.POST}&${uri}&${params}`;\n    myLog(\"rejectApproveHash\", message);\n    myLog(\"rejectApproveHash hash\", toHex(sha256(Buffer.from(message))));\n    return toHex(sha256(Buffer.from(message)));\n  }\n\n  /**\n   *\n   * @param approveRecordId  request.id\n   */\n  public async rejectHebao(req: loopring_defs.RejectHebaoRequestV3WithPatch) {\n    const { web3, address, request, chainId } = req;\n    const signHash = this.rejectApproveHash({\n      approveRecordId: request.approveRecordId,\n      signer: request.signer,\n    });\n    const result: any = await personalSign(\n      web3,\n      address,\n      \"\",\n      signHash,\n      ConnectorNames.Unknown,\n      chainId\n    );\n    const dataToSig: Map<string, any> = new Map();\n    dataToSig.set(\"approveRecordId\", request.approveRecordId);\n    dataToSig.set(\"signer\", address);\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.REJECT_APPROVE_SIGNATURE,\n      queryParams: {},\n      method: ReqMethod.POST,\n      bodyParams: request,\n      apiKey: \"\",\n      sigFlag: SIG_FLAG.NO_SIG,\n      sigObj: {\n        sig: result?.sig.slice(0, 132),\n      },\n    };\n\n    let hash: string | undefined = undefined;\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    } else {\n      hash = raw_data.data;\n    }\n    return {\n      hash,\n      raw_data,\n    };\n  }\n\n  public async signHebaoApproveWithoutDataStructure(\n    web3: Web3,\n    owner: string,\n    guardian: Guardian,\n    chainId: ChainId,\n    walletType: ConnectorNames\n  ) {\n    const result = await personalSign(\n      web3,\n      owner,\n      \"\",\n      guardian.messageHash,\n      walletType,\n      chainId\n    );\n    return result;\n  }\n\n  public async signHebaoApproveWithDataStructureForContract(\n    web3: Web3,\n    owner: string,\n    guardian: Guardian,\n    chainId: ChainId,\n    newOwner = \"\",\n    newGuardians: undefined | Buffer | any = undefined,\n    masterCopy: undefined | string = undefined,\n    forwarderModuleAddress: undefined | string = undefined\n  ) {\n    let typedData;\n    myLog(\"forwarderModuleAddress\", forwarderModuleAddress);\n\n    if (forwarderModuleAddress) {\n      typedData = this.getApproveRecoverTypedData(\n        chainId,\n        forwarderModuleAddress,\n        guardian.signedRequest.wallet,\n        guardian.signedRequest.validUntil,\n        newOwner\n      );\n      myLog(\"typedData\", typedData);\n    } else {\n      typedData = this.getApproveRecoverV2TypedData(\n        chainId,\n        masterCopy,\n        guardian.signedRequest.wallet,\n        guardian.signedRequest.validUntil,\n        newOwner,\n        newGuardians\n      );\n      myLog(\"typedData\", typedData);\n    }\n\n    const result = await getEcDSASig(\n      web3,\n      typedData,\n      owner,\n      GetEcDSASigType.Contract,\n      chainId,\n      undefined,\n      \"\",\n      ConnectorNames.Unknown\n      // counterFactualInfo\n    );\n    return { sig: result.ecdsaSig };\n  }\n  public encodeAddressesPacked(addrs: string[]) {\n    const addrsBs = Buffer.concat(\n      addrs.map((a) => {\n        return Buffer.from(\"00\".repeat(12) + a.slice(2), \"hex\");\n      })\n    );\n    myLog(\"addrsBs\", addrsBs.toString());\n    return addrsBs;\n  }\n  public async submitApproveSignature<T extends loopring_defs.TX_HASH_API>(\n    req: loopring_defs.SubmitApproveSignatureRequestWithPatch,\n    guardians: string[] = [],\n    isContract1XAddress?: boolean,\n    masterCopy?: string,\n    forwarderModuleAddress: string = \"\"\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | RESULT_INFO> {\n    const {\n      request,\n      web3,\n      chainId,\n      walletType,\n      guardian,\n      apiKey,\n      isHWAddr: isHWAddrOld,\n    } = req;\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n\n    const sigHW = async () => {\n      const result: any = await this.signHebaoApproveWithoutDataStructure(\n        web3,\n        request.signer,\n        guardian,\n        chainId,\n        walletType\n      );\n      ecdsaSignature = result?.sig + SigSuffix.Suffix03;\n    };\n    // metamask not import hw appWallet.\n    if (\n      walletType === ConnectorNames.MetaMask ||\n      walletType === ConnectorNames.Gamestop ||\n      walletType === ConnectorNames.Coinbase ||\n      walletType === ConnectorNames.OtherExtension\n    ) {\n      try {\n        if (isHWAddr) {\n          await sigHW();\n        } else {\n          const result: any = await this.signHebaoApproveWithoutDataStructure(\n            web3,\n            request.signer,\n            guardian,\n            chainId,\n            walletType\n          );\n          ecdsaSignature = result?.sig + SigSuffix.Suffix03;\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    } else {\n      const isContractCheck = await isContract(web3, request.signer);\n      try {\n        if (isContractCheck) {\n          let newOwner = undefined,\n            newGuardians = [];\n\n          guardian.businessDataJson.value.value.newOwner\n            ? guardian.businessDataJson.value.value.newOwner\n            : 0;\n          if (\n            guardian.businessDataJson &&\n            guardian.businessDataJson.value &&\n            guardian.businessDataJson.value.value\n          ) {\n            newOwner = guardian.businessDataJson.value.value.newOwner;\n            newGuardians = guardian.businessDataJson.value.value.newGuardians;\n          }\n          const guardiansBs = this.encodeAddressesPacked(newGuardians);\n          const guardiansHash = ethUtil.keccak(guardiansBs);\n          // const guardiansBs =\n          //   LoopringAPI.walletAPI.encodeAddressesPacked(guardian.businessDataJson.value.value.newGuardians);\n          const result =\n            await this.signHebaoApproveWithDataStructureForContract(\n              web3,\n              request.signer,\n              guardian,\n              chainId,\n              newOwner,\n              isContract1XAddress ? undefined : guardiansHash,\n              isContract1XAddress ? undefined : masterCopy,\n              forwarderModuleAddress ? undefined : forwarderModuleAddress\n            );\n          ecdsaSignature = result.sig;\n        } else {\n          await sigHW();\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    }\n    request.signature = ecdsaSignature;\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.SUBMIT_APPROVE_SIGNATURE,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    return this.returnTxHash(raw_data);\n  }\n\n  public async getAddressByENS<R extends any, T extends string>(\n    request: loopring_defs.GetEnsAddressRequest\n  ): Promise<{\n    address: string | undefined;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.RESOLVE_ENS,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    let address: T | undefined;\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    } else {\n      address = raw_data.data as T;\n    }\n    return {\n      address,\n      raw_data,\n    };\n  }\n\n  public async getWalletType<T extends any>(\n    request: loopring_defs.GET_WALLET_TYPE\n  ): Promise<{\n    walletType: WalletType | undefined;\n    raw_data: T;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_WALLET_TYPE,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    let walletType: WalletType | undefined;\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    } else {\n      walletType = raw_data.data;\n    }\n    return {\n      walletType,\n      raw_data,\n    };\n  }\n\n  public async getContractType<T = ContractType>(\n    request: loopring_defs.GET_WALLET_TYPE\n  ): Promise<{\n    contractType: T | undefined;\n    raw_data: T;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_WALLET_CONTRACTVERSION,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    let contractType: T | undefined;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    } else {\n      contractType = raw_data.data[0];\n    }\n    return {\n      contractType,\n      raw_data,\n    };\n  }\n\n  public async getWalletModules<T = ModuleType>(\n    request: loopring_defs.GET_WALLET_TYPE\n  ): Promise<{\n    walletModule: T | undefined;\n    raw_data: T;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_WALLET_MODULES,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    let walletModule: T | undefined;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    } else {\n      walletModule = raw_data.data[0];\n    }\n    return {\n      walletModule,\n      raw_data,\n    };\n  }\n  public async getEnsByAddress<R extends any, T extends string>(\n    request: loopring_defs.GetEnsNameRequest\n  ): Promise<{\n    ensName: string | undefined;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.RESOLVE_NAME,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    let ensName: T | undefined;\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    } else {\n      ensName = raw_data.data as T;\n    }\n    return {\n      ensName,\n      raw_data,\n    };\n  }\n\n  public async lockHebaoWallet({\n    web3,\n    from,\n    contractAddress,\n    gasPrice,\n    gasLimit = 150000,\n    chainId = 1,\n    wallet,\n    nonce,\n    isVersion1,\n  }: // sendByMetaMask = true,\n  LockHebaoHebaoParam) {\n    if (isVersion1) {\n      const data = api.Contracts.HeBao.encodeInputs(\"lock\", {\n        wallet,\n      });\n\n      return await sendRawTx(\n        web3,\n        from,\n        contractAddress,\n        0,\n        data,\n        chainId,\n        nonce,\n        gasPrice,\n        Number(gasLimit),\n        true\n      );\n    } else {\n      // const data = api.Contracts.HeBao.encodeInputs(\"lock\", {});\n      return await sendRawTx(\n        web3,\n        from,\n        contractAddress,\n        0,\n        \"0xf83d08ba\",\n        chainId,\n        nonce,\n        gasPrice,\n        Number(gasLimit),\n        true\n      );\n    }\n  }\n\n  public async getHebaoConfig(request: { network?: NetworkWallet }) {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_HEBAO_CONFIG,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return { raw_data: raw_data.data };\n  }\n\n  public async sendMetaTx<R extends any, T extends any>(\n    request: loopring_defs.SendMetaTxRequest,\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.SEND_META_TX,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n      bodyParams: request,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return { raw_data };\n  }\n\n  public async getGuardianApproveList<R extends any, T extends Guardian>(\n    request: loopring_defs.GetGuardianApproveListRequest\n  ): Promise<{\n    guardiansArray: Array<T>;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_GUARDIAN_APPROVE_LIST,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    let guardiansArray: Array<T> = [];\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    } else {\n      guardiansArray = raw_data?.data?.guardians.map((r: any) => ({\n        ens: r.ens ? r.ens : \"\",\n        address: r.wallet,\n        type: HEBAO_META_TYPE[r.metaTxType],\n        id: r.approveId,\n        messageHash: r.txAwareHash,\n        businessDataJson: r.businessDataJson,\n        signedRequest: r.signedRequest,\n        ...r,\n      }));\n    }\n    return {\n      guardiansArray,\n      raw_data,\n    };\n  }\n\n  // /api/appWallet/v3/operationLogs?from=0x189a3c44a39c5ab22712543c0f62a9833bbe8df9&fromTime=0&to=&offset=0&network=ETHEREUM&statues=&hebaoTxType=&limit=20\n\n  /**\n   * getProtectors\n   * @param {GetUserTradesRequest} request\n   * @param apiKey\n   */\n  public async getProtectors<R extends any, T extends Protector>(\n    request: loopring_defs.GetProtectorRequest,\n    apiKey: string\n  ): Promise<{\n    protectorArray: Array<T>;\n\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_PROTECTORS,\n      apiKey: apiKey,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    let protectorArray: Array<T> = [];\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    } else {\n      protectorArray = raw_data?.data.map((p: any) => ({\n        ens: p.protectEns,\n        address: p.protectAddress,\n        lockStatus: p.walletStatus?.toUpperCase(),\n      }));\n    }\n    return {\n      protectorArray,\n      raw_data,\n    };\n  }\n\n  /*\n   * Get user trade amount\n   */\n  public async getHebaoOperationLogs<\n    R extends any,\n    T extends HebaoOperationLog\n  >(\n    request: loopring_defs.HebaoOperationLogs\n  ): Promise<{\n    operationArray: Array<T>;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_OPERATION_LOGS,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      operationArray: raw_data.data as T[],\n      raw_data,\n    };\n  }\n\n  /*\n   * Get user trade amount\n   */\n  public async getUserTradeAmount(request: loopring_defs.GetUserTradeAmount) {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_USER_TRADE_AMOUNT,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n    };\n  }\n\n  /*\n   * Get token prices\n   * e.g. http://api3.loopring.io/api/wallet/v3/tokenPrices?token=0xdac17f958d2ee523a2206206994597c13d831ec7&intervalType=1&limit=30&currency=CNY\n   */\n  public async getTokenPrices(request: loopring_defs.GetTokenPricesRequest) {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_TOKEN_PRICES,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const priceSeries: string[] = [];\n    const timestampSeries: number[] = [];\n\n    if (raw_data?.data instanceof Array) {\n      raw_data.data.forEach((item: loopring_defs.TokenPriceInfo) => {\n        priceSeries.push(item.price);\n        timestampSeries.push(item.createdAt);\n      });\n    }\n\n    return {\n      tokenPrices: raw_data.data as loopring_defs.TokenPriceInfo[],\n      priceSeries,\n      timestampSeries,\n      raw_data,\n    };\n  }\n\n  /*\n   * Fetches, for all the tokens supported by Loopring, their fiat price.\n   * response: { [key: string]: <price> }  key is token address\n   */\n  public async getLatestTokenPrices(\n    request?: loopring_defs.getLatestTokenPricesRequest\n  ) {\n    const reqParams: ReqParams = {\n      queryParams: request,\n      url: LOOPRING_URLs.GET_LATEST_TOKEN_PRICES,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const tokenPrices: loopring_defs.LoopringMap<number> = {};\n\n    if (raw_data?.data instanceof Array) {\n      raw_data.data.forEach((item: any) => {\n        tokenPrices[item.token.toLowerCase()] = parseFloat(item.price);\n      });\n    }\n\n    return {\n      tokenPrices,\n      raw_data,\n    };\n  }\n}\n","import { BaseAPI } from \"./base_api\";\n\nimport { ReqParams } from \"../defs/loopring_defs\";\n\nimport { SIG_FLAG, ReqMethod } from \"../defs/loopring_enums\";\n\nimport { LOOPRING_URLs } from \"../defs/url_defs\";\n\nimport * as loopring_defs from \"../defs/loopring_defs\";\n\nimport * as sign_tools from \"./sign/sign_tools\";\n\nexport class WhitelistedUserAPI extends BaseAPI {\n  /*\n   * Submit offchain withdraw request\n   * not supported for now.\n   */\n  private async submitOffchainWithdraw(\n    request: loopring_defs.OffChainWithdrawalRequestV3,\n    eddsaKey: string,\n    apiKey: string\n  ) {\n    request.eddsaSignature = sign_tools.get_EddsaSig_OffChainWithdraw(\n      request,\n      eddsaKey\n    ).result;\n\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.WITHDRAWALS_ACTION,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n    };\n  }\n\n  /*\n   * Submit offchain withdraw request\n   */\n  public async submitInternalTransfer(\n    request: loopring_defs.OriginTransferRequestV3,\n    eddsaKey: string,\n    apiKey: string\n  ) {\n    request.eddsaSignature = sign_tools.get_EddsaSig_Transfer(\n      request,\n      eddsaKey\n    ).result;\n\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.POST_INTERNAL_TRANSFER,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n    };\n  }\n}\n","import { BaseAPI } from \"./base_api\";\n\nimport { LOOPRING_URLs } from \"../defs/url_defs\";\n\nimport {\n  OffchainFeeReqType,\n  ReqMethod,\n  SIG_FLAG,\n} from \"../defs/loopring_enums\";\n\nimport {\n  GameRankInfo,\n  GetAmmPoolGameUserRankRequest,\n  ReqParams,\n} from \"../defs/loopring_defs\";\nimport { ChainId } from \"../defs\";\nimport * as loopring_defs from \"../defs/loopring_defs\";\nimport { sortObjDictionary } from \"../utils\";\n\nconst GLOBAL_KEY = {\n  GOERLI: {\n    key: \"685xvATlBCsvzyiTxaS02vu0b1xN0DAFpNpslKUNCuSxDhx8gyyz8VmvUqqe5HSQ\",\n    id: 10013,\n  },\n  MAIN: {\n    key: \"re356TcrQ6KhlpkvWxP4UN0C4EqxQVV7ZjvLjunwTjaQPZ20ue2ZgClFeT7okpDQ\",\n    id: 22638,\n  },\n};\n\nexport class GlobalAPI extends BaseAPI {\n  public async getActiveFeeInfo(request: { accountId?: number }) {\n    const _request: loopring_defs.GetOffchainFeeAmtRequest = {\n      accountId: request.accountId\n        ? request.accountId\n        : this.chainId === ChainId.MAINNET\n        ? GLOBAL_KEY.MAIN.id\n        : GLOBAL_KEY.GOERLI.id,\n      requestType: OffchainFeeReqType.UPDATE_ACCOUNT,\n    };\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_OFFCHAIN_FEE_AMT,\n      queryParams: _request,\n      apiKey:\n        this.chainId === ChainId.MAINNET\n          ? GLOBAL_KEY.MAIN.key\n          : GLOBAL_KEY.GOERLI.key,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const gasPrice = parseInt(raw_data.gasPrice);\n    const fees: loopring_defs.LoopringMap<loopring_defs.OffchainFeeInfo> = {};\n    if (raw_data?.fees instanceof Array) {\n      raw_data.fees.forEach((item: loopring_defs.OffchainFeeInfo) => {\n        fees[item.token] = item;\n      });\n    }\n\n    return {\n      fees,\n      gasPrice,\n      raw_data,\n    };\n  }\n  public async getUserBalanceForFee(request: {\n    accountId: number;\n    tokens: string;\n  }) {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_USER_EXCHANGE_BALANCES,\n      queryParams: request,\n      apiKey:\n        this.chainId === ChainId.MAINNET\n          ? GLOBAL_KEY.MAIN.key\n          : GLOBAL_KEY.GOERLI.key,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const userBalances: loopring_defs.LoopringMap<loopring_defs.UserBalanceInfo> =\n      {};\n\n    if (raw_data instanceof Array) {\n      raw_data.forEach((item: loopring_defs.UserBalanceInfo) => {\n        userBalances[item.tokenId] = item;\n      });\n    }\n\n    return {\n      userBalances,\n      raw_data,\n    };\n  }\n  public async getAmmPoolGameUserRank<R>(\n    request: GetAmmPoolGameUserRankRequest\n  ): Promise<{\n    raw_data: R;\n    userRank: GameRankInfo;\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_AMMPOOL_GAME_USER_RANK,\n      queryParams: request,\n      apiKey:\n        this.chainId === ChainId.MAINNET\n          ? GLOBAL_KEY.MAIN.key\n          : GLOBAL_KEY.GOERLI.key,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n    const userRank: GameRankInfo = raw_data.data;\n    return {\n      userRank,\n      raw_data: raw_data.data,\n    };\n  }\n  public async getBanxaAPI<R>(\n    {\n      method,\n      query,\n      payload,\n      url,\n      accountId,\n    }: {\n      method: ReqMethod;\n      query: string;\n      payload: string;\n      url: string;\n      accountId: number;\n    },\n    eddsaKey: string,\n    apiKey: string\n  ): Promise<{\n    result: R;\n    raw_data: R;\n  }> {\n    const queryParams = {\n      accountId,\n      url,\n      method: method.toString(),\n      query: query,\n      payload: payload ? payload : \"\",\n    };\n    const dataToSig = sortObjDictionary({\n      ...queryParams,\n      url: encodeURIComponent(queryParams.url),\n      query: encodeURIComponent(queryParams.query),\n      payload: encodeURIComponent(queryParams.payload),\n    });\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_BANXA_API_KEY,\n      method: ReqMethod.GET,\n      queryParams,\n      apiKey,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        PrivateKey: eddsaKey,\n        dataToSig: dataToSig,\n      },\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data.resultInfo,\n      };\n    }\n    return {\n      result: raw_data.result,\n      raw_data: raw_data,\n    };\n  }\n  // public async getBanxaAPIRequest<R>({}) {}\n  // http://dev.loopring.io?method=GET&query=/api/coins&payload\n}\n","import { BaseAPI } from \"./base_api\";\n\nimport { LOOPRING_URLs } from \"../defs\";\nimport { ChainId, ReqMethod, ReqParams, SIG_FLAG } from \"../defs\";\n\nexport class DelegateAPI extends BaseAPI {\n  public async getCode(address: string): Promise<string> {\n    const reqParams: ReqParams = {\n      sigFlag: SIG_FLAG.NO_SIG,\n      url: LOOPRING_URLs.GET_DELEGATE_GET_CODE,\n      method: ReqMethod.POST,\n      bodyParams: {address},\n    };\n\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return raw_data;\n  }\n\n  public async getIPFS(path: string): Promise<string> {\n    const reqParams: ReqParams = {\n      sigFlag: SIG_FLAG.NO_SIG,\n      url: LOOPRING_URLs.GET_DELEGATE_GET_IPFS,\n      method: ReqMethod.GET,\n      queryParams: {path},\n    };\n\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo && raw_data?.resultInfo.code) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return raw_data;\n  }\n\n  public getCollectionDomain() {\n    return this.chainId === ChainId.GOERLI ? \"https://uatnftinfos.loopring.io\" : \"https://nftinfos.loopring.io\"\n  }\n}\n","/* eslint-disable camelcase  */\nimport { BaseAPI } from \"./base_api\";\n\nimport * as loopring_defs from \"../defs/loopring_defs\";\nimport { SEP } from \"../defs\";\nimport {\n  ConnectorNames,\n  LOOPRING_URLs,\n  ReqMethod,\n  ReqParams,\n  RESULT_INFO,\n  SIG_FLAG,\n  SigPatchField,\n  SigSuffix,\n  SoursURL,\n} from \"../defs\";\nimport { sortObjDictionary } from \"../utils\";\nimport * as sign_tools from \"./sign/sign_tools\";\nimport { isContract } from \"./contract_api\";\nimport { AxiosResponse } from \"axios\";\nimport { DepthData } from \"../defs/loopring_defs\";\nimport { getMidPrice } from \"./exchange_api\";\n\nexport class DefiAPI extends BaseAPI {\n  /*\n   * Returns the fee rate of users placing orders in specific markets\n   */\n  public async getDefiToken<R>(): Promise<{\n    raw_data: R;\n    tokensMap: loopring_defs.LoopringMap<loopring_defs.TokenInfo>;\n    idIndex: loopring_defs.LoopringMap<string>;\n    addressIndex: loopring_defs.LoopringMap<loopring_defs.TokenAddress>;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_DEFI_TOKENS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    const tokensMap: loopring_defs.LoopringMap<loopring_defs.TokenInfo> = {};\n    const addressIndex: loopring_defs.LoopringMap<loopring_defs.TokenAddress> =\n      {};\n    const idIndex: loopring_defs.LoopringMap<string> = {};\n    if (raw_data instanceof Array) {\n      raw_data.forEach((item: loopring_defs.TokenInfo) => {\n        if (item.symbol.startsWith(\"LP-\")) {\n          item.isLpToken = true;\n        } else {\n          item.isLpToken = false;\n        }\n        tokensMap[item.symbol] = item;\n\n        const coinInfo = {\n          icon: SoursURL + `ethereum/assets/${item.address}/logo.png`,\n          name: item.symbol,\n          simpleName: item.symbol,\n          description: item.type,\n          company: \"\",\n        };\n        // totalCoinMap[item.symbol] = coinInfo;\n        addressIndex[item.address.toLowerCase()] = item.symbol;\n        idIndex[item.tokenId] = item.symbol;\n      });\n    }\n\n    return {\n      tokensMap,\n      idIndex,\n      addressIndex,\n      raw_data,\n    };\n  }\n\n  public async getDefiMarkets<R>(\n    request: loopring_defs.GetDefiMarketRequest,\n    url: string = LOOPRING_URLs.GET_DEFI_MARKETS\n  ): Promise<{\n    markets: loopring_defs.LoopringMap<loopring_defs.DefiMarketInfo>;\n    pairs: loopring_defs.LoopringMap<loopring_defs.TokenRelatedInfo>;\n    tokenArr: string[];\n    tokenArrStr: string;\n    marketArr: string[];\n    marketArrStr: string;\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url,\n      queryParams: {}, //request\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const markets: loopring_defs.LoopringMap<loopring_defs.DefiMarketInfo> = {};\n\n    const pairs: loopring_defs.LoopringMap<loopring_defs.TokenRelatedInfo> = {};\n\n    // const isMix = url === LOOPRING_URLs.GET_MIX_MARKETS;\n\n    if (raw_data?.markets instanceof Array) {\n      const types = request?.defiType?.split(\",\");\n      let _markets = [];\n      if (types) {\n        _markets = raw_data.markets.filter(\n          (item: loopring_defs.DefiMarketInfo) =>\n            types.includes(item.type?.toUpperCase())\n        );\n      } else {\n        _markets = raw_data.markets;\n      }\n      _markets.forEach((item: any) => {\n        const marketInfo: loopring_defs.DefiMarketInfo = {\n          ...item,\n        };\n\n        markets[item.market] = marketInfo;\n\n        if (item.enabled) {\n          const [_markets, type, base, quote] =\n            item.market.match(/^(\\w+-)?(\\w+)-(\\w+)$/i);\n          if (type === \"DUAL-\" && base && quote) {\n            if (!pairs[base]) {\n              pairs[base] = {\n                tokenId: item.baseTokenId,\n                tokenList: [quote],\n              };\n            } else {\n              pairs[base].tokenList = [...pairs[base].tokenList, quote];\n            }\n            if (!pairs[quote]) {\n              pairs[quote] = {\n                tokenId: item.baseTokenId,\n                tokenList: [base],\n              };\n            } else {\n              pairs[quote].tokenList = [...pairs[quote].tokenList, base];\n            }\n          } else if (base && quote) {\n            const market: string = item.market;\n            // const ind = market.indexOf(\"-\");\n            // const base = market.substring(0, ind);\n            // const quote = market.substring(ind + 1, market.length);\n\n            if (!pairs[base]) {\n              pairs[base] = {\n                tokenId: item.baseTokenId,\n                tokenList: [quote],\n              };\n            } else {\n              pairs[base].tokenList = [...pairs[base].tokenList, quote];\n            }\n          }\n        }\n      });\n    }\n    const marketArr: string[] = Reflect.ownKeys(markets) as string[];\n    const tokenArr: string[] = Reflect.ownKeys(pairs) as string[];\n    return {\n      markets,\n      pairs,\n      tokenArr,\n      tokenArrStr: tokenArr.join(SEP),\n      marketArr,\n      marketArrStr: marketArr.join(SEP),\n      raw_data,\n    };\n  }\n\n  public async orderDefi<R>(\n    request: loopring_defs.DefiOrderRequest,\n    privateKey: string,\n    apiKey: string\n  ): Promise<\n    | (Omit<any, \"resultInfo\"> & { raw_data: Omit<any, \"resultInfo\"> })\n    | RESULT_INFO\n  > {\n    const dataToSig = [\n      request.exchange,\n      request.storageId,\n      request.accountId,\n      request.sellToken.tokenId,\n      request.buyToken.tokenId,\n      request.sellToken.volume,\n      request.buyToken.volume,\n      request.validUntil,\n      request.maxFeeBips,\n      request.fillAmountBOrS ? 1 : 0,\n      0,\n    ];\n\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.POST_DEFI_ORDER,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG_POSEIDON,\n      sigObj: {\n        dataToSig,\n        sigPatch: SigPatchField.EddsaSignature,\n        PrivateKey: privateKey,\n      },\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    return this.returnTxHash(raw_data);\n  }\n\n  public async getDefiReward<R>(\n    request: loopring_defs.GetUserDefiRewardRequest,\n    apiKey: string\n  ): Promise<\n    | {\n        raw_data: R;\n        totalNum: number;\n        totalRewards: string;\n        lastDayRewards: string;\n        rewards: [];\n      }\n    | RESULT_INFO\n  > {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_DEFI_REWARDS,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    return {\n      ...raw_data,\n      raw_data,\n    };\n  }\n\n  public async getDefiTransaction<R>(\n    request: loopring_defs.GetUserDefiTxRequest,\n    apiKey: string\n  ): Promise<\n    | {\n        raw_data: R;\n        totalNum: number;\n        userDefiTxs: loopring_defs.UserDefiTxsHistory[];\n      }\n    | RESULT_INFO\n  > {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_DEFI_TRANSACTIONS,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    return {\n      totalNum: raw_data?.totalNum,\n      userDefiTxs: raw_data.transactions as loopring_defs.UserDefiTxsHistory[],\n      raw_data,\n    };\n  }\n\n  public async getDualInfos<R>(\n    request: loopring_defs.GetDualInfosRequest\n  ): Promise<\n    | RESULT_INFO\n    | {\n        totalNum: number;\n        dualInfo: {\n          infos: loopring_defs.DualProductAndPrice[];\n          index: loopring_defs.DualIndex;\n          balance: loopring_defs.DualBalance[];\n          rules: loopring_defs.DualRulesCoinsInfo[];\n        };\n        raw_data: R;\n      }\n  > {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_DUAL_INFOS,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      totalNum: raw_data?.totalNum,\n      dualInfo: {\n        infos: raw_data.infos as loopring_defs.DualProductAndPrice[],\n        index: raw_data.index as loopring_defs.DualIndex,\n        balance: raw_data.balance as loopring_defs.DualBalance[],\n        rules: raw_data.rules as loopring_defs.DualRulesCoinsInfo[],\n      },\n      raw_data,\n    };\n  }\n\n  public async getDualBalance<R>(request = undefined) {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_DUAL_BALANCE,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    return {\n      raw_data,\n      dualBalanceMap: [...raw_data].reduce((prev, item) => {\n        return { ...prev, [item.coin]: item };\n      }, {} as loopring_defs.LoopringMap<loopring_defs.DualBalance>),\n    };\n  }\n\n  // public async getDualRule<R>(request :loopring_defs.GetDualRuleRequest): Promise<RESULT_INFO | {\n  //\n  // \traw_data: R,\n  // }> {\n  // \tconst reqParams: loopring_defs.ReqParams = {\n  // \t\turl: LOOPRING_URLs.GET_DUAL_RULE,\n  // \t\tqueryParams: request,\n  // \t\tmethod: ReqMethod.GET,\n  // \t\tsigFlag: SIG_FLAG.NO_SIG,\n  // \t};\n  // \tconst raw_data = (await this.makeReq().request(reqParams)).data;\n  // \tif (raw_data?.resultInfo) {\n  // \t\treturn {\n  // \t\t\t...raw_data?.resultInfo,\n  // \t\t};\n  // \t}\n  //\n  //\n  // \treturn {\n  // \t\traw_data,\n  // \t\tdualBalanceMap: [...raw_data].reduce((item, prev) => {\n  // \t\t\treturn {...prev, [ item.coin ]: item};\n  // \t\t}, {} as loopring_defs.loopring_defs.LoopringMap<loopring_defs.DualBalance>)\n  // \t}\n  // }\n\n  public async getDualPrices(request: loopring_defs.GetDualPricesRequest) {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_DUAL_PRICES,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    return {\n      raw_data,\n      totalNum: raw_data?.totalNum,\n      infos: raw_data.infos as loopring_defs.DualPrice[],\n    };\n  }\n\n  public async getDualIndex(request: {\n    baseSymbol: string;\n    quoteSymbol: string;\n  }) {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_DUAL_INDEX,\n      queryParams: request,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n      dualPrice: raw_data as loopring_defs.DualPrice[],\n    };\n  }\n\n  public async getDualTransactions(\n    request: loopring_defs.GetUserDualTxRequest,\n    apiKey: string\n  ) {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_DUAL_TRANSACTIONS,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    return {\n      totalNum: raw_data?.totalNum,\n      userDualTxs: raw_data.transactions as loopring_defs.UserDualTxsHistory[],\n      raw_data,\n    };\n    return;\n  }\n\n  public async orderDual(\n    request: loopring_defs.DualOrderRequest,\n    privateKey: string,\n    apiKey: string\n  ) {\n    const dataToSig = [\n      request.exchange,\n      request.storageId,\n      request.accountId,\n      request.sellToken.tokenId,\n      request.buyToken.tokenId,\n      request.sellToken.volume,\n      request.buyToken.volume,\n      request.validUntil,\n      request.maxFeeBips,\n      request.fillAmountBOrS ? 1 : 0,\n      0,\n    ];\n\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_DUAL_ORDER,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG_POSEIDON,\n      sigObj: {\n        dataToSig,\n        sigPatch: SigPatchField.EddsaSignature,\n        PrivateKey: privateKey,\n      },\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    return this.returnTxHash(raw_data);\n  }\n\n  public async getDualUserLocked(\n    {\n      lockTag = [\n        loopring_defs.DUAL_TYPE.DUAL_BASE,\n        loopring_defs.DUAL_TYPE.DUAL_CURRENCY,\n      ],\n      ...request\n    }: loopring_defs.DualUserLockedRequest,\n    apiKey: string\n  ) {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_DUAL_USER_LOCKED,\n      queryParams: { ...request, lockTag: lockTag.join(\",\") },\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n\n    return {\n      lockRecord: raw_data.lockRecord,\n      raw_data,\n    };\n    return;\n  }\n\n  public async sendStakeClaim(\n    req: loopring_defs.OriginStakeClaimRequestV3WithPatch,\n    options?: { accountId?: number; counterFactualInfo?: any }\n  ) {\n    const {\n      request,\n      web3,\n      chainId,\n      walletType,\n      eddsaKey,\n      apiKey,\n      isHWAddr: isHWAddrOld,\n    } = req;\n    const { accountId, counterFactualInfo }: any = options\n      ? options\n      : { accountId: 0 };\n    const { transfer } = request;\n\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n    transfer.payeeId = 0;\n    transfer.memo = `STAKE-CLAIM->${request.accountId}`;\n\n    const sigHW = async () => {\n      const result = await sign_tools.signTransferWithoutDataStructure(\n        web3,\n        transfer.payerAddr,\n        transfer as loopring_defs.OriginTransferRequestV3,\n        chainId,\n        walletType,\n        accountId,\n        counterFactualInfo\n      );\n      ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n    };\n    if (\n      walletType === ConnectorNames.MetaMask ||\n      walletType === ConnectorNames.Gamestop ||\n      walletType === ConnectorNames.OtherExtension\n    ) {\n      // myLog(\"submitDeployNFT iConnectorNames.MetaMask:\", walletType);\n      try {\n        if (isHWAddr) {\n          await sigHW();\n        } else {\n          // myLog(\"submitDeployNFT notHWAddr:\", isHWAddr);\n          const result = await sign_tools.signTransferWithDataStructure(\n            web3,\n            transfer.payerAddr,\n            transfer as loopring_defs.OriginTransferRequestV3,\n            chainId,\n            walletType,\n            accountId,\n            counterFactualInfo\n          );\n          ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    } else {\n      const isContractCheck = await isContract(web3, transfer.payerAddr);\n      try {\n        if (isContractCheck) {\n          const result =\n            await sign_tools.signTransferWithDataStructureForContract(\n              web3,\n              transfer.payerAddr,\n              transfer as loopring_defs.OriginTransferRequestV3,\n              chainId,\n              accountId\n            );\n          ecdsaSignature = result.ecdsaSig;\n        } else if (counterFactualInfo) {\n          const result =\n            await sign_tools.signTransferWithDataStructureForContract(\n              web3,\n              transfer.payerAddr,\n              transfer as loopring_defs.OriginTransferRequestV3,\n              chainId,\n              accountId,\n              counterFactualInfo\n            );\n          ecdsaSignature = result.ecdsaSig;\n          // myLog(\"Transfer ecdsaSignature:\", ecdsaSignature);\n        } else {\n          await sigHW();\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    }\n\n    if (counterFactualInfo) {\n      transfer.counterFactualInfo = counterFactualInfo;\n    }\n    transfer.eddsaSignature = sign_tools.get_EddsaSig_Transfer(\n      transfer as loopring_defs.OriginTransferRequestV3,\n      eddsaKey\n    ).result;\n    transfer.ecdsaSignature = ecdsaSignature;\n    const dataToSig: Map<string, any> = sortObjDictionary(request);\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_STAKE_CLAIM,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n    };\n\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n      if (raw_data?.resultInfo) {\n        return {\n          ...raw_data?.resultInfo,\n        };\n      }\n      return { raw_data, ...raw_data };\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    // return this.returnTxHash(raw_data);\n    // const raw_data = (await this.makeReq().request(reqParams)).data;\n  }\n\n  public async sendStakeRedeem(\n    request: {\n      accountId: number;\n      hash: string;\n      token: loopring_defs.TokenVolumeV3;\n    },\n    privateKey: string,\n    apiKey: string\n  ) {\n    const dataToSig: Map<string, any> = sortObjDictionary(request);\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_STAKE_REDEEM,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: privateKey,\n      },\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return { raw_data, ...raw_data };\n  }\n  public async sendStake(\n    request: {\n      accountId: number;\n      token: loopring_defs.TokenVolumeV3;\n      timestamp: number;\n    },\n    privateKey: string,\n    apiKey: string\n  ) {\n    const dataToSig: Map<string, any> = sortObjDictionary(request);\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_STAKE,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: privateKey,\n      },\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return { raw_data, ...raw_data };\n  }\n\n  public async getStakeProducts<R>(): Promise<{\n    products: loopring_defs.STACKING_PRODUCT[];\n    raw_data: R;\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_STAKE_PRODUCTS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return { products: raw_data, raw_data };\n  }\n\n  public async getStakeSummary<R>(\n    request: {\n      accountId: number;\n      tokenId: number;\n      start?: number;\n      end?: number;\n      limit?: number;\n      offset?: number;\n      hashes?: string;\n      statuses?: string;\n    },\n    apiKey: string\n  ): Promise<\n    | {\n        raw_data: R;\n        totalNum: number;\n        totalStaked: string;\n        totalStakedRewards: string;\n        totalLastDayPendingRewards: string;\n        totalClaimableRewards: string;\n        list: loopring_defs.StakeInfoOrigin[];\n      }\n    | RESULT_INFO\n  > {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_STAKE_SUMMARY,\n      queryParams: { ...request },\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return { ...raw_data, list: raw_data.staking, raw_data };\n  }\n\n  public async getStakeTransactions<R>(\n    request: {\n      accountId: number;\n      tokenId: number;\n      start?: number;\n      end?: number;\n      limit?: number;\n      offset?: number;\n      hashes?: string;\n      types?: string;\n    },\n    apiKey: string\n  ): Promise<{\n    list: loopring_defs.STACKING_TRANSACTIONS[];\n    totalNum: number;\n    raw_data: R;\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_STAKE_TRANSACTIONS,\n      queryParams: { ...request },\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      list: raw_data,\n      totalNum: raw_data.totalNum,\n      raw_data,\n    };\n  }\n\n  public async getCefiMarkets<R>(): Promise<{\n    markets: loopring_defs.LoopringMap<\n      loopring_defs.CEX_MARKET & { type: \"CEX\" }\n    >;\n    pairs: loopring_defs.LoopringMap<loopring_defs.TokenRelatedInfo>;\n    tokenArr: string[];\n    tokenArrStr: string;\n    marketArr: string[];\n    marketArrStr: string;\n    raw_data: R;\n  }> {\n    const reqParams = {\n      url: LOOPRING_URLs.GET_CEFI_MARKETS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const markets: loopring_defs.LoopringMap<\n      loopring_defs.CEX_MARKET & { type: \"CEX\" }\n    > = {};\n\n    const pairs: loopring_defs.LoopringMap<loopring_defs.TokenRelatedInfo> = {};\n\n    // const isMix = url === LOOPRING_URLs.GET_MIX_MARKETS;\n\n    if (raw_data instanceof Array) {\n      // let _markets = [];\n      // if (types) {\n      //   _markets = raw_data.markets.filter(\n      //     (item: loopring_defs.DefiMarketInfo) =>\n      //       types.includes(item.type?.toUpperCase())\n      //   );\n      // } else {\n      //   _markets = raw_data.markets;\n      // }\n      raw_data.forEach((item: any) => {\n        const marketInfo: loopring_defs.CEX_MARKET = {\n          ...item,\n        };\n\n        markets[marketInfo.market] = { ...marketInfo, type: \"CEX\" };\n        const { base, quote } = marketInfo?.cefiQuota ?? {\n          base: \"\",\n          quote: \"\",\n        };\n        if (marketInfo.enabled && marketInfo.cefiQuota && base && quote) {\n          if (!pairs[base]) {\n            pairs[base] = {\n              tokenId: item.baseTokenId,\n              tokenList: [quote],\n            };\n          } else {\n            pairs[base].tokenList = [...pairs[base].tokenList, quote];\n          }\n          if (!pairs[quote]) {\n            pairs[quote] = {\n              tokenId: item.baseTokenId,\n              tokenList: [base],\n            };\n          } else {\n            pairs[quote].tokenList = [...pairs[quote].tokenList, base];\n          }\n        }\n      });\n    }\n    const marketArr: string[] = Reflect.ownKeys(markets) as string[];\n    const tokenArr: string[] = Reflect.ownKeys(pairs) as string[];\n    return {\n      markets,\n      pairs,\n      tokenArr,\n      tokenArrStr: tokenArr.join(SEP),\n      marketArr,\n      marketArrStr: marketArr.join(SEP),\n      raw_data,\n    };\n  }\n\n  public async getCefiDepth<R>({\n    request,\n  }: {\n    request: {\n      market: string;\n      level: number;\n      limit?: number;\n    };\n  }): Promise<{\n    depth: loopring_defs.DepthData;\n    raw_data: R;\n  }> {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_CEFI_DEPTH,\n      queryParams: { ...request },\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const timestamp = raw_data[\"timestamp\"];\n\n    const { asks, bids, mid_price } = getMidPrice({\n      _asks: raw_data[\"asks\"],\n      _bids: raw_data[\"bids\"],\n    });\n\n    const depth: DepthData = {\n      symbol: raw_data.market,\n      version: parseInt(raw_data.version),\n      timestamp,\n      mid_price,\n      bids: bids.ab_arr,\n      bids_prices: bids.ab_prices,\n      bids_amtTotals: bids.ab_amtTotals,\n      bids_volTotals: bids.ab_volTotals,\n      bids_amtTotal: bids.amtTotal.toString(),\n      bids_volTotal: bids.volTotal.toString(),\n      asks: asks.ab_arr,\n      asks_prices: asks.ab_prices,\n      asks_amtTotals: asks.ab_amtTotals,\n      asks_volTotals: asks.ab_volTotals,\n      asks_amtTotal: asks.amtTotal.toString(),\n      asks_volTotal: asks.volTotal.toString(),\n    };\n\n    return {\n      depth,\n      raw_data,\n    };\n  }\n  public async getCefiOrders<R>({\n    request,\n    apiKey,\n  }: {\n    request: {\n      accountId: number;\n    };\n    apiKey: string;\n  }) {\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.GET_CEFI_ORDERS,\n      queryParams: { ...request },\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      list: raw_data.transactions,\n      totalNum: raw_data.totalNum,\n      raw_data,\n    };\n  }\n\n  public async sendCefiOrder({\n    request,\n    privateKey,\n    apiKey,\n  }: {\n    request: loopring_defs.OriginCEXV3OrderRequest;\n    privateKey: string;\n    apiKey: string;\n  }) {\n    const dataToSig: Map<string, any> = sortObjDictionary(request);\n    const reqParams: loopring_defs.ReqParams = {\n      url: LOOPRING_URLs.POST_CEFI_ORDER,\n      bodyParams: request,\n      apiKey,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: privateKey,\n      },\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return { raw_data, ...raw_data };\n  }\n}\n","/* eslint-disable camelcase  */\nimport { BaseAPI } from \"./base_api\";\nimport {\n  ReqParams,\n  ReqMethod,\n  SIG_FLAG,\n  LOOPRING_URLs,\n  RESULT_INFO,\n  ConnectorNames,\n  SigSuffix,\n  NFTTokenInfo,\n  UserNFTBalanceInfo,\n} from \"../defs\";\nimport * as loopring_defs from \"../defs/loopring_defs\";\nimport { sortObjDictionary } from \"../utils\";\nimport * as sign_tools from \"./sign/sign_tools\";\nimport { isContract } from \"./contract_api\";\nimport { AxiosResponse } from \"axios\";\nimport { get_EddsaSig_NFT_Transfer } from \"./sign/sign_tools\";\n\nexport class LuckTokenAPI extends BaseAPI {\n  public async getLuckTokenAgents<R>(): Promise<{\n    raw_data: R;\n    luckTokenAgents: { [key: string]: loopring_defs.LuckyTokenInfo };\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_LUCK_TOKEN_AGENTS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const luckTokenAgents = raw_data.reduce(\n      (\n        prev: { [key: string]: loopring_defs.LuckyTokenInfo },\n        item: { owner: string; infos: any[] }\n      ) => {\n        prev[item.owner] = {\n          signer: item.infos[0],\n          signerUrl: item.infos[1],\n          logoUrl: item.infos[2],\n          memo: item.infos[3],\n        };\n        return prev;\n      },\n      {} as { [key: string]: loopring_defs.LuckyTokenInfo }\n    );\n    return {\n      raw_data,\n      luckTokenAgents,\n    };\n  }\n\n  public async getLuckTokenAuthorizedSigners<R>(): Promise<{\n    raw_data: R;\n    luckTokenAgents: { [key: string]: loopring_defs.LuckyTokenInfo };\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_LUCK_TOKEN_AUTHORIZEDSIGNERS,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const luckTokenAgents = raw_data.reduce(\n      (\n        prev: { [key: string]: loopring_defs.LuckyTokenInfo },\n        item: { owner: string; infos: any[] }\n      ) => {\n        prev[item.owner] = {\n          signer: item.infos[0],\n          signerUrl: item.infos[1],\n          logoUrl: item.infos[2],\n          memo: item.infos[3],\n        };\n        return prev;\n      },\n      {} as { [key: string]: loopring_defs.LuckyTokenInfo }\n    );\n    return {\n      raw_data,\n      luckTokenAgents,\n    };\n  }\n  public async getLuckTokenClaimHistory<R>(\n    request: { fromId: number; limit?: number; isNft?: boolean },\n    apiKey: string\n  ): Promise<{\n    totalNum: number;\n    list: loopring_defs.LuckTokenHistory[];\n    raw_data: R;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_LUCK_TOKEN_CLAIMHISTORY,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const totalNum: number = raw_data.totalNum;\n    const list: loopring_defs.LuckTokenHistory[] = raw_data.list;\n\n    return {\n      totalNum,\n      list,\n      raw_data,\n    };\n  }\n\n  public async getLuckTokenLuckyTokens<R>(\n    request: {\n      senderId: number;\n      hash: string;\n      partitions: string;\n      modes: string;\n      scopes: string;\n      statuses: string;\n      startTime: number;\n      endTime: number;\n      fromId: number;\n      limit?: number;\n      official: boolean;\n      isNft?: boolean;\n    },\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    list: loopring_defs.LuckyTokenItemForReceive[];\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_LUCK_TOKEN_LUCKYTOKENS,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    const totalNum: number = raw_data.totalNum;\n    const list: loopring_defs.LuckyTokenItemForReceive[] = raw_data.list;\n\n    return {\n      totalNum,\n      list,\n      raw_data,\n    };\n  }\n  public async getLuckTokenDetail<R>(\n    request: {\n      limit?: number;\n      hash: string;\n      fromId?: number;\n      accountId?: number;\n    },\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    detail: loopring_defs.LuckTokenClaimDetail;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_LUCK_TOKEN_LUCKYTOKENDETAIL,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return { raw_data, detail: raw_data };\n  }\n  \n  public async getBlindBoxDetail<R>(\n    request: {\n      limit?: number;\n      hash: string;\n      fromId?: number;\n      showHelper: boolean;\n      accountId?: number;\n    },\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    // detail: loopring_defs.LuckTokenClaimDetail;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_LUCK_TOKEN_BLINDBOXDETAIL,\n      queryParams: request,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return { raw_data };\n  }\n\n  \n\n  public async getLuckTokenWithdrawals<R>(\n    request: {\n      statuses: loopring_defs.LuckyTokenWithdrawStatus[];\n      tokenId?: number;\n      startTime?: number;\n      endTime?: number;\n      fromId?: number;\n      offset?: number;\n      limit?: number;\n      isNft?: boolean;\n    },\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    luckTokenWithdraw: loopring_defs.LuckTokenWithdraw[];\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_LUCK_TOKEN_WITHDRAWALS,\n      queryParams: { ...request, statuses: request.statuses.join(\",\") },\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n      totalNum: raw_data?.totalNum,\n      luckTokenWithdraw: raw_data.list,\n    };\n  }\n  public async getLuckTokenBalances<R>(\n    request: {\n      accountId: number;\n      tokens?: number[];\n      isNft?: boolean;\n      offset?: number;\n      limit?: number;\n    },\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    tokenBalance: Array<\n      loopring_defs.UserBalanceInfo & {\n        isNft?: boolean;\n        nftTokenInfo?: loopring_defs.NFTTokenInfo;\n      }\n    >;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_LUCK_TOKEN_BALANCES,\n      queryParams: { \n        ...request, \n        // statuses: request.tokens?.join(\",\") \n      },\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n      totalNum: raw_data?.length,\n      tokenBalance: raw_data,\n    };\n  }\n  public async getLuckTokenClaimedLuckyTokens<R>(\n    request: {\n      fromId: number;\n      limit?: number;\n      hashes?: string[];\n      isNft?: boolean;\n    },\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    claimedHistory: Array<\n      loopring_defs.LuckyTokenItemForReceive & { id: number }\n    >;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_LUCK_TOKEN_CLAIMEDLUCKYTOKENS,\n      queryParams: { ...request, hashes: request?.hashes?.join(\",\") },\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n      totalNum: raw_data?.totalNum,\n      claimedHistory: raw_data.list,\n    };\n  }\n\n  public async getLuckTokenSummary<R>(apiKey: string): Promise<{\n    raw_data: R;\n    tokenSummaryList: {\n      tokenId: number;\n      amount: string;\n      isNft?: Boolean;\n      nftTokenInfo?: NFTTokenInfo & Partial<UserNFTBalanceInfo>;\n    }[];\n    totalNum: number;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_LUCK_TOKEN_SUMMARY,\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n      totalNum: raw_data.count,\n      tokenSummaryList: raw_data.tokenSummaryList,\n    };\n  }\n\n  public async sendLuckTokenClaimLuckyToken<R>({\n    request,\n    apiKey,\n    eddsaKey,\n  }: {\n    request: {\n      hash: string;\n      claimer: string;\n      referrer: string;\n    };\n    eddsaKey: string;\n    apiKey: string;\n  }): Promise<{\n    raw_data: R;\n  }> {\n    const dataToSig: Map<string, any> = sortObjDictionary(request);\n\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.POST_LUCK_TOKEN_CLAIMLUCKYTOKEN,\n      bodyParams: request,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n      apiKey,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return { raw_data, ...raw_data };\n  }\n  public async sendLuckTokenClaimBlindBox<R>({\n    request,\n    apiKey,\n    eddsaKey,\n  }: {\n    request: {\n      hash: string;\n      claimer: string;\n      referrer: string;\n    };\n    eddsaKey: string;\n    apiKey: string;\n  }): Promise<{\n    raw_data: R;\n  }> {\n    const dataToSig: Map<string, any> = sortObjDictionary(request);\n\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.POST_LUCK_TOKEN_CLAIMBLINDBOX,\n      bodyParams: request,\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.EDDSA_SIG,\n      sigObj: {\n        dataToSig,\n        PrivateKey: eddsaKey,\n      },\n      apiKey,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return { raw_data, ...raw_data };\n  }\n  public async sendLuckTokenWithdraws<T>(\n    req: loopring_defs.OriginLuckTokenWithdrawsRequestV3WithPatch,\n    options?: { accountId?: number; counterFactualInfo?: any }\n  ): Promise<loopring_defs.TX_HASH_RESULT<T> | RESULT_INFO> {\n    let {\n      request,\n      web3,\n      chainId,\n      walletType,\n      eddsaKey,\n      apiKey,\n      isHWAddr: isHWAddrOld,\n    } = req;\n    const { accountId, counterFactualInfo }: any = options;\n\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n    let { transfer } = request;\n    transfer.payeeId = 0;\n    transfer.memo = `LuckTokenWithdrawalBy${request.claimer}`;\n    transfer.maxFee = {\n      volume: \"0\",\n      tokenId: 0,\n    };\n\n    const sigHW = async () => {\n      const result = await sign_tools.signTransferWithoutDataStructure(\n        web3,\n        transfer.payerAddr,\n        transfer as loopring_defs.OriginTransferRequestV3,\n        chainId,\n        walletType,\n        accountId,\n        counterFactualInfo\n      );\n      ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n    };\n    if (\n      walletType === ConnectorNames.MetaMask ||\n      walletType === ConnectorNames.Gamestop ||\n      walletType === ConnectorNames.OtherExtension\n    ) {\n      // myLog(\"submitDeployNFT iConnectorNames.MetaMask:\", walletType);\n      try {\n        if (isHWAddr) {\n          await sigHW();\n        } else {\n          // myLog(\"submitDeployNFT notHWAddr:\", isHWAddr);\n          const result = await sign_tools.signTransferWithDataStructure(\n            web3,\n            transfer.payerAddr,\n            transfer as loopring_defs.OriginTransferRequestV3,\n            chainId,\n            walletType,\n            accountId,\n            counterFactualInfo\n          );\n          ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    } else {\n      const isContractCheck = await isContract(web3, transfer.payerAddr);\n      try {\n        if (isContractCheck) {\n          const result =\n            await sign_tools.signTransferWithDataStructureForContract(\n              web3,\n              transfer.payerAddr,\n              transfer as loopring_defs.OriginTransferRequestV3,\n              chainId,\n              accountId\n            );\n          ecdsaSignature = result.ecdsaSig;\n        } else if (counterFactualInfo) {\n          const result =\n            await sign_tools.signTransferWithDataStructureForContract(\n              web3,\n              transfer.payerAddr,\n              transfer as loopring_defs.OriginTransferRequestV3,\n              chainId,\n              accountId,\n              counterFactualInfo\n            );\n          ecdsaSignature = result.ecdsaSig;\n          // myLog(\"Transfer ecdsaSignature:\", ecdsaSignature);\n        } else {\n          await sigHW();\n        }\n      } catch (err) {\n        throw {\n          ...this.genErr(err as any),\n        };\n      }\n    }\n\n    if (counterFactualInfo) {\n      transfer.counterFactualInfo = counterFactualInfo;\n    }\n    let { maxFee, token, ..._transfer } = transfer;\n    // @ts-ignore\n    _transfer = {\n      ..._transfer,\n      maxFeeAmount: maxFee.volume,\n      feeToken: maxFee.tokenId,\n      amount: token.volume,\n      token: token.tokenId,\n      ecdsaAuth: ecdsaSignature,\n      eddsaSig: sign_tools.get_EddsaSig_Transfer(\n        transfer as loopring_defs.OriginTransferRequestV3,\n        eddsaKey\n      ).result,\n    } as any;\n\n    request = {\n      ...request,\n      transfer: JSON.stringify(_transfer) as any,\n    };\n\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.POST_LUCK_TOKEN_WITHDRAWALS,\n      apiKey,\n      method: ReqMethod.POST,\n      bodyParams: { ...request },\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n    let raw_data;\n    try {\n      raw_data = (await this.makeReq().request(reqParams)).data;\n    } catch (error) {\n      throw error as AxiosResponse;\n    }\n    return this.returnTxHash(raw_data);\n  }\n\n  public async sendLuckTokenSend<\n    R = {\n      hash: string;\n      status: string;\n      isIdempotent: boolean;\n      accountId: number;\n      tokenId: number;\n      storageId: number;\n    }\n  >(\n    req: loopring_defs.OriginLuckTokenSendRequestV3WithPatch,\n    options?: { accountId?: number; counterFactualInfo?: any }\n  ): Promise<loopring_defs.TX_HASH_RESULT<R> | RESULT_INFO> {\n    let {\n      request,\n      web3,\n      chainId,\n      walletType,\n      eddsaKey,\n      apiKey,\n      isHWAddr: isHWAddrOld,\n    } = req;\n\n    const { accountId, counterFactualInfo }: any = options;\n\n    const isHWAddr = !!isHWAddrOld;\n    let ecdsaSignature = undefined;\n\n    const {\n      luckyToken: { maxFeeAmount, token, amount, feeToken, ...rest },\n      // @ts-ignore\n      nftData,\n    } = request;\n\n    try {\n      let transfer: any, eddsaSig;\n      if (nftData) {\n        transfer = {\n          ...rest,\n          fromAccountId: rest.payerId,\n          fromAddress: rest.payerAddr,\n          toAccountId: 0,\n          toAddress: rest.payeeAddr,\n          maxFee: {\n            tokenId: feeToken,\n            amount: maxFeeAmount,\n          },\n          payeeId: 0,\n          memo: `LuckTokenSendBy${accountId}`,\n          token: {\n            nftData,\n            tokenId: token,\n            amount: amount,\n          },\n        } as loopring_defs.OriginNFTTransferRequestV3;\n        const sigHW = async () => {\n          const result = await sign_tools.signNFTTransferWithoutDataStructure(\n            web3,\n            transfer.payerAddr,\n            transfer,\n            chainId,\n            walletType,\n            accountId,\n            counterFactualInfo\n          );\n          ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n        };\n\n        if (\n          walletType === ConnectorNames.MetaMask ||\n          walletType === ConnectorNames.Gamestop ||\n          walletType === ConnectorNames.OtherExtension\n        ) {\n          try {\n            if (isHWAddr) {\n              await sigHW();\n            } else {\n              const result = await sign_tools.signTNFTransferWithDataStructure(\n                web3,\n                transfer.payerAddr,\n                transfer,\n                chainId,\n                walletType,\n                accountId,\n                counterFactualInfo\n              );\n              ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n            }\n          } catch (err) {\n            throw {\n              ...this.genErr(err as any),\n            };\n          }\n        } else {\n          const isContractCheck = await isContract(web3, transfer.payerAddr);\n          try {\n            if (isContractCheck) {\n              // signOffchainWithdrawWithDataStructureForContract\n              const result =\n                await sign_tools.signNFTTransferWithDataStructureForContract(\n                  web3,\n                  transfer.payerAddr,\n                  transfer,\n                  chainId,\n                  accountId\n                );\n              ecdsaSignature = result.ecdsaSig;\n            } else if (counterFactualInfo) {\n              const result =\n                await sign_tools.signNFTTransferWithDataStructureForContract(\n                  web3,\n                  transfer.payerAddr,\n                  transfer,\n                  chainId,\n                  accountId,\n                  counterFactualInfo\n                );\n              ecdsaSignature = result.ecdsaSig;\n              // myLog(\"NFTransfer ecdsaSignature:\", ecdsaSignature);\n            } else {\n              await sigHW();\n            }\n          } catch (err) {\n            throw {\n              ...this.genErr(err as any),\n            };\n          }\n        }\n        eddsaSig = get_EddsaSig_NFT_Transfer(transfer, eddsaKey).result;\n      } else {\n        transfer = {\n          ...rest,\n          maxFee: {\n            tokenId: feeToken,\n            volume: maxFeeAmount,\n          },\n          payeeId: 0,\n          memo: `LuckTokenSendBy${accountId}`,\n          token: {\n            tokenId: token,\n            volume: amount,\n          },\n        } as loopring_defs.OriginTransferRequestV3;\n        const sigHW = async () => {\n          const result = await sign_tools.signTransferWithoutDataStructure(\n            web3,\n            transfer.payerAddr,\n            transfer as loopring_defs.OriginTransferRequestV3,\n            chainId,\n            walletType,\n            accountId,\n            counterFactualInfo\n          );\n          ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix03;\n        };\n        if (\n          walletType === ConnectorNames.MetaMask ||\n          walletType === ConnectorNames.Gamestop ||\n          walletType === ConnectorNames.OtherExtension\n        ) {\n          // myLog(\"submitDeployNFT iConnectorNames.MetaMask:\", walletType);\n          try {\n            if (isHWAddr) {\n              await sigHW();\n            } else {\n              // myLog(\"submitDeployNFT notHWAddr:\", isHWAddr);\n              const result = await sign_tools.signTransferWithDataStructure(\n                web3,\n                transfer.payerAddr,\n                transfer as loopring_defs.OriginTransferRequestV3,\n                chainId,\n                walletType,\n                accountId,\n                counterFactualInfo\n              );\n              ecdsaSignature = result.ecdsaSig + SigSuffix.Suffix02;\n            }\n          } catch (err) {\n            throw {\n              ...this.genErr(err as any),\n            };\n          }\n        } else {\n          const isContractCheck = await isContract(web3, transfer.payerAddr);\n          try {\n            if (isContractCheck) {\n              const result =\n                await sign_tools.signTransferWithDataStructureForContract(\n                  web3,\n                  transfer.payerAddr,\n                  transfer as loopring_defs.OriginTransferRequestV3,\n                  chainId,\n                  accountId\n                );\n              ecdsaSignature = result.ecdsaSig;\n            } else if (counterFactualInfo) {\n              const result =\n                await sign_tools.signTransferWithDataStructureForContract(\n                  web3,\n                  transfer.payerAddr,\n                  transfer as loopring_defs.OriginTransferRequestV3,\n                  chainId,\n                  accountId,\n                  counterFactualInfo\n                );\n              ecdsaSignature = result.ecdsaSig;\n              // myLog(\"Transfer ecdsaSignature:\", ecdsaSignature);\n            } else {\n              await sigHW();\n            }\n          } catch (err) {\n            throw {\n              ...this.genErr(err as any),\n            };\n          }\n        }\n\n        if (counterFactualInfo) {\n          transfer.counterFactualInfo = counterFactualInfo;\n        }\n        transfer.eddsaSignature = sign_tools.get_EddsaSig_Transfer(\n          transfer as loopring_defs.OriginTransferRequestV3,\n          eddsaKey\n        ).result;\n        eddsaSig = sign_tools.get_EddsaSig_Transfer(transfer, eddsaKey).result;\n      }\n\n      request = {\n        ...request,\n        nftData,\n        luckyToken: {\n          ...request.luckyToken,\n          payeeId: 0,\n          memo: `LuckTokenSendBy${accountId}`,\n          eddsaSig,\n        },\n      };\n      const reqParams: loopring_defs.ReqParams = {\n        url: LOOPRING_URLs.POST_LUCK_TOKEN_SENDLUCKYTOKEN,\n        bodyParams: { ...request },\n        apiKey,\n        method: ReqMethod.POST,\n        sigFlag: SIG_FLAG.NO_SIG,\n        ecdsaSignature,\n      };\n      let raw_data;\n      try {\n        raw_data = (await this.makeReq().request(reqParams)).data;\n      } catch (error) {\n        throw error as AxiosResponse;\n      }\n      return this.returnTxHash(raw_data);\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  public async getLuckTokenClaimedBlindBox<R>(\n    request: {\n      fromId: number;\n      limit?: number;\n      isNft?: boolean;\n      offset?: number;\n      statuses?: number[]\n    },\n    apiKey: string\n  ): Promise<{\n    raw_data: R;\n    totalNum: number;\n    list: Array<\n      loopring_defs.LuckyTokenBlindBoxItemReceive & { id: number }\n    >;\n  }> {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_LUCK_TOKEN_CLAIMEDBLINDBOX,\n      queryParams: { ...request, statuses: request?.statuses?.join(\",\") },\n      apiKey,\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    if (raw_data?.resultInfo) {\n      return {\n        ...raw_data?.resultInfo,\n      };\n    }\n    return {\n      raw_data,\n      totalNum: raw_data?.totalNum,\n      list: raw_data.list,\n    };\n  }\n}\n","/* eslint-disable camelcase  */\nimport { BaseAPI } from \"./base_api\";\n\nimport {\n  CreateContactRequest,\n  DeleteContactRequest,\n  GetContactsRequest,\n  GetContactsResponse,\n  LOOPRING_URLs,\n  ReqMethod,\n  ReqParams,\n  SIG_FLAG,\n  UpdateContactRequest,\n} from \"../defs\";\n\nexport class ContactAPI extends BaseAPI {\n\n  public async getContacts(\n    request: GetContactsRequest,\n    apiKey: string,\n    // url: string = LOOPRING_URLs.GET_CONTACTS\n  ) {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.GET_CONTACTS,\n      queryParams: request, //request\n      method: ReqMethod.GET,\n      sigFlag: SIG_FLAG.NO_SIG,\n      apiKey\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    console.log(raw_data)\n    return raw_data as GetContactsResponse\n  }\n\n  public async createContact(\n    request: CreateContactRequest,\n    apiKey: string,\n  ) {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.CREATE_CONTACT,\n      bodyParams: request, //request\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n      apiKey,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    return raw_data as boolean  \n  }\n\n  public async updateContact(\n    request: UpdateContactRequest,\n    apiKey: string,\n  ) {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.UPDATE_CONTACT,\n      bodyParams: request, //request\n      method: ReqMethod.POST,\n      sigFlag: SIG_FLAG.NO_SIG,\n      apiKey,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    return raw_data as boolean  \n  }\n  public async deleteContact(\n    request: DeleteContactRequest,\n    apiKey: string,\n    // url: string = LOOPRING_URLs.GET_CONTACTS\n  ) {\n    const reqParams: ReqParams = {\n      url: LOOPRING_URLs.DELETE_CONTACT,\n      bodyParams: request, //request\n      method: ReqMethod.DELETE,\n      sigFlag: SIG_FLAG.NO_SIG,\n      apiKey,\n    };\n\n    const raw_data = (await this.makeReq().request(reqParams)).data;\n    return raw_data as boolean\n  }\n\n}\n\n// ContactAPI.get","/* eslint-disable no-console  */\nexport const dumpError400 = (reason: any, src = \"\") => {\n  if (src) {\n    console.debug(\"src:\", src);\n  }\n  if (reason?.response) {\n    console.error(reason.response.data);\n  } else {\n    console.error(reason.message);\n  }\n};\n\nexport function sleep(milliseconds: number) {\n  return new Promise((resolve) => setTimeout(resolve, milliseconds));\n}\n"],"names":["specialSymbols","getBaseQuote","symbol","base","undefined","quote","startsWith","substr","length","i","ind","indexOf","lastIndexOf","ChainId","ConnectorNames","SigSuffix","getTokenInfoBySymbol","tokenSymbolMap","err","hasMarket","marketArr","market","includes","getExistedMarket","baseShow","quoteShow","amm","NFTFactory","MAINNET","GOERLI","NFTFactory_Collection","WsOps","WsTopicType","LOOPRING_URLs","HEBAO_LOCK_STATUS","HEBAO_META_TYPE","getOrderBookArg","topic","obj","orderbook","level","count","snapshot","showOverlap","Object","keys","forEach","key","ReqMethod","MarketStatus","VipCatergory","TradeChannel","OrderType","OrderTypeResp","Currency","OffchainFeeReqType","OffchainNFTFeeReqType","TradingInterval","TxStatus","OrderStatus","Side","WithdrawalTypes","UserTxTypes","UserBillTypes","UserNFTTxTypes","TransferType","BillType","FilledType","TxType","TxNFTType","AmmTxType","SortOrder","RuleType","AmmPoolActivityStatus","SIG_FLAG","AssetType","IntervalType","NetworkWallet","DefiMarketStatus","AMMtxTypes","OrderMakerType","TradesFillTypes","LegacyNFT","DEPLOYMENT_STATUS","NFT_IMAGE_SIZES","DefiAction","NFT_PREFERENCE_TYPE","DUAL_TYPE","LABEL_INVESTMENT_STATUS","SETTLEMENT_STATUS","LuckyTokenItemStatusIndex","LuckyTokenWithdrawStatus","LuckyTokenItemStatus","LuckyTokenAmountType","LuckyTokenViewType","LuckyTokenClaimType","ClaimRecordStatus","BlindBoxStatus","StakeStatus","StakeTransactionType","AddressType","LoopringErrorCode","ConnectorError","SoursURL","SigPatchField","IsMobile","Android","navigator","userAgent","match","BlackBerry","iOS","Opera","Windows","Ethereum","window","ethereum","_window2","isImToken","any","global","console","log","addHexPrefix","input","Error","toBuffer","mixed","Buffer","ethUtil","toHex","BigNumber","BN","toString","Uint8Array","RegExp","test","toNumber","Number","toBig","toBN","fromGWEI","value","times","toFixed","clearHexPrefix","slice","number","precision","ceil","Math","floor","formatEddsaKey","hexKey","String","padStart","sortObjDictionary","dataToSig","Map","Reflect","ownKeys","sort","a","b","localeCompare","set","makeMarket","raw_data","coinMap","totalCoinMap","addressIndex","idIndex","tokensMap","Array","item","isLpToken","coinInfo","icon","address","name","simpleName","description","type","company","toLowerCase","tokenId","makeAmmPool","ammpools","pairs","pools","ind2","substring","tokenList","tokens","pooled","makeMarkets","url","GET_MARKETS","markets","isMix","GET_MIX_MARKETS","marketInfo","baseTokenId","enabled","orderbookAggLevels","precisionForPrice","quoteTokenId","status","isSwapEnabled","ALL","AMM","createdAt","parseInt","tokenArr","tokenArrStr","join","marketArrStr","config","EXPONENTIAL_AT","RANGE","ROUNDING_MODE","myLog","_window","___OhTrustDebugger___","message","BIG0","fm","BIG1","BIG10","BIG10K","getToken","token","fromWEI","valueInWEI","tokenInfo","precisionToFixed","div","decimals","toWEI","rm","bigN","isEmpty","trim","getAmountOutWithFeeBips","amountIn","feeBips","reserveIn","reserveOut","amountInBig","reserveInBig","reserveOutBig","lt","feeBipsBig","amountInWithFee","minus","numerator","denominator","plus","getOutputOrderbook","baseToken","quoteToken","isAtoB","isReverse","depth","output","remain","bids","pow","asks","abInfo","consume","gte","vol","lte","amtValue","amt","eq","ratio","volValue","getReserveInfo","sell","buy","tokenMap","marketMap","ammPoolSnapshot","sellToken","buyToken","coinA","_ammPoolSnapshot","coinB","_ammPoolSnapshot2","volume","getPriceImpactStr","curPrice","toPrice","toPriceBig","percent","abs","getCurPrice","getToPrice","amountS","amountB","amountSBig","amountBBig","getPriceImpact","takerFee","updatePriceImpact_new","reverseIn","reverseOut","sellDecimal","amountBOut","buyDecimal","isReversed","exceedDepth","priceImpact","mid_price","coinADecimal","coinBDecimal","getMinReceived","minimumDecimal","slipBips","minReceived","minReceivedVal","ammPoolCalc","rawVal","coinA_Vol_BIG","coinB_Vol_BIG","runtime","exports","Op","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","defineProperty","enumerable","configurable","writable","wrap","innerFn","outerFn","self","tryLocsList","generator","create","Generator","context","Context","_invoke","state","method","arg","done","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","then","unwrapped","error","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","globalThis","Function","field","from","FQ","n","field_modulus","SNARK_SCALAR_FIELD","m","mod","add","other","mul","sub","on","on_c","m_c","two_c","on_power_c","modulo","one","modulus","zero","p","n_","BigInteger","p_","m_","modPow","jubjub","GetEcDSASigType","Point","x","y","generate","xBigInt","yBigInt","scaler","infinity","and","copyP1","copyP2","u1","v1","u2","v2","u3_tmp0","u3_tmp1","JUBJUB_D","u3_tmp2","u3","v3_tmp0","v3_tmp1","JUBJUB_A","v3_tmp3","v3_tmp5","blake2b","require","PoseidonParams","t","nRoundsF","nRoundsP","seed","e","constants_C","constants_M","security_target","permunation","poseidon_constants","poseidon_matrix","H","TextEncoder","encode","buf","alloc","update","final","items","toJSON","data","sum","tmp","H_Bigint","SignatureScheme","to_bytes","c","seedBigInt","matrix","row","j","c_i","p_c","c_t_j_p","item_c","poseidon_sbox","params","half_F","poseidon_mix","M","newState","poseidon","inputs","concat","C_i","index","Signature","R","s","toStr","SignedMessage","A","sig","msg","bitIntDataItems","bn","hex","BigInt","len","u8","bnToBuf","more","prehash_message","hash_secret_python","k","sha512StrItems","byteArray0","byteArray1","digest1","sha512","array","buffer","st","sha512MessageHexStr","JUBJUB_L","B","sign","copyKey","r","copy_r","hash_public","key_n_t","S","JUBJUB_E","signatureResult","as_scalar","point","inputMsg","babyJub","packPoint","P0","P1","packed","bytes","strItems","bytesToHexString","aa","bb","half","gt","EDDSAUtil","PrivateKey","hash","strKey","signed","formatted","toHexString","hexString","generateKeyPair","bigInt","itemBigInt","secretKey","copySecretKey","publicKey","pack","publicKeyX","publicKeyY","generatePrivateKey","seedBuff","outputLength","bnToBufWithFixedLength","keyPair","formatedPx","formatedPy","sk","counterFactualInfo","web3","walletType","keySeed","chainId","accountId","isMobile","personalSign","split","end","splice","newValue","genSigWithPadding","signature","signatureRx_Hex","Rx","fill","signatureRy_Hex","Ry","signatureS_Hex","getEdDSASig","basePath","api_url","requestInfo","jsonTxt","toUpperCase","request","arrObj","orderedMap","map","paramlist","fromEntries","get","encodeURIComponent","replace","makeRequestParamStr","JSON","stringify","escape","_hash","sha256","toFormat","getEdDSASigWithPoseidon","bigIntInputs","poseidonParams","account","currentProvider","sendAsync","response","signEip712WalletConnect","typedData","_web3$currentProvider2","send","getEcDSASig","pwd","msgParams","HasDataStruct","WithoutDataStruct","Contract","ecdsaSig","sigUtil","_signature","signEip712Result","convertPublicKey2","pk","getUpdateAccountEcdsaTypedData","owner","accountID","feeTokenID","maxFee","validUntil","nonce","types","EIP712Domain","AccountUpdate","primaryType","domain","version","verifyingContract","exchange","signUpdateAccountWithDataStructure","bodyParams","Unknown","signUpdateAccountWithoutDataStructure","signUpdateAccountWithDataStructureForContract","get_EddsaSig_OffChainWithdraw","eddsaKey","orderHashStr","abi","minGas","to","extraData","storageId","getWithdrawTypedData","Withdrawal","tokenID","amount","storageID","signOffchainWithdrawWithDataStructure","signOffchainWithdrawWithoutDataStructure","signOffchainWithdrawWithDataStructureForContract","get_EddsaSig_NFT_Withdraw","getNftData","nftIdLo","nftIdHi","idNo0x","nftId","minterAddress","nftType","tokenAddress","royaltyPercentage","getNFTMintTypedData","utils","hexToNumberString","toAccountId","nftAddress","Mint","getNFTWithdrawTypedData","signNFTWithdrawWithDataStructure","signNFTWithdrawWithoutDataStructure","signNFTWithdrawWithDataStructureForContract","get_EddsaSig_NFT_Mint","minterId","get_EddsaSig_NFT_Order","fillAmountBOrS","nftData","maxFeeBips","taker","signNFTMintWithDataStructure","signNFTMintWithoutDataStructure","signNFTMintWithDataStructureForContract","get_EddsaSig_Transfer","payerId","payeeId","payeeAddr","getTransferTypedData","Transfer","payerAddr","signTransferWithDataStructure","signTransferWithoutDataStructure","signTransferWithDataStructureForContract","get_EddsaSig_NFT_Transfer","fromAccountId","toAddress","getNFTTransferTypedData","fromAddress","signTNFTransferWithDataStructure","signNFTTransferWithoutDataStructure","signNFTTransferWithDataStructureForContract","eddsaSign","sigHash","idiv","eddsaSig","eddsaSignWithDomain","domainHax","parts","hashStruct","getAmmJoinEcdsaTypedData","patch","PoolJoin","ammName","poolAddress","joinAmounts","joinTokens","joinStorageIDs","storageIds","mintMinAmount","minimumLp","fee","get_EddsaSig_JoinAmmPool","domainSeparator","getAmmExitEcdsaTypedData","PoolExit","burnAmount","exitTokens","burned","burnStorageID","exitMinAmounts","unPooled","get_EddsaSig_ExitAmmPool","sortObject","o","reduce","setSearchParams","searchParams","URLSearchParams","search","objects","objectTmp","Request","baseUrl","timeout","baseOptions","baseURL","headers","feeVersion","pf","validateStatus","insecure","_axios","axios","getIns","options","localUrl","URL","localVarRequestOptions","queryParams","urlPathStr","pathname","apiKey","sigObj","_params$sigObj","sigFlag","NO_SIG","_params$sigObj2","EDDSA_SIG_POSEIDON","EDDSA_SIG","_params$sigObj3","_params$sigObj4","_params$sigObj5","_params$sigObj6","ecdsaSignature","eddsaSignature","_params$sigObj7","sigPatch","_params$sigObj8","optInOne","updateOpt","reqOpt","interceptors","use","req","addApiKey","addSig","updateBaseUrl","handle400","callback","res","statusText","AbiFunction","outputs","constant","inputTypes","outputTypes","methodAbiHash","methodID","encodeInputs","abiInputs","parseInputs","rawEncode","decodeOutputs","parseOutputs","rawDecode","decodeEncodedInputs","encoded","funAbi","filter","abiFunctions","acc","methodHash","abiFunction","decodeEncodeInputs","methodId","ERC20Token","erc20Abi","ExchangeContract","exchange36Abi","ContractWallet","contractWalletAbi","ERC1155","erc1155Abi","ERC721","erc721Abi","HeBao","hebao","Contracts","KEY_MESSAGE","BaseAPI","param","baseUrlMap","setChainId","genErr","HTTP_ERROR","code","find","SKD_UNKNOW","returnTxHash","resultInfo","_raw_data$resultInfo2","getAvailableBroker","reqParams","GET_AVAILABLE_BROKER","GET","makeReq","getCounterFactualInfo","COUNTER_FACTUAL_INFO","getBaseUrlByChainId","setBaseUrl","ecRecover","eth","personal","contractWalletValidate32","hashPersonalMessage","ABI","_data","valid","mykeyWalletValid","_account","_index","fromRpcSig","keccak256","recAddress","pubToAddress","ecrecover","v","messageBuffer","totalHash","keccak","old_v","pub","recoveredAddress","id","fcWalletValid","fcValid","_window2$ethereum","isMetaMask","MetaMask","_window$ethereum2","isWalletLink","isConnected","api","walletOwner","_result","WsAPI","getWsKey","GET_WS_KEY","wsKey","checkAmt","rawStr","getFeeMap","feeArr","feesMap","genAB","ab_arr","amtTotal","volTotal","ab_prices","ab_amtTotals","ab_volTotals","price","parseFloat","best","getMidPrice","_asks","askReverse","bidReverse","_bids","ERC20Method","ExchangeAPI","getRelayerCurrentTime","GET_RELAYER_CURRENT_TIME","getProtocolPortrait","GET_PROTOCOL_PORTRAIT","getExchangeFeeInfo","GET_EXCHANGE_FEEINFO","orderbookTradingFeesStablecoin","ORDERBOOK_TRADING_FEES_STABLECOIN","orderbookTradingFees","ORDERBOOK_TRADING_FEES","ammTradingFees","AMM_TRADING_FEES","otherFees","OTHER_FEES","getWithdrawalAgents","GET_WITHDRAWAL_AGENTS","supportTokenMap","getRecommendedMarkets","GET_RECOMENDED_MARKETS","recommended","getMarkets","getMixMarkets","getTokens","GET_TOKENS","getEthBalances","GET_ETH_BALANCES","ethBalance","getTokenBalances","GET_TOKEN_BALANCES","tokenBalances","getAllTokenBalances","GET_AKK_TOKEN_BALANCES","getAllowances","GET_ALLOWANCES","tokenAllowances","allowances","getExchangeInfo","GET_EXCHANGE_INFO","exchangeInfo","ammExitFees","depositAddress","exchangeAddress","fastWithdrawalFees","onchainFees","openAccountFees","transferFees","updateFees","withdrawalFees","getMixDepth","getDepth","GET_MIX_DEPTH","GET_DEPTH","limit","timestamp","bids_prices","bids_amtTotals","bids_volTotals","bids_amtTotal","bids_volTotal","asks_prices","asks_amtTotals","asks_volTotals","asks_amtTotal","asks_volTotal","getMixTicker","getTicker","GET_MIX_TICKER","GET_TICKER","tickMap","tickList","tickers","arr","open","close","change","tick","base_token_volume","quote_token_volume","high","low","bid","ask","base_fee_amt","quote_fee_amt","getAllMixTickers","getAllTickers","getMixCandlestick","getCandlestick","GET_MIX_CANDLESTICK","GET_CANDLESTICK","tsStep","interval","min1","min5","min15","min30","hr1","hr2","hr4","hr12","d1","w1","candlesticks","rawCandlesticks","lastCandlestick","lastTs","curTs","candlestick","txs","baseVol","quoteVol","counter","getFiatPrice","GET_FIAT_PRICE","fiatPrices","prices","disableWithdrawTokenList","GET_IGNORE_WITHDRAW","getMarketTrades","GET_TRADES","marketTrades","trades","tradeTime","tradeId","side","totalNum","getAccount","ACCOUNT_ACTION","accInfo","getEthNonce","GET_ETH_NONCE","getGasPrice","GET_GAS_PRICE","gasPrice","getGasPriceRange","GET_GAS_PRICE_RANGE","gasPriceRanges","ranges","getAccountServices","GET_ACCOUNT_SERVICES","register","order","joinAmm","dAppTrade","legal","AmmpoolAPI","getAmmPoolConf","GET_AMM_POOLS_CONF","getAmmPoolUserRewards","GET_AMMPOOL_REWARDS","ammUserRewardMap","current","lastDay","getAmmPoolGameRank","GET_AMMPOOL_GAME_RANK","totalRewards","userRankList","getAmmPoolGameUserRank","GET_AMMPOOL_GAME_USER_RANK","userRank","getOrderList","lst","ASC","rangeFrom","getAmmPoolActivityRules","GET_AMM_ACTIVITY_RULES","activityInProgressRules","activityDateMap","groupByRuleType","groupByRuleTypeAndStatus","groupByActivityStatus","currentTs","Date","getTime","NotStarted","rangeTo","InProgress","EndOfGame","ruleType","getAmmAssetHistory","GET_AMM_ASSET_HISTORY","dataSeries","getAmmPoolStats","GET_AMM_POOL_STATS","ammPoolStats","getAmmPoolSnapshot","GET_AMM_POOLS_SNAPSHOT","getAmmPoolBalances","GET_AMM_POOLS_BALANCES","ammpoolsbalances","tempPooled","item2","pooledMap","poolName","getLiquidityMining","GET_LIQUIDITY_MINING","rewards","getLiquidityMiningUserHistory","GET_LIQUIDITY_MINING_USER_HISTORY","userMiningInfos","getUserAmmPoolTxs","GET_USER_AMM_POOL_TXS","userAmmPoolTxs","transactions","getAmmPoolTxs","GET_AMM_POOL_TXS","getAmmPoolTrades","GET_AMM_POOL_TRADE_TXS","ammPoolTrades","joinAmmPool","now","POST_JOIN_AMM_POOL","POST","sign_tools","joinAmmPoolResult","exitAmmPool","POST_EXIT_AMM_POOL","exitAmmPoolResult","ApproveVal","Zero","Max","checkWeb3","errorMsg","signEthereumTx","rawTx","ethTx","Transaction","fromSerializedTx","jsonTx","assign","addr","getTransactionCount","sendRawTx","gasLimit","sendByMetaMask","sendTransaction","_genContractData","genERC20Data","genExchangeData","approve","_value","Approve","_spender","valueC","Deposit","ForceWithdraw","tx","transactionHash","isContract","getCode","NFTType","NFT_TYPE_STRING","NFTMethod","UserAPI","updateUserApiKey","API_KEY_ACTION","getNextStorageId","GET_NEXT_STORAGE_ID","orderId","offchainId","getOrderDetails","ORDER_ACTION","orderDetail","getOrders","GET_MULTI_ORDERS","orders","submitOrder","orderRequest","privateKey","tradeChannel","MIXED","EddsaSignature","cancelOrder","orderHash","clientOrderId","DELETE","cancelMultiOrdersByHash","ORDER_CANCEL_HASH_LIST","cancelMultiOrdersByCreditOrderId","ORDER_CANCEL_CLIENT_ORDER_ID_LIST","getUserRegTxs","GET_USER_REG_TXS","userRegTxs","getUserPwdResetTxs","GET_PWD_RESET_TXS","userPwdResetTxs","getUserBalances","GET_USER_EXCHANGE_BALANCES","userBalances","getAssetLookRecords","GET_ASSET_LOCK_RECORDS","getUserDepositHistory","GET_USER_DEPOSITS_HISTORY","userDepositHistory","getUserOnchainWithdrawalHistory","WITHDRAWALS_ACTION","userOnchainWithdrawalHistory","getUserTransferList","GET_USER_TRANSFERS_LIST","userTransfers","getUserTxs","GET_USER_TXS","userTxs","getUserTrades","GET_USER_TRADE_HISTORY","userTrades","getUserFeeRate","GET_USER_FEE_RATE","userFreeRateMap","getUserOrderFeeRate","GET_USER_ORDER_FEE_RATE","feeRate","getMinimumTokenAmt","GET_MINIMUM_TOKEN_AMT","amountMap","amounts","tokenSymbol","cacheOverdueAt","getOffchainFeeAmt","GET_OFFCHAIN_FEE_AMT","fees","getNFTOffchainFeeAmt","GET_NFT_OFFCHAIN_FEE_AMT","submitNFTValidateOrder","POST_NFT_VALIDATE_ORDER","submitNFTTrade","maker","makerFeeBips","takerFeeBips","POST_NFT_TRADE","getUserOwenCollection","GET_NFT_COLLECTION","collections","collection","extends","getUserLegacyCollection","GET_NFT_LEGACY_COLLECTION","getUserNFTCollection","GET_NFT_COLLECTION_HASNFT","getUserNFTLegacyTokenAddress","GET_NFT_LEGACY_TOKENADDRESS","addresses","getUserNFTDepositHistory","GET_USER_NFT_DEPOSIT_HISTORY","userNFTDepositHistory","deposits","getUserNFTWithdrawalHistory","GET_USER_NFT_WITHDRAW_HISTORY","userNFTWithdrawalHistory","withdrawals","getUserNFTTransferHistory","GET_USER_NFT_TRANSFER_HISTORY","userNFTTransfers","transfers","getUserNFTMintHistory","GET_USER_NFT_MINT_HISTORY","userNFTMints","getUserNFTTransactionHistory","GET_USER_NFT_TRANSACTION_HISTORY","metadata","hashBN","userNFTTxs","getUserNFTTradeHistory","GET_USER_NFT_TRADE_HISTORY","SetReferrer","promotionCode","referrer","SET_REFERRER","getUserNFTBalances","GET_USER_NFT_BALANCES","userNFTBalances","getUserNFTBalancesByCollection","GET_USER_NFT_BALANCES_BY_COLLECTION","getUserNFTLegacyBalance","GET_NFT_LEGACY_BALANCE","getUserVIPAssets","GET_USER_VIP_ASSETS","vipAsset","getUserVIPInfo","GET_USER_VIP_INFO","vipInfo","created_at","validTo","valid_to","org","vipTag","vip_tag","unLockAccount","_raw_data","_raw_data2","NO_EDDSA_KEY","submitOffchainWithdraw","isHWAddr","sigHW","Suffix03","Gamestop","OtherExtension","Suffix02","isContractCheck","submitInternalTransfer","POST_INTERNAL_TRANSFER","submitForceWithdrawals","transfer","memo","requesterAddress","withdrawAddress","POST_FORCE_WITHDRAWALS","submitDeployNFT","GET_DEPLOY_TOKEN_ADDRESS","submitNFTInTransfer","POST_NFT_INTERNAL_TRANSFER","submitNFTWithdraw","POST_NFT_WITHDRAWALS","submitNFTMint","isHWAddrOld","_noEcdsa","counterFactualNftInfo","nftFactory","nftOwner","nftBaseUri","POST_NFT_MINT","submitNFTCollection","_req","POST_NFT_CREATE_COLLECTION","contractAddress","deleteNFTCollection","DELETE_NFT_CREATE_COLLECTION","submitNFTLegacyCollection","POST_NFT_CREATE_LEGACY_COLLECTION","submitEditNFTCollection","POST_NFT_EDIT_COLLECTION","submitUpdateNFTLegacyCollection","nftHashes","POST_NFT_LEGACY_UPDATE_COLLECTION","submitUpdateNFTGroup","POST_NFT_UPDATE_NFT_GROUP","submitDeployCollection","POST_DEPLOY_COLLECTION","updateAccount","getUserApiKey","_raw_data3","_raw_data4","getUserBills","GET_USER_BILLS","WalletAPI","getUserAssets","GET_USER_ASSETS","assetSeries","timestampSeries","dateSeries","createdAtStr","userAssets","getApproveRecoverTypedData","guardiaContractAddress","wallet","newOwner","recover","getApproveRecoverV2TypedData","newGuardians","rejectApproveHash","uri","REJECT_APPROVE_SIGNATURE","approveRecordId","signer","rejectHebao","signHash","signHebaoApproveWithoutDataStructure","guardian","messageHash","signHebaoApproveWithDataStructureForContract","masterCopy","forwarderModuleAddress","signedRequest","encodeAddressesPacked","addrs","addrsBs","repeat","submitApproveSignature","guardians","isContract1XAddress","_this","Coinbase","businessDataJson","guardiansBs","guardiansHash","SUBMIT_APPROVE_SIGNATURE","getAddressByENS","RESOLVE_ENS","getWalletType","GET_WALLET_TYPE","getContractType","GET_WALLET_CONTRACTVERSION","contractType","getWalletModules","GET_WALLET_MODULES","walletModule","getEnsByAddress","RESOLVE_NAME","ensName","lockHebaoWallet","isVersion1","getHebaoConfig","GET_HEBAO_CONFIG","sendMetaTx","SEND_META_TX","getGuardianApproveList","GET_GUARDIAN_APPROVE_LIST","guardiansArray","_raw_data$data","ens","metaTxType","approveId","txAwareHash","getProtectors","GET_PROTECTORS","protectorArray","protectEns","protectAddress","lockStatus","walletStatus","_p$walletStatus","getHebaoOperationLogs","GET_OPERATION_LOGS","operationArray","getUserTradeAmount","GET_USER_TRADE_AMOUNT","getTokenPrices","GET_TOKEN_PRICES","priceSeries","tokenPrices","getLatestTokenPrices","GET_LATEST_TOKEN_PRICES","WhitelistedUserAPI","CREATION_CODE","NFTAPI","callContractMethod","contract","_genContract","methods","_genERC1155Data","contracts","_genERC721Data","getNFTBalance","ownerOf","balanceOf","CONTRACTNFT_BALANCE","getInfoForNFTTokens","nftDatas","GET_NFTs_INFO","callRefreshNFT","POST_NFT_VALIDATE_REFRESH_NFT","getContractNFTMeta","_IPFS_META_URL","tokenURI","IPFS_META_URL","fetch","json","CONTRACTNFT_URI","approveNFT","approved","setApprovalForAll","operator","CONTRACTNFT_SET_APPROVE","ipfsCid0ToNftID","cidV0Str","cid","hashHex","multihash","ipfsNftIDToCid","CID","isApprovedForAll","CONTRACTNFT_IS_APPROVE","depositNFT","computeNFTAddress","saltBuf","codeHash","saltHash","rawBuf","getPublicCollectionById","GET_NFT_COLLECTION_PUBLISH","getCollectionWholeNFTs","GET_COLLECTION_WHOLE_NFTS","nftTokenInfos","GLOBAL_KEY","GlobalAPI","getActiveFeeInfo","_request","requestType","UPDATE_ACCOUNT","getUserBalanceForFee","getBanxaAPI","query","payload","GET_BANXA_API_KEY","DelegateAPI","GET_DELEGATE_GET_CODE","getIPFS","path","GET_DELEGATE_GET_IPFS","getCollectionDomain","DefiAPI","getDefiToken","GET_DEFI_TOKENS","getDefiMarkets","GET_DEFI_MARKETS","defiType","_request$defiType","_item$type","orderDefi","POST_DEFI_ORDER","getDefiReward","GET_DEFI_REWARDS","getDefiTransaction","GET_DEFI_TRANSACTIONS","userDefiTxs","getDualInfos","GET_DUAL_INFOS","dualInfo","infos","balance","rules","getDualBalance","GET_DUAL_BALANCE","dualBalanceMap","coin","getDualPrices","GET_DUAL_PRICES","getDualIndex","GET_DUAL_INDEX","dualPrice","getDualTransactions","GET_DUAL_TRANSACTIONS","userDualTxs","orderDual","POST_DUAL_ORDER","getDualUserLocked","lockTag","loopring_defs","DUAL_BASE","DUAL_CURRENCY","GET_DUAL_USER_LOCKED","lockRecord","sendStakeClaim","POST_STAKE_CLAIM","sendStakeRedeem","POST_STAKE_REDEEM","sendStake","POST_STAKE","getStakeProducts","GET_STAKE_PRODUCTS","products","getStakeSummary","GET_STAKE_SUMMARY","list","staking","getStakeTransactions","GET_STAKE_TRANSACTIONS","getCefiMarkets","GET_CEFI_MARKETS","cefiQuota","getCefiDepth","GET_CEFI_DEPTH","getCefiOrders","GET_CEFI_ORDERS","sendCefiOrder","POST_CEFI_ORDER","LuckTokenAPI","getLuckTokenAgents","GET_LUCK_TOKEN_AGENTS","luckTokenAgents","signerUrl","logoUrl","getLuckTokenAuthorizedSigners","GET_LUCK_TOKEN_AUTHORIZEDSIGNERS","getLuckTokenClaimHistory","GET_LUCK_TOKEN_CLAIMHISTORY","getLuckTokenLuckyTokens","GET_LUCK_TOKEN_LUCKYTOKENS","getLuckTokenDetail","GET_LUCK_TOKEN_LUCKYTOKENDETAIL","detail","getBlindBoxDetail","GET_LUCK_TOKEN_BLINDBOXDETAIL","getLuckTokenWithdrawals","GET_LUCK_TOKEN_WITHDRAWALS","statuses","luckTokenWithdraw","getLuckTokenBalances","GET_LUCK_TOKEN_BALANCES","tokenBalance","getLuckTokenClaimedLuckyTokens","GET_LUCK_TOKEN_CLAIMEDLUCKYTOKENS","hashes","_request$hashes","claimedHistory","getLuckTokenSummary","GET_LUCK_TOKEN_SUMMARY","tokenSummaryList","sendLuckTokenClaimLuckyToken","POST_LUCK_TOKEN_CLAIMLUCKYTOKEN","sendLuckTokenClaimBlindBox","POST_LUCK_TOKEN_CLAIMBLINDBOX","sendLuckTokenWithdraws","claimer","_transfer","maxFeeAmount","feeToken","ecdsaAuth","POST_LUCK_TOKEN_WITHDRAWALS","sendLuckTokenSend","luckyToken","rest","POST_LUCK_TOKEN_SENDLUCKYTOKEN","getLuckTokenClaimedBlindBox","GET_LUCK_TOKEN_CLAIMEDBLINDBOX","_request$statuses","ContactAPI","getContacts","GET_CONTACTS","createContact","CREATE_CONTACT","updateContact","UPDATE_CONTACT","deleteContact","DELETE_CONTACT","sellVol","buyVol","isJoin","isInputSell","sellAmount","buyAmount","feeVol","tokenSell","tokenBuy","buyTokenBalanceVol","sellPrice","depositPrice","withdrawPrice","dustToken","minVolBuy","max","orderAmounts","dust","miniSellVol","maxSellVol","reserveInfo","CEX_NO_PRODUCT","amountInWei","CEX_NO_DEPTH_ERROR","_amountB2","_amountS","lessEarnVol","lessEarnTokenSymbol","greaterEarnVol","greaterEarnTokenSymbol","maxSellAmount","feeTokenSymbol","quota","rule","dualMarket","currency","settleRatio","profit","ROUND_DOWN","dualType","strike","ROUND_CEIL","baseLimitAmount","baseMin","min","baseSize","_balance$base","free","baseMax","quoteLimitAmount","currencyMin","currencyMax","_maxSellAmount","errorInfo","isFirstTime","NOT_SUPPORT_ERROR","USER_DENIED","reason","src","debug","rpcSig","toRpcSig","ammpool","cefiOrderBook","orderWsRequest","settingsCurrency","mixorder","mixtrade","takerRate","amountBOutWithoutFee","sellAmt","buyAmt","leftRatio","amountSBint","amountOut","amountOutBig","getAmountInWithFeeBips","amountBOutSlip","ticker","tokenIdMap","ammBalance","tokenVol","reserve","trade","idIdx","slippageTolerance","lpTokenVol","lp","lpToken","quoteVolume","feeLp","feeLpWithSlippage","miniFeeLpWithSlippageVal","feeLpVal","RatioDecimal","miniLpVol","miniLpVal","minDecimal","burnedVol","volA","volB","volA_show","volB_show","coinAOffchainId","coinBOffchainId","rawValMatchForRawVal","volLp","milliseconds","setTimeout","num","places"],"mappings":"8bAEMA,EAAiB,CAAC,sBAERC,EAAaC,OACtBA,QACI,CACLC,UAAMC,EACNC,WAAOD,MAIPF,EAAOI,WAAW,UACpBJ,EAASA,EAAOK,OAAO,IAGrBP,EAAeQ,OAAS,MACrB,IAAIC,EAAI,EAAGA,EAAIT,EAAeQ,OAAQC,IAAK,KACxCC,EAAMR,EAAOS,QAAQX,EAAeS,OACtCC,GAAO,SACG,IAARA,EACK,CACLP,KAAMH,EAAeS,GACrBJ,MAAOH,EAAOK,OAAOL,EAAOU,YAAY,KAAO,IAG1C,CACLT,KAAMD,EAAOK,OAAO,EAAGL,EAAOS,QAAQ,MACtCN,MAAOL,EAAeS,UAUzB,CACLN,KAJWD,EAAOK,OAAO,EAAGL,EAAOS,QAAQ,MAK3CN,MAJYH,EAAOK,OAAOL,EAAOS,QAAQ,KAAO,IAQpD,QC5CYE,EAOAC,EAaAC,EDwBCC,EAAuB,SAClCC,EACAf,MAEKe,aAIIA,EAAef,GACtB,MAAOgB,YAqBEC,EAAY,SAACC,EAAgBC,WACnCD,KAIDA,EAAUE,SAASD,IAMZE,EAAmB,SAC9BH,EACAjB,EACAE,OAEIgB,OAAcjB,EACdoB,OAAgBpB,EAChBqB,OAAiBrB,SAEjBD,GAAQE,IAEVmB,EAAWrB,EACXsB,EAAYpB,EACPc,EAAUC,EAHfC,EAAYlB,MAAQE,KAKdc,EAAUC,EADdC,EAAYhB,MAASF,IAEnBqB,EAAWnB,EACXoB,EAAYtB,IAEZkB,OAASjB,EACToB,OAAWpB,EACXqB,OAAYrB,KAOX,CACLiB,OAAAA,EACAK,IAJUL,SAAgBA,OAAWjB,EAKrCoB,SAAAA,EACAC,UAAAA,KCrHQZ,EAAAA,kBAAAA,4CAEVA,wBAKUC,EAAAA,yBAAAA,8CAEVA,sBACAA,oBACAA,gCACAA,sBACAA,kCACAA,sBACAA,kBACAA,kBACAA,yBAGUC,EAAAA,oBAAAA,qCAEVA,gBAGF,IAAaY,UACVd,gBAAQe,SAAU,+CAClBf,gBAAQgB,QAAS,gDAGPC,UACVjB,gBAAQe,SAAU,+CAClBf,gBAAQgB,QAAS,w1BCxBRE,EAKAC,2BALAD,EAAAA,gBAAAA,6BAEVA,iBAGUC,EAAAA,sBAAAA,2CAEVA,gBACAA,gBACAA,sBACAA,kBACAA,4BACAA,oBACAA,wBACAA,sBACAA,oCCvBUC,ECAAC,EASAC,EFiECC,EAAkB,oBAC7BC,MAOMC,EAAW,CACfD,iBARML,oBAAYO,YASlBlB,SARFA,OASEmB,QARFA,MASEC,QARFA,MASEC,WARFA,SASEC,cARFA,oBAUAC,OAAOC,KAAKP,GAAKQ,SAAQ,SAACC,eACX3C,IAAbkC,EAAIS,UAA4BT,EAAIS,GAAO,MAEtCT,IC7FGL,EAAAA,wBAAAA,6EAEVA,+CACAA,kCACAA,0CACAA,+BACAA,iDACAA,qEACAA,oCACAA,yCACAA,uCACAA,4CACAA,4DACAA,kDACAA,mEAEAA,wCACAA,4BACAA,oCACAA,8BACAA,sCACAA,wCACAA,gDACAA,iCACAA,6BACAA,4CACAA,mCACAA,oDACAA,6CACAA,8CACAA,qDACAA,oDACAA,gDACAA,yDAEAA,mDACAA,+CACAA,2CACAA,4CACAA,kDACAA,mDACAA,2DACAA,kDACAA,sCAEAA,0CACAA,oCACAA,0CACAA,iDACAA,yDAEAA,kDACAA,6DAEAA,wDAEAA,yCACAA,+CACAA,gDACAA,8CACAA,wCACAA,wCACAA,8CACAA,wDACAA,8CACAA,yDACAA,sDACAA,4CACAA,4CACAA,sDACAA,yDACAA,oDACAA,iDACAA,iFACAA,2DACAA,6CACAA,mDAEAA,wCACAA,0CACAA,uCACAA,0CACAA,oDAEAA,+BAEAA,0BACAA,oEACAA,gEAEAA,8CACAA,gDACAA,oEACAA,8CACAA,oDACAA,kDACAA,+CACAA,oDACAA,8DACAA,0CACAA,4CAEAA,mEACAA,mEAEAA,2CAEAA,wDAEAA,2CACAA,yDACAA,oDACAA,6EACAA,0DACAA,oDACAA,gDACAA,mCACAA,qCACAA,sDACAA,yDACAA,iFACAA,4DACAA,iEACAA,wFACAA,mEACAA,8CACAA,sDACAA,wDACAA,kEACAA,6DACAA,8DACAA,4DACAA,2EACAA,iEAEAA,wCACAA,6DACAA,2DACAA,+DACAA,mEACAA,2DACAA,2DACAA,qDACAA,4DACAA,iDAEAA,sCACAA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"}